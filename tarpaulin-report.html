<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>:root {
  --color: black;
  --bg: white;
  --head-bg: white;
  --link: #338;

  --blue: #ccf;
  --red: #fcc;
  --yellow: #ffc;
  --green: #cfc;
}

[data-theme='dark'] {
  --color: white;
  --bg: black;
  --head-bg: #333;
  --link: #aaf;

  --blue: #225;
  --red: #522;
  --yellow: #552;
  --green: #252;
}

html,
body {
  margin: 0;
  padding: 0;
  color: var(--color);
  background: var(--bg);
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: var(--head-bg);
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: var(--blue);
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: var(--red);
}
.files-list__file_medium {
  background: var(--yellow);
}
.files-list__file_high {
  background: var(--green);
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  background: var(--bg);
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: var(--link);
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
  counter-reset: line;
  display: flex;
  flex-direction: column;
}

.code-line::before {
  content: counter(line);
  margin-right: 10px;
}
.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
  counter-increment: line;
}
.code-line_covered {
  background: var(--green);
}
.code-line_uncovered {
  background: var(--red);
}

#theme-toggle-label {
  margin-left: 1ch;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","animation","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::app::update::Update;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::signal::Signal;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::animator::Animator;\r\nuse maycoon::widgets::text::Text;\r\nuse std::time::Duration;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(context: AppContext, _: Self::State) -\u003e impl Widget {\r\n        let font_size = context.use_state(0.0);\r\n\r\n        Animator::new(\r\n            Duration::from_millis(2000),\r\n            Text::new(\"Hello World!\".to_string()).with_font_size(font_size.maybe()),\r\n            move |_, f| {\r\n                font_size.set(f * 30.0);\r\n\r\n                Update::DRAW\r\n            },\r\n        )\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","canvas","src","main.rs"],"content":"use maycoon::color::Brush;\r\nuse maycoon::color::color::palette;\r\nuse maycoon::color::kurbo::{Circle, Point, Stroke};\r\nuse maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::canvas::Canvas;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(_: AppContext, _: Self::State) -\u003e impl Widget {\r\n        Canvas::new(|scene, _| {\r\n            scene.draw_circle(\r\n                \u0026Brush::Solid(palette::css::GREEN),\r\n                None,\r\n                Some(\u0026Stroke::new(10.0)),\r\n                \u0026Circle::new(Point::new(100.0, 100.0), 50.0),\r\n            );\r\n        })\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","checkbox","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::layout::{AlignItems, Dimension, FlexDirection, LayoutStyle};\r\nuse maycoon::core::reference::Ref;\r\nuse maycoon::core::signal::Signal;\r\nuse maycoon::core::signal::state::StateSignal;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon::math::Vector2;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::checkbox::Checkbox;\r\nuse maycoon::widgets::container::Container;\r\nuse maycoon::widgets::text::Text;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(context: AppContext, _: Self::State) -\u003e impl Widget {\r\n        let checked = context.use_signal(StateSignal::new(false));\r\n\r\n        Container::new(vec![\r\n            {\r\n                let checked = checked.clone();\r\n\r\n                Box::new(Checkbox::new(checked.maybe()))\r\n            },\r\n            {\r\n                let checked = checked.clone();\r\n\r\n                Box::new(Text::new(checked.map(|val| Ref::Owned(val.to_string()))))\r\n            },\r\n        ])\r\n        .with_layout_style(LayoutStyle {\r\n            size: Vector2::\u003cDimension\u003e::new(Dimension::percent(1.0), Dimension::percent(1.0)),\r\n            flex_direction: FlexDirection::Column,\r\n            align_items: Some(AlignItems::Center),\r\n            ..Default::default()\r\n        })\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","component","src","counter.rs"],"content":"use maycoon::core::app::context::AppContext;\r\nuse maycoon::core::app::update::Update;\r\nuse maycoon::core::component::{Component, Composed};\r\nuse maycoon::core::layout::LayoutStyle;\r\nuse maycoon::core::reference::Ref;\r\nuse maycoon::core::signal::eval::EvalSignal;\r\nuse maycoon::core::signal::state::StateSignal;\r\nuse maycoon::core::signal::{MaybeSignal, Signal};\r\nuse maycoon::core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon::theme::id::WidgetId;\r\nuse maycoon::widgets::button::Button;\r\nuse maycoon::widgets::container::Container;\r\nuse maycoon::widgets::text::Text;\r\n\r\npub struct Counter {\r\n    counter: StateSignal\u003ci32\u003e,\r\n    layout: MaybeSignal\u003cLayoutStyle\u003e,\r\n}\r\n\r\nimpl Counter {\r\n    pub fn new(counter: StateSignal\u003ci32\u003e) -\u003e Composed\u003cSelf\u003e {\r\n        Counter {\r\n            counter,\r\n            layout: LayoutStyle::default().into(),\r\n        }\r\n        .compose()\r\n    }\r\n}\r\n\r\nimpl Component for Counter {\r\n    fn build(\u0026self, context: AppContext) -\u003e impl Widget + 'static {\r\n        let counter = self.counter.clone();\r\n\r\n        Container::new(vec![\r\n            {\r\n                let counter = counter.clone();\r\n\r\n                Box::new(\r\n                    Button::new(Text::new(\"Increase\".to_string())).with_on_pressed(\r\n                        EvalSignal::new(move || {\r\n                            counter.mutate(|i| *i += 1);\r\n                            Update::DRAW\r\n                        })\r\n                        .hook(\u0026context)\r\n                        .maybe(),\r\n                    ),\r\n                )\r\n            },\r\n            {\r\n                let counter = counter.clone();\r\n\r\n                Box::new(\r\n                    Button::new(Text::new(\"Decrease\".to_string())).with_on_pressed(\r\n                        EvalSignal::new(move || {\r\n                            counter.mutate(|i| *i -= 1);\r\n                            Update::DRAW\r\n                        })\r\n                        .hook(\u0026context)\r\n                        .maybe(),\r\n                    ),\r\n                )\r\n            },\r\n            Box::new(Text::new(counter.map(|i| Ref::Owned(i.to_string())))),\r\n        ])\r\n        .with_layout_style(self.layout.get().clone())\r\n    }\r\n\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"my-example\", \"Counter\")\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Counter {\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.layout = layout_style.into();\r\n    }\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","component","src","main.rs"],"content":"use crate::counter::Counter;\r\nuse maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::layout::{AlignItems, Dimension, FlexDirection, LayoutStyle};\r\nuse maycoon::core::signal::state::StateSignal;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon::math::Vector2;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\n\r\nmod counter;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(context: AppContext, _: Self::State) -\u003e impl Widget {\r\n        let counter = context.use_signal(StateSignal::new(0));\r\n\r\n        Counter::new(counter).with_layout_style(LayoutStyle {\r\n            size: Vector2::\u003cDimension\u003e::new(Dimension::percent(1.0), Dimension::percent(1.0)),\r\n            flex_direction: FlexDirection::Column,\r\n            align_items: Some(AlignItems::Center),\r\n            ..Default::default()\r\n        })\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","counter","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::app::update::Update;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::layout::{AlignItems, Dimension, FlexDirection, LayoutStyle};\r\nuse maycoon::core::reference::Ref;\r\nuse maycoon::core::signal::Signal;\r\nuse maycoon::core::signal::eval::EvalSignal;\r\nuse maycoon::core::signal::state::StateSignal;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon::math::Vector2;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::button::Button;\r\nuse maycoon::widgets::container::Container;\r\nuse maycoon::widgets::text::Text;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(context: AppContext, _: Self::State) -\u003e impl Widget {\r\n        let counter = context.use_signal(StateSignal::new(0));\r\n\r\n        Container::new(vec![\r\n            {\r\n                let counter = counter.clone();\r\n\r\n                Box::new(\r\n                    Button::new(Text::new(\"Increase\".to_string())).with_on_pressed(\r\n                        EvalSignal::new(move || {\r\n                            counter.mutate(|c| *c += 1);\r\n\r\n                            Update::DRAW\r\n                        })\r\n                        .hook(\u0026context)\r\n                        .maybe(),\r\n                    ),\r\n                )\r\n            },\r\n            {\r\n                let counter = counter.clone();\r\n\r\n                Box::new(\r\n                    Button::new(Text::new(\"Decrease\".to_string())).with_on_pressed(\r\n                        EvalSignal::new(move || {\r\n                            counter.mutate(|c| *c -= 1);\r\n\r\n                            Update::DRAW\r\n                        })\r\n                        .hook(\u0026context)\r\n                        .maybe(),\r\n                    ),\r\n                )\r\n            },\r\n            Box::new(Text::new(counter.map(|i| Ref::Owned(i.to_string())))),\r\n        ])\r\n        .with_layout_style(LayoutStyle {\r\n            size: Vector2::\u003cDimension\u003e::new(Dimension::percent(1.0), Dimension::percent(1.0)),\r\n            flex_direction: FlexDirection::Column,\r\n            align_items: Some(AlignItems::Center),\r\n            ..Default::default()\r\n        })\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","fetcher","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::app::update::Update;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::fetcher::WidgetFetcher;\r\nuse maycoon::widgets::text::Text;\r\nuse serde::Deserialize;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(_: AppContext, _: Self::State) -\u003e impl Widget {\r\n        WidgetFetcher::new(\r\n            Box::pin(get_random_quote()),\r\n            |data| {\r\n                if let Some(data) = data {\r\n                    Text::new(format!(\" \\\"{}\\\" \\n - {}\", data.quote, data.author))\r\n                } else {\r\n                    Text::new(\" Loading Quote...\".to_string())\r\n                }\r\n            },\r\n            Update::DRAW,\r\n        )\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n\r\n#[derive(Deserialize)]\r\nstruct Quote {\r\n    quote: String,\r\n    author: String,\r\n}\r\n\r\nasync fn get_random_quote() -\u003e Quote {\r\n    surf::get(\"https://dummyjson.com/quotes/random\")\r\n        .await\r\n        .expect(\"Failed to fetch quote\")\r\n        .body_json::\u003cQuote\u003e()\r\n        .await\r\n        .expect(\"Failed to parse quote\")\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","gesture_detector","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::app::update::Update;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::signal::Signal;\r\nuse maycoon::core::signal::eval::EvalSignal;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::gesture_detector::GestureDetector;\r\nuse maycoon::widgets::text::Text;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(context: AppContext, _: Self::State) -\u003e impl Widget {\r\n        GestureDetector::new(Text::new(\"Gesture Detector\".to_string()))\r\n            .with_on_hover(\r\n                EvalSignal::new(move || {\r\n                    println!(\"Hovered\");\r\n                    Update::DRAW\r\n                })\r\n                .hook(\u0026context)\r\n                .maybe(),\r\n            )\r\n            .with_on_release(\r\n                EvalSignal::new(move || {\r\n                    println!(\"Release\");\r\n                    Update::DRAW\r\n                })\r\n                .hook(\u0026context)\r\n                .maybe(),\r\n            )\r\n            .with_on_press(\r\n                EvalSignal::new(move || {\r\n                    println!(\"Press\");\r\n                    Update::DRAW\r\n                })\r\n                .hook(\u0026context)\r\n                .maybe(),\r\n            )\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","hello_world","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::text::Text;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(_: AppContext, _: Self::State) -\u003e impl Widget {\r\n        Text::new(\"Hello World\".to_string())\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","icon","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::macros::svg_icon;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::icon::Icon;\r\nuse maycoon::widgets::icon::svg::SvgIcon;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(_: AppContext, _: Self::State) -\u003e impl Widget {\r\n        let icon: SvgIcon = svg_icon!(\"./assets/logo.svg\");\r\n\r\n        Icon::new(icon)\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","image","src","main.rs"],"content":"use maycoon::color::{Blob, ImageAlphaType, ImageData, ImageFormat};\r\nuse maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::image::Image;\r\n\r\nconst IMAGE_DATA: \u0026[u8] = include_bytes!(\"../pelican.jpg\");\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(_: AppContext, _: Self::State) -\u003e impl Widget {\r\n        Image::new(ImageData {\r\n            data: Blob::from(\r\n                image::load_from_memory(IMAGE_DATA)\r\n                    .unwrap()\r\n                    .into_rgba8()\r\n                    .to_vec(),\r\n            ),\r\n            format: ImageFormat::Rgba8,\r\n            alpha_type: ImageAlphaType::Alpha,\r\n            width: 427,\r\n            height: 640,\r\n        })\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","plugin","src","main.rs"],"content":"use crate::plugin::MyPlugin;\r\nuse maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::plugin::PluginManager;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::text::Text;\r\n\r\npub mod plugin;\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(_: AppContext, _: Self::State) -\u003e impl Widget {\r\n        Text::new(\"Drop a file!\".to_string())\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n\r\n    fn plugins(\u0026self) -\u003e PluginManager\u003cSelf::Theme, Self::Graphics\u003e {\r\n        PluginManager::new().register(MyPlugin)\r\n    }\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","plugin","src","plugin.rs"],"content":"use maycoon::core::app::info::AppInfo;\r\nuse maycoon::core::app::update::UpdateManager;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::layout::{NodeId, TaffyTree};\r\nuse maycoon::core::plugin::{Plugin, PluginManager};\r\nuse maycoon::core::vgi::VectorGraphicsInterface;\r\nuse maycoon::core::window::{ActiveEventLoop, Window, WindowEvent};\r\nuse maycoon::theme::theme::Theme;\r\nuse std::sync::Arc;\r\n\r\npub struct MyPlugin;\r\n\r\nimpl\u003cT: Theme, V: VectorGraphicsInterface\u003e Plugin\u003cT, V\u003e for MyPlugin {\r\n    fn name(\u0026self) -\u003e \u0026'static str {\r\n        \"my_plugin\"\r\n    }\r\n\r\n    fn on_register(\u0026mut self, _manager: \u0026mut PluginManager\u003cT, V\u003e) {\r\n        println!(\"Hello World!\");\r\n    }\r\n\r\n    fn on_unregister(\u0026mut self, _manager: \u0026mut PluginManager\u003cT, V\u003e) {\r\n        println!(\"Bye World!\");\r\n    }\r\n\r\n    fn on_window_event(\r\n        \u0026mut self,\r\n        event: \u0026mut WindowEvent,\r\n        _config: \u0026mut MayConfig\u003cT, V\u003e,\r\n        _window: \u0026Arc\u003cWindow\u003e,\r\n        _scene: \u0026mut V::Scene,\r\n        _taffy: \u0026mut TaffyTree,\r\n        _window_node: NodeId,\r\n        _info: \u0026mut AppInfo,\r\n        _update: \u0026UpdateManager,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n    ) {\r\n        if let WindowEvent::DroppedFile(path) = event {\r\n            println!(\"Dropped file: {}\", path.to_string_lossy());\r\n        }\r\n    }\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","slider","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::layout::{AlignItems, Dimension, FlexDirection, LayoutStyle};\r\nuse maycoon::core::reference::Ref;\r\nuse maycoon::core::signal::Signal;\r\nuse maycoon::core::signal::state::StateSignal;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon::math::Vector2;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::container::Container;\r\nuse maycoon::widgets::slider::Slider;\r\nuse maycoon::widgets::text::Text;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(context: AppContext, _: Self::State) -\u003e impl Widget {\r\n        let value = context.use_signal(StateSignal::new(0.0f32));\r\n\r\n        Container::new(vec![\r\n            Box::new(Slider::new(value.maybe())),\r\n            Box::new(Text::new(value.map(|i| Ref::Owned(i.to_string())))),\r\n        ])\r\n        .with_layout_style(LayoutStyle {\r\n            size: Vector2::\u003cDimension\u003e::new(Dimension::percent(1.0), Dimension::percent(1.0)),\r\n            flex_direction: FlexDirection::Column,\r\n            align_items: Some(AlignItems::Center),\r\n            ..Default::default()\r\n        })\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","switch","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::layout::{AlignItems, Dimension, FlexDirection, LayoutStyle};\r\nuse maycoon::core::reference::Ref;\r\nuse maycoon::core::signal::Signal;\r\nuse maycoon::core::signal::state::StateSignal;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon::math::Vector2;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::container::Container;\r\nuse maycoon::widgets::switch::Switch;\r\nuse maycoon::widgets::text::Text;\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(context: AppContext, _: Self::State) -\u003e impl Widget {\r\n        let checked = context.use_signal(StateSignal::new(false));\r\n\r\n        Container::new(vec![\r\n            {\r\n                let checked = checked.clone();\r\n\r\n                Box::new(Switch::new(checked.maybe()))\r\n            },\r\n            {\r\n                let checked = checked.clone();\r\n\r\n                Box::new(Text::new(checked.map(|val| Ref::Owned(val.to_string()))))\r\n            },\r\n        ])\r\n        .with_layout_style(LayoutStyle {\r\n            size: Vector2::\u003cDimension\u003e::new(Dimension::percent(1.0), Dimension::percent(1.0)),\r\n            flex_direction: FlexDirection::Column,\r\n            align_items: Some(AlignItems::Center),\r\n            ..Default::default()\r\n        })\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n\r\nfn main() {\r\n    MyApp.run(())\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","examples","tracing-flame","src","main.rs"],"content":"use maycoon::core::app::Application;\r\nuse maycoon::core::app::context::AppContext;\r\nuse maycoon::core::config::MayConfig;\r\nuse maycoon::core::vgi::DefaultGraphics;\r\nuse maycoon::core::widget::Widget;\r\nuse maycoon::theme::theme::celeste::CelesteTheme;\r\nuse maycoon::widgets::text::Text;\r\nuse tracing_flame::FlameLayer;\r\nuse tracing_subscriber::filter::{FilterFn, LevelFilter};\r\nuse tracing_subscriber::layer::SubscriberExt;\r\nuse tracing_subscriber::util::SubscriberInitExt;\r\nuse tracing_subscriber::{Layer, fmt};\r\n\r\nconst FILTER_TARGETS: [\u0026str; 3] = [\"wgpu\", \"naga\", \"winit\"];\r\n\r\nfn main() {\r\n    let filter = FilterFn::new(|md| {\r\n        for target in FILTER_TARGETS {\r\n            if md.target().starts_with(target) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        true\r\n    });\r\n\r\n    let (flame, guard) = FlameLayer::with_file(\"tracing.folded\").unwrap();\r\n\r\n    tracing_subscriber::registry()\r\n        .with(\r\n            fmt::layer()\r\n                .compact()\r\n                .with_filter(filter.clone())\r\n                .with_filter(LevelFilter::DEBUG),\r\n        )\r\n        .with(flame.with_file_and_line(false).with_filter(filter))\r\n        .init();\r\n\r\n    MyApp.run(());\r\n\r\n    guard.flush().unwrap();\r\n}\r\n\r\nstruct MyApp;\r\n\r\nimpl Application for MyApp {\r\n    type Theme = CelesteTheme;\r\n    type Graphics = DefaultGraphics;\r\n    type State = ();\r\n\r\n    fn build(_: AppContext, _: Self::State) -\u003e impl Widget {\r\n        Text::new(\"Hello World!\".to_string())\r\n    }\r\n\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e {\r\n        MayConfig::default()\r\n    }\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","build.rs"],"content":"fn main() {\r\n    if cfg!(not(any(feature = \"tokio-runner\", feature = \"dummy-runner\"))) {\r\n        panic!(\r\n            \"No valid task runner feature selected. Please select a `-runner` feature (e.g. `tokio-runner`).\"\r\n        );\r\n    }\r\n\r\n    cfg_aliases::cfg_aliases! {\r\n        web: { target_arch = \"wasm32\" },\r\n        native: { not(target_arch = \"wasm32\") },\r\n    }\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","app","context.rs"],"content":"use crate::app::diagnostics::Diagnostics;\r\nuse crate::app::update::{Update, UpdateManager};\r\nuse crate::signal::Signal;\r\nuse crate::signal::eval::EvalSignal;\r\nuse crate::signal::fixed::FixedSignal;\r\nuse crate::signal::memoized::MemoizedSignal;\r\nuse crate::signal::state::StateSignal;\r\n\r\n/// The application context for managing the application lifecycle.\r\n#[derive(Clone)]\r\npub struct AppContext {\r\n    update: UpdateManager,\r\n    diagnostics: Diagnostics,\r\n}\r\n\r\nimpl AppContext {\r\n    /// Create a new application context using the given [UpdateManager].\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all)]\r\n    pub fn new(update: UpdateManager, diagnostics: Diagnostics) -\u003e Self {\r\n        Self {\r\n            update,\r\n            diagnostics,\r\n        }\r\n    }\r\n\r\n    /// Get the [Diagnostics] of the application.\r\n    #[inline(always)]\r\n    pub const fn diagnostics(\u0026self) -\u003e Diagnostics {\r\n        self.diagnostics\r\n    }\r\n\r\n    /// Get the [UpdateManager] of the application.\r\n    #[inline(always)]\r\n    pub fn update(\u0026self) -\u003e UpdateManager {\r\n        self.update.clone()\r\n    }\r\n\r\n    /// Make the application exit by setting [Update::EXIT].\r\n    #[inline(always)]\r\n    pub fn exit(\u0026self) {\r\n        self.update.insert(Update::EXIT);\r\n    }\r\n\r\n    /// Hook the given [Signal] to the [UpdateManager] of this application and return it.\r\n    ///\r\n    /// This makes the signal reactive, so it will notify the renderer when the inner value changes.\r\n    #[inline(always)]\r\n    pub fn use_signal\u003cT: 'static, S: Signal\u003cT\u003e\u003e(\u0026self, signal: S) -\u003e S {\r\n        let update = self.update();\r\n\r\n        signal.listen(Box::new(move |_| update.insert(Update::EVAL)))\r\n    }\r\n\r\n    /// Shortcut for creating and hooking a [StateSignal] into the application lifecycle.\r\n    #[inline(always)]\r\n    pub fn use_state\u003cT: 'static\u003e(\u0026self, value: T) -\u003e StateSignal\u003cT\u003e {\r\n        self.use_signal(StateSignal::new(value))\r\n    }\r\n\r\n    /// Shortcut for creating and hooking a [MemoizedSignal] into the application lifecycle.\r\n    #[inline(always)]\r\n    pub fn use_memoized\u003cT: 'static\u003e(\u0026self, value: impl Fn() -\u003e T + 'static) -\u003e MemoizedSignal\u003cT\u003e {\r\n        self.use_signal(MemoizedSignal::new(value))\r\n    }\r\n\r\n    /// Shortcut for creating and hooking a [FixedSignal] into the application lifecycle.\r\n    #[inline(always)]\r\n    pub fn use_fixed\u003cT: 'static\u003e(\u0026self, value: T) -\u003e FixedSignal\u003cT\u003e {\r\n        self.use_signal(FixedSignal::new(value))\r\n    }\r\n\r\n    /// Shortcut for creating and hooking an [EvalSignal] into the application lifecycle.\r\n    #[inline(always)]\r\n    pub fn use_eval\u003cT: 'static\u003e(\u0026self, eval: impl Fn() -\u003e T + 'static) -\u003e EvalSignal\u003cT\u003e {\r\n        self.use_signal(EvalSignal::new(eval))\r\n    }\r\n}\r\n","traces":[{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":18},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","app","diagnostics.rs"],"content":"use crate::platform::time::Instant;\r\n\r\n/// Contains diagnostics data for the application.\r\n#[derive(Debug, Copy, Clone, PartialEq)]\r\npub struct Diagnostics {\r\n    /// The last time the diagnostics got updated. Resets every second.\r\n    pub last_tick: Instant,\r\n\r\n    /// The updates since the last second. Use `updates_per_sec` for the average updates per second.\r\n    pub updates: usize,\r\n    /// The average updates per second.\r\n    pub updates_per_sec: usize,\r\n\r\n    /// The frames since the last second. Use `frames_per_sec` for the average frames per second.\r\n    pub frames: usize,\r\n    /// The average frames per second.\r\n    pub frames_per_sec: usize,\r\n\r\n    /// Whether this is the first run of the application.\r\n    pub first_run: bool,\r\n}\r\n\r\nimpl Diagnostics {\r\n    /// Ticks the diagnostics.\r\n    ///\r\n    /// This computes frames and updates per second\r\n    /// and is called every frame by the event loop.\r\n    #[inline(always)]\r\n    pub fn tick(\u0026mut self) {\r\n        if self.last_tick.elapsed().as_secs() \u003e= 1 {\r\n            self.last_tick = Instant::now();\r\n\r\n            self.frames_per_sec = (self.frames_per_sec + self.frames) / 2;\r\n            self.updates_per_sec = (self.updates_per_sec + self.updates) / 2;\r\n\r\n            self.updates = 0;\r\n            self.frames = 0;\r\n        }\r\n    }\r\n\r\n    /// Increases the update count.\r\n    #[inline(always)]\r\n    pub fn do_update(\u0026mut self) {\r\n        self.updates += 1;\r\n    }\r\n\r\n    /// Increases the frame count.\r\n    #[inline(always)]\r\n    pub fn do_frame(\u0026mut self) {\r\n        self.frames += 1;\r\n    }\r\n}\r\n\r\nimpl Default for Diagnostics {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self {\r\n            last_tick: Instant::now(),\r\n            updates: 0,\r\n            updates_per_sec: 0,\r\n            frames: 0,\r\n            frames_per_sec: 0,\r\n            first_run: true,\r\n        }\r\n    }\r\n}\r\n","traces":[{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":13},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","app","font_ctx.rs"],"content":"use peniko::FontData;\r\nuse rpds::HashTrieMap;\r\n\r\n/// A font manager for maycoon applications.\r\n///\r\n/// Can be used to load and access in-memory fonts or by system source.\r\n///\r\n/// If the default `include-noto-sans` feature is enabled, the default font is set to [Noto Sans](https://fonts.google.com/specimen/Noto+Sans).\r\n#[derive(Clone, Debug)]\r\npub struct FontContext {\r\n    default: String,\r\n    fonts: HashTrieMap\u003cString, FontData\u003e,\r\n}\r\n\r\nimpl FontContext {\r\n    /// Create a new font context with the given default font name.\r\n    ///\r\n    /// Make sure to load the default font via [FontContext::load],\r\n    /// before passing this context to the application runner.\r\n    #[inline(always)]\r\n    pub fn new(default: impl ToString) -\u003e Self {\r\n        Self {\r\n            default: default.to_string(),\r\n            fonts: HashTrieMap::new(),\r\n        }\r\n    }\r\n\r\n    /// Loads a font with a custom name into the font context and return itself.\r\n    ///\r\n    /// If the font with the same name already exists, [None] is returned.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all, fields(name = name.to_string()))]\r\n    pub fn load(self, name: impl ToString, font: FontData) -\u003e Option\u003cSelf\u003e {\r\n        let name = name.to_string();\r\n\r\n        tracing::trace!(\"loading font named {}\", name);\r\n\r\n        if self.fonts.contains_key(\u0026name) {\r\n            return None;\r\n        }\r\n\r\n        Some(Self {\r\n            fonts: self.fonts.insert(name, font),\r\n            default: self.default,\r\n        })\r\n    }\r\n\r\n    /// Set the default font.\r\n    ///\r\n    /// **NOTE:** The font must be loaded before usage with [FontContext::load].\r\n    #[inline(always)]\r\n    pub fn set_default_font(\u0026mut self, name: impl ToString) {\r\n        self.default = name.to_string();\r\n    }\r\n\r\n    /// Get a font by a specified name. Returns [None] if the font could not be found.\r\n    #[inline(always)]\r\n    pub fn get(\u0026self, name: impl ToString) -\u003e Option\u003cFontData\u003e {\r\n        self.fonts.get(\u0026name.to_string()).cloned()\r\n    }\r\n\r\n    /// Removes a font by the given name and returns it or [None] if the font could not be found.\r\n    #[inline(always)]\r\n    pub fn remove(self, name: impl AsRef\u003cstr\u003e) -\u003e Option\u003cSelf\u003e {\r\n        if self.fonts.contains_key(name.as_ref()) {\r\n            return None;\r\n        }\r\n\r\n        Some(Self {\r\n            fonts: self.fonts.remove(name.as_ref()),\r\n            default: self.default,\r\n        })\r\n    }\r\n\r\n    /// Returns the default font. [Roboto](https://fonts.google.com/specimen/Roboto) by default.\r\n    #[inline(always)]\r\n    pub fn default_font(\u0026self) -\u003e \u0026FontData {\r\n        self.fonts\r\n            .get(\u0026self.default)\r\n            .expect(\"Default font not found. Please load one via `FontContext::load`.\")\r\n    }\r\n}\r\n\r\nimpl Default for FontContext {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        tracing::debug!(\"loading noto sans system font\");\r\n\r\n        FontContext::new(\"Noto Sans\".to_string())\r\n            .load(\r\n                \"Noto Sans\",\r\n                FontData::new(\r\n                    peniko::Blob::new(std::sync::Arc::new(crate::DEFAULT_FONT)),\r\n                    0,\r\n                ),\r\n            )\r\n            .unwrap()\r\n    }\r\n}\r\n","traces":[{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":30},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","app","handler.rs"],"content":"use nalgebra::Vector2;\r\nuse std::sync::Arc;\r\nuse taffy::{\r\n    AvailableSpace, Dimension, NodeId, PrintTree, Size, Style, TaffyResult, TaffyTree,\r\n    TraversePartialTree,\r\n};\r\nuse winit::application::ApplicationHandler;\r\nuse winit::event::WindowEvent;\r\nuse winit::event_loop::ActiveEventLoop;\r\nuse winit::window::{Window, WindowAttributes, WindowId};\r\n\r\nuse crate::app::context::AppContext;\r\nuse crate::app::font_ctx::FontContext;\r\nuse crate::app::info::AppInfo;\r\nuse crate::app::update::{Update, UpdateManager};\r\nuse crate::config::MayConfig;\r\nuse crate::layout::{LayoutNode, StyleNode};\r\nuse crate::plugin::PluginManager;\r\nuse crate::vgi::{Scene, VectorGraphicsInterface};\r\nuse crate::widget::Widget;\r\nuse maycoon_theme::theme::Theme;\r\n\r\n/// The core application handler. You should use [MayApp](crate::app::MayApp) instead for running applications.\r\npub struct AppHandler\u003cT, W, S, F, V\u003e\r\nwhere\r\n    T: Theme,\r\n    W: Widget,\r\n    F: Fn(AppContext, S) -\u003e W,\r\n    V: VectorGraphicsInterface,\r\n{\r\n    config: MayConfig\u003cT, V\u003e,\r\n    attrs: WindowAttributes,\r\n    window: Option\u003cArc\u003cWindow\u003e\u003e,\r\n    scene: V::Scene,\r\n    taffy: TaffyTree,\r\n    window_node: NodeId,\r\n    builder: F,\r\n    state: Option\u003cS\u003e,\r\n    widget: Option\u003cW\u003e,\r\n    info: AppInfo,\r\n    update: UpdateManager,\r\n    plugins: PluginManager\u003cT, V\u003e,\r\n    graphics: V,\r\n}\r\n\r\nimpl\u003cT, W, S, F, V\u003e AppHandler\u003cT, W, S, F, V\u003e\r\nwhere\r\n    T: Theme,\r\n    W: Widget,\r\n    F: Fn(AppContext, S) -\u003e W,\r\n    V: VectorGraphicsInterface,\r\n{\r\n    /// Create a new handler with given window attributes, config, widget and state.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all)]\r\n    pub fn new(\r\n        attrs: WindowAttributes,\r\n        config: MayConfig\u003cT, V\u003e,\r\n        builder: F,\r\n        state: S,\r\n        font_context: FontContext,\r\n        update: UpdateManager,\r\n        plugins: PluginManager\u003cT, V\u003e,\r\n    ) -\u003e Self {\r\n        tracing::trace!(\"creating taffy tree\");\r\n        let mut taffy = TaffyTree::with_capacity(16);\r\n\r\n        // gets configured on resume\r\n        let window_node = taffy\r\n            .new_leaf(Style::default())\r\n            .expect(\"Failed to create window node\");\r\n\r\n        let size = config.window.size;\r\n\r\n        let graphics = config.graphics.clone();\r\n\r\n        Self {\r\n            attrs,\r\n            window: None,\r\n            config,\r\n            scene: Scene::new(),\r\n            taffy,\r\n            widget: None,\r\n            info: AppInfo {\r\n                font_context,\r\n                size,\r\n                ..Default::default()\r\n            },\r\n            window_node,\r\n            builder,\r\n            state: Some(state),\r\n            update,\r\n            plugins,\r\n            graphics: V::new(graphics).expect(\"Failed to create vector graphics interface\"),\r\n        }\r\n    }\r\n\r\n    /// Get the application context.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all)]\r\n    pub fn context(\u0026self) -\u003e AppContext {\r\n        AppContext::new(self.update.clone(), self.info.diagnostics)\r\n    }\r\n\r\n    /// Add the parent node and its children to the layout tree.\r\n    #[tracing::instrument(level = \"trace\", skip(self, style))]\r\n    fn layout_widget(\u0026mut self, parent: NodeId, style: \u0026StyleNode) -\u003e TaffyResult\u003c()\u003e {\r\n        let node = self.taffy.new_leaf(style.style.clone().into())?;\r\n\r\n        self.taffy.add_child(parent, node)?;\r\n\r\n        for child in \u0026style.children {\r\n            self.layout_widget(node, child)?;\r\n        }\r\n\r\n        Ok(())\r\n    }\r\n\r\n    /// Compute the layout of the root node and its children.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip(self))]\r\n    fn compute_layout(\u0026mut self) -\u003e TaffyResult\u003c()\u003e {\r\n        self.taffy.compute_layout(\r\n            self.window_node,\r\n            Size::\u003cAvailableSpace\u003e {\r\n                width: AvailableSpace::Definite(\r\n                    self.window.as_ref().unwrap().inner_size().width as f32,\r\n                ),\r\n                height: AvailableSpace::Definite(\r\n                    self.window.as_ref().unwrap().inner_size().height as f32,\r\n                ),\r\n            },\r\n        )?;\r\n        Ok(())\r\n    }\r\n\r\n    /// Collect the computed layout of the given node and its children. Make sure to call [AppHandler::compute_layout] before, to not get dirty results.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip(self, style))]\r\n    fn collect_layout(\u0026mut self, node: NodeId, style: \u0026StyleNode) -\u003e TaffyResult\u003cLayoutNode\u003e {\r\n        tracing::trace!(\"collecting node layout {node:?}\");\r\n\r\n        let mut children = Vec::with_capacity(style.children.capacity());\r\n\r\n        for (i, style) in style.children.iter().enumerate() {\r\n            let child = self.taffy.child_at_index(node, i)?;\r\n\r\n            tracing::trace!(\"collecting layout of child {child:?}\");\r\n\r\n            children.push(self.collect_layout(child, style)?);\r\n        }\r\n\r\n        Ok(LayoutNode {\r\n            layout: self.taffy.get_final_layout(node),\r\n            children,\r\n        })\r\n    }\r\n\r\n    /// Request a window redraw.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip(self))]\r\n    fn request_redraw(\u0026self) {\r\n        tracing::trace!(\"requesting redraw\");\r\n        self.window.as_ref().unwrap().request_redraw();\r\n    }\r\n\r\n    /// Render the application via the vector graphics interface.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip(self))]\r\n    fn render(\r\n        \u0026mut self,\r\n        window: Arc\u003cWindow\u003e,\r\n        event_loop: \u0026ActiveEventLoop,\r\n    ) -\u003e Result\u003c(), V::Error\u003e {\r\n        tracing::trace!(\"rendering via vector graphics interface\");\r\n        self.graphics.render(\r\n            window,\r\n            event_loop,\r\n            \u0026self.scene,\r\n            self.config.theme.window_background(),\r\n        )?;\r\n\r\n        Ok(())\r\n    }\r\n\r\n    /// Update the app and process events.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all)]\r\n    fn update(\u0026mut self, event_loop: \u0026ActiveEventLoop) {\r\n        // tick the task runner\r\n        crate::tasks::runner().tick();\r\n\r\n        // update plugins\r\n        tracing::trace!(\"updating plugins\");\r\n        self.plugins.run(|pl| {\r\n            pl.on_update(\r\n                \u0026mut self.config,\r\n                self.window.as_ref().expect(\"Window not initialized\"),\r\n                \u0026mut self.scene,\r\n                \u0026mut self.taffy,\r\n                self.window_node,\r\n                \u0026mut self.info,\r\n                \u0026self.update,\r\n                event_loop,\r\n            )\r\n        });\r\n\r\n        // completely layout widgets if taffy is not set up yet (e.g. during first update)\r\n        if self.taffy.child_count(self.window_node) == 0 {\r\n            tracing::trace_span!(\"complete layout\").in_scope(|| {\r\n                let style = self.widget.as_ref().unwrap().layout_style();\r\n\r\n                self.layout_widget(self.window_node, \u0026style)\r\n                    .expect(\"Failed to layout window\");\r\n\r\n                self.compute_layout().expect(\"Failed to compute layout\");\r\n\r\n                self.update.insert(Update::FORCE);\r\n            });\r\n        }\r\n\r\n        let style = self.widget.as_ref().unwrap().layout_style();\r\n\r\n        let mut layout_node = self\r\n            .collect_layout(\r\n                self.taffy.child_at_index(self.window_node, 0).unwrap(),\r\n                \u0026style,\r\n            )\r\n            .expect(\"Failed to collect layout\");\r\n\r\n        // update call to check if app should re-evaluate\r\n        let context = self.context();\r\n\r\n        tracing::trace!(\"updating widget\");\r\n        self.update.insert(\r\n            self.widget\r\n                .as_mut()\r\n                .unwrap()\r\n                .update(\u0026layout_node, context, \u0026self.info),\r\n        );\r\n\r\n        // check if app should re-evaluate layout\r\n        if self.update.is_set(Update::LAYOUT | Update::FORCE) {\r\n            tracing::trace_span!(\"layout\").in_scope(|| {\r\n                // clear all nodes (except root window node)\r\n                self.taffy\r\n                    .set_children(self.window_node, \u0026[])\r\n                    .expect(\"Failed to set children\");\r\n\r\n                let style = self.widget.as_ref().unwrap().layout_style();\r\n\r\n                self.layout_widget(self.window_node, \u0026style)\r\n                    .expect(\"Failed to layout window\");\r\n\r\n                self.compute_layout().expect(\"Failed to compute layout\");\r\n\r\n                layout_node = self\r\n                    .collect_layout(\r\n                        self.taffy.child_at_index(self.window_node, 0).unwrap(),\r\n                        \u0026style,\r\n                    )\r\n                    .expect(\"Failed to collect layout\");\r\n            });\r\n        }\r\n\r\n        // check if app should redraw\r\n        if self\r\n            .update\r\n            .is_set(Update::DRAW | Update::LAYOUT | Update::FORCE)\r\n        {\r\n            tracing::trace_span!(\"draw\").in_scope(|| {\r\n                // clear scene\r\n                tracing::trace!(\"resetting vector graphics interface scene\");\r\n                self.scene.reset();\r\n\r\n                let context = self.context();\r\n\r\n                tracing::trace!(\"drawing root widget\");\r\n                self.widget.as_mut().unwrap().render(\r\n                    \u0026mut self.scene,\r\n                    \u0026mut self.config.theme,\r\n                    \u0026layout_node,\r\n                    \u0026self.info,\r\n                    context,\r\n                );\r\n\r\n                let window = self.window.clone().expect(\"Window not initialized\");\r\n\r\n                // check surface validity\r\n                if window.inner_size().width != 0 \u0026\u0026 window.inner_size().height != 0 {\r\n                    self.render(window, event_loop)\r\n                        .expect(\"Failed rendering process\");\r\n                } else {\r\n                    tracing::debug!(\"skipping render due to invalid surface\");\r\n                }\r\n            });\r\n        }\r\n\r\n        // check if app should re-evaluate\r\n        if self.update.is_set(Update::EVAL) {\r\n            tracing::trace!(\"re-evaluating application state\");\r\n        }\r\n\r\n        // update the app if requested\r\n        if self.update.is_set(Update::EXIT) {\r\n            tracing::trace!(\"exiting event loop\");\r\n            event_loop.exit();\r\n            return;\r\n        }\r\n\r\n        // reset AppInfo and update states\r\n        tracing::trace!(\"resetting app info and update states\");\r\n        self.info.reset();\r\n        self.update.clear();\r\n\r\n        // update diagnostics\r\n        self.info.diagnostics.first_run = false;\r\n        self.info.diagnostics.do_update();\r\n    }\r\n\r\n    #[cold]\r\n    fn close(\u0026mut self, window: Arc\u003cWindow\u003e, event_loop: \u0026ActiveEventLoop) {\r\n        tracing::trace!(\"close requested\");\r\n\r\n        self.graphics\r\n            .destroy(window, event_loop)\r\n            .expect(\"Failed to destroy vector graphics interface\");\r\n\r\n        if self.config.window.close_on_request {\r\n            tracing::info!(\"exiting event loop\");\r\n            event_loop.exit();\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT, W, S, F, V\u003e ApplicationHandler for AppHandler\u003cT, W, S, F, V\u003e\r\nwhere\r\n    T: Theme,\r\n    W: Widget,\r\n    F: Fn(AppContext, S) -\u003e W,\r\n    V: VectorGraphicsInterface,\r\n{\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all)]\r\n    fn resumed(\u0026mut self, event_loop: \u0026ActiveEventLoop) {\r\n        tracing::debug!(\"resuming plugins\");\r\n        self.plugins.run(|pl| {\r\n            pl.on_resume(\r\n                \u0026mut self.config,\r\n                \u0026mut self.scene,\r\n                \u0026mut self.taffy,\r\n                self.window_node,\r\n                \u0026mut self.info,\r\n                \u0026self.update,\r\n                event_loop,\r\n            )\r\n        });\r\n\r\n        tracing::info!(\"creating window\");\r\n        let window = Arc::new(\r\n            event_loop\r\n                .create_window(self.attrs.clone())\r\n                .expect(\"Failed to create window\"),\r\n        );\r\n\r\n        tracing::info!(\"initializing layout\");\r\n        let size = window.inner_size();\r\n\r\n        self.taffy\r\n            .set_style(\r\n                self.window_node,\r\n                Style {\r\n                    size: Size::\u003cDimension\u003e {\r\n                        width: Dimension::length(size.width as f32),\r\n                        height: Dimension::length(size.height as f32),\r\n                    },\r\n                    ..Default::default()\r\n                },\r\n            )\r\n            .expect(\"Failed to set window node style\");\r\n\r\n        tracing::info!(\"initializing vector graphics interface\");\r\n        self.graphics\r\n            .init(window.clone(), event_loop)\r\n            .expect(\"Failed to initialize vector graphics interface\");\r\n\r\n        tracing::info!(\"building root widget\");\r\n        self.widget = Some((self.builder)(\r\n            AppContext::new(self.update.clone(), self.info.diagnostics),\r\n            self.state.take().unwrap(),\r\n        ));\r\n\r\n        self.window = Some(window);\r\n    }\r\n\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all, fields(event =\r\n        ?event))]\r\n    fn window_event(\r\n        \u0026mut self,\r\n        event_loop: \u0026ActiveEventLoop,\r\n        window_id: WindowId,\r\n        mut event: WindowEvent,\r\n    ) {\r\n        tracing::trace!(\"running plugin window event\");\r\n        self.plugins.run(|pl| {\r\n            pl.on_window_event(\r\n                \u0026mut event,\r\n                \u0026mut self.config,\r\n                self.window.as_ref().unwrap(),\r\n                \u0026mut self.scene,\r\n                \u0026mut self.taffy,\r\n                self.window_node,\r\n                \u0026mut self.info,\r\n                \u0026self.update,\r\n                event_loop,\r\n            )\r\n        });\r\n\r\n        if let Some(window) = \u0026self.window\r\n            \u0026\u0026 window.id() == window_id\r\n        {\r\n            match event {\r\n                WindowEvent::Resized(new_size) =\u003e {\r\n                    tracing::debug!(\"resizing window to {new_size:?}\");\r\n\r\n                    if new_size.width != 0 \u0026\u0026 new_size.height != 0 {\r\n                        tracing::trace!(\"resizing vector graphics interface\");\r\n                        self.graphics\r\n                            .resize(\r\n                                window.clone(),\r\n                                event_loop,\r\n                                Vector2::new(new_size.width, new_size.height),\r\n                            )\r\n                            .expect(\"Failed to resize vector graphics interface\");\r\n\r\n                        tracing::trace!(\"resizing root layout node\");\r\n                        self.taffy\r\n                            .set_style(\r\n                                self.window_node,\r\n                                Style {\r\n                                    size: Size::\u003cDimension\u003e {\r\n                                        width: Dimension::length(new_size.width as f32),\r\n                                        height: Dimension::length(new_size.height as f32),\r\n                                    },\r\n                                    ..Default::default()\r\n                                },\r\n                            )\r\n                            .expect(\"Failed to set window node style\");\r\n\r\n                        self.info.size =\r\n                            Vector2::new(new_size.width as f64, new_size.height as f64);\r\n\r\n                        self.update\r\n                            .insert(Update::EVAL | Update::DRAW | Update::LAYOUT);\r\n                    } else {\r\n                        tracing::trace!(\"window size is 0x0, ignoring resize event\");\r\n                    }\r\n                },\r\n\r\n                WindowEvent::CloseRequested =\u003e {\r\n                    self.close(window.clone(), event_loop);\r\n                },\r\n\r\n                WindowEvent::RedrawRequested =\u003e {\r\n                    window.request_redraw();\r\n\r\n                    // update diagnostics frames\r\n                    self.info.diagnostics.do_frame();\r\n\r\n                    if self.update.is_set(Update::EVAL) {\r\n                        self.update.remove(Update::EVAL);\r\n                        self.update(event_loop);\r\n                    }\r\n\r\n                    // update diagnostics computations\r\n                    tracing::trace!(\"updating diagnostics\");\r\n                    self.info.diagnostics.tick();\r\n\r\n                    tracing::debug!(\"updates per sec {}\", self.info.diagnostics.updates_per_sec);\r\n                    tracing::debug!(\"frames per sec {}\", self.info.diagnostics.frames_per_sec);\r\n                },\r\n\r\n                WindowEvent::CursorLeft { .. } =\u003e {\r\n                    self.info.cursor_pos = None;\r\n                    self.update.insert(Update::EVAL);\r\n                },\r\n\r\n                WindowEvent::CursorMoved { position, .. } =\u003e {\r\n                    self.info.cursor_pos = Some(Vector2::new(position.x as f32, position.y as f32));\r\n                    self.update.insert(Update::EVAL);\r\n                },\r\n\r\n                WindowEvent::KeyboardInput {\r\n                    event,\r\n                    device_id,\r\n                    is_synthetic,\r\n                } =\u003e {\r\n                    if !is_synthetic {\r\n                        tracing::trace!(\"keyboard input {event:?}\");\r\n\r\n                        self.info.keys.push((device_id, event));\r\n                        self.update.insert(Update::EVAL);\r\n                    }\r\n                },\r\n\r\n                WindowEvent::MouseInput {\r\n                    device_id,\r\n                    button,\r\n                    state,\r\n                } =\u003e {\r\n                    tracing::trace!(\"mouse input {button:?} {state:?}\");\r\n\r\n                    self.info.buttons.push((device_id, button, state));\r\n                    self.update.insert(Update::EVAL);\r\n                },\r\n\r\n                WindowEvent::MouseWheel { delta, .. } =\u003e {\r\n                    tracing::trace!(\"mouse wheel {delta:?}\");\r\n                    self.info.mouse_scroll_delta = Some(delta);\r\n                    self.update.insert(Update::EVAL);\r\n                },\r\n\r\n                WindowEvent::Destroyed =\u003e tracing::info!(\"window destroyed\"),\r\n\r\n                _ =\u003e (),\r\n            }\r\n        }\r\n    }\r\n\r\n    #[cold]\r\n    #[tracing::instrument(level = \"trace\", skip_all)]\r\n    fn suspended(\u0026mut self, event_loop: \u0026ActiveEventLoop) {\r\n        tracing::trace!(\"destroying vector graphics interface\");\r\n        let window = self.window.clone().unwrap();\r\n        self.graphics\r\n            .uninit(window, event_loop)\r\n            .expect(\"Failed to destroy vector graphics interface\");\r\n\r\n        tracing::trace!(\"destroying window\");\r\n        self.window = None;\r\n\r\n        tracing::trace!(\"running plugin suspensions\");\r\n        self.plugins.run(|pl| {\r\n            pl.on_suspended(\r\n                \u0026mut self.config,\r\n                \u0026mut self.scene,\r\n                \u0026mut self.taffy,\r\n                self.window_node,\r\n                \u0026mut self.info,\r\n                \u0026self.update,\r\n                event_loop,\r\n            )\r\n        });\r\n\r\n        self.info.reset();\r\n    }\r\n}\r\n","traces":[{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":191,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":214,"address":[],"length":0,"stats":{"Line":0}},{"line":216,"address":[],"length":0,"stats":{"Line":0}},{"line":218,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":224,"address":[],"length":0,"stats":{"Line":0}},{"line":226,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":235,"address":[],"length":0,"stats":{"Line":0}},{"line":236,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":239,"address":[],"length":0,"stats":{"Line":0}},{"line":243,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":0}},{"line":246,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":248,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":252,"address":[],"length":0,"stats":{"Line":0}},{"line":253,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":0}},{"line":257,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":260,"address":[],"length":0,"stats":{"Line":0}},{"line":262,"address":[],"length":0,"stats":{"Line":0}},{"line":267,"address":[],"length":0,"stats":{"Line":0}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":279,"address":[],"length":0,"stats":{"Line":0}},{"line":280,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":292,"address":[],"length":0,"stats":{"Line":0}},{"line":294,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":305,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":314,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":318,"address":[],"length":0,"stats":{"Line":0}},{"line":322,"address":[],"length":0,"stats":{"Line":0}},{"line":323,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":329,"address":[],"length":0,"stats":{"Line":0}},{"line":330,"address":[],"length":0,"stats":{"Line":0}},{"line":331,"address":[],"length":0,"stats":{"Line":0}},{"line":345,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":348,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":350,"address":[],"length":0,"stats":{"Line":0}},{"line":351,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":359,"address":[],"length":0,"stats":{"Line":0}},{"line":361,"address":[],"length":0,"stats":{"Line":0}},{"line":362,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":369,"address":[],"length":0,"stats":{"Line":0}},{"line":371,"address":[],"length":0,"stats":{"Line":0}},{"line":372,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":384,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":388,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":390,"address":[],"length":0,"stats":{"Line":0}},{"line":393,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":405,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":407,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":409,"address":[],"length":0,"stats":{"Line":0}},{"line":410,"address":[],"length":0,"stats":{"Line":0}},{"line":411,"address":[],"length":0,"stats":{"Line":0}},{"line":412,"address":[],"length":0,"stats":{"Line":0}},{"line":413,"address":[],"length":0,"stats":{"Line":0}},{"line":414,"address":[],"length":0,"stats":{"Line":0}},{"line":415,"address":[],"length":0,"stats":{"Line":0}},{"line":416,"address":[],"length":0,"stats":{"Line":0}},{"line":420,"address":[],"length":0,"stats":{"Line":0}},{"line":421,"address":[],"length":0,"stats":{"Line":0}},{"line":423,"address":[],"length":0,"stats":{"Line":0}},{"line":424,"address":[],"length":0,"stats":{"Line":0}},{"line":425,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":431,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":433,"address":[],"length":0,"stats":{"Line":0}},{"line":437,"address":[],"length":0,"stats":{"Line":0}},{"line":438,"address":[],"length":0,"stats":{"Line":0}},{"line":440,"address":[],"length":0,"stats":{"Line":0}},{"line":441,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":0}},{"line":443,"address":[],"length":0,"stats":{"Line":0}},{"line":444,"address":[],"length":0,"stats":{"Line":0}},{"line":446,"address":[],"length":0,"stats":{"Line":0}},{"line":451,"address":[],"length":0,"stats":{"Line":0}},{"line":452,"address":[],"length":0,"stats":{"Line":0}},{"line":454,"address":[],"length":0,"stats":{"Line":0}},{"line":455,"address":[],"length":0,"stats":{"Line":0}},{"line":457,"address":[],"length":0,"stats":{"Line":0}},{"line":461,"address":[],"length":0,"stats":{"Line":0}},{"line":462,"address":[],"length":0,"stats":{"Line":0}},{"line":465,"address":[],"length":0,"stats":{"Line":0}},{"line":466,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":472,"address":[],"length":0,"stats":{"Line":0}},{"line":473,"address":[],"length":0,"stats":{"Line":0}},{"line":477,"address":[],"length":0,"stats":{"Line":0}},{"line":478,"address":[],"length":0,"stats":{"Line":0}},{"line":480,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":484,"address":[],"length":0,"stats":{"Line":0}},{"line":485,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":489,"address":[],"length":0,"stats":{"Line":0}},{"line":490,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":0}},{"line":494,"address":[],"length":0,"stats":{"Line":0}},{"line":495,"address":[],"length":0,"stats":{"Line":0}},{"line":496,"address":[],"length":0,"stats":{"Line":0}},{"line":497,"address":[],"length":0,"stats":{"Line":0}},{"line":498,"address":[],"length":0,"stats":{"Line":0}},{"line":499,"address":[],"length":0,"stats":{"Line":0}},{"line":500,"address":[],"length":0,"stats":{"Line":0}},{"line":502,"address":[],"length":0,"stats":{"Line":0}},{"line":503,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":508,"address":[],"length":0,"stats":{"Line":0}},{"line":509,"address":[],"length":0,"stats":{"Line":0}},{"line":510,"address":[],"length":0,"stats":{"Line":0}},{"line":511,"address":[],"length":0,"stats":{"Line":0}},{"line":512,"address":[],"length":0,"stats":{"Line":0}},{"line":514,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":518,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":0}},{"line":520,"address":[],"length":0,"stats":{"Line":0}},{"line":521,"address":[],"length":0,"stats":{"Line":0}},{"line":524,"address":[],"length":0,"stats":{"Line":0}},{"line":526,"address":[],"length":0,"stats":{"Line":0}},{"line":533,"address":[],"length":0,"stats":{"Line":0}},{"line":534,"address":[],"length":0,"stats":{"Line":0}},{"line":535,"address":[],"length":0,"stats":{"Line":0}},{"line":536,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":0}},{"line":540,"address":[],"length":0,"stats":{"Line":0}},{"line":541,"address":[],"length":0,"stats":{"Line":0}},{"line":543,"address":[],"length":0,"stats":{"Line":0}},{"line":544,"address":[],"length":0,"stats":{"Line":0}},{"line":545,"address":[],"length":0,"stats":{"Line":0}},{"line":546,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":548,"address":[],"length":0,"stats":{"Line":0}},{"line":549,"address":[],"length":0,"stats":{"Line":0}},{"line":550,"address":[],"length":0,"stats":{"Line":0}},{"line":551,"address":[],"length":0,"stats":{"Line":0}},{"line":552,"address":[],"length":0,"stats":{"Line":0}},{"line":556,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":259},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","app","info.rs"],"content":"use nalgebra::Vector2;\r\nuse winit::event::{DeviceId, ElementState, KeyEvent, MouseButton, MouseScrollDelta};\r\n\r\nuse crate::app::diagnostics::Diagnostics;\r\nuse crate::app::font_ctx::FontContext;\r\n\r\n/// The application information container.\r\npub struct AppInfo {\r\n    /// The position of the cursor. If [None], the cursor left the window.\r\n    pub cursor_pos: Option\u003cVector2\u003cf32\u003e\u003e,\r\n    /// The fired key events.\r\n    pub keys: Vec\u003c(DeviceId, KeyEvent)\u003e,\r\n    /// The fired mouse button events.\r\n    pub buttons: Vec\u003c(DeviceId, MouseButton, ElementState)\u003e,\r\n    /// The mouse scroll delta, if a [winit::event::WindowEvent::MouseWheel] event was fired.\r\n    pub mouse_scroll_delta: Option\u003cMouseScrollDelta\u003e,\r\n    /// App Diagnostics.\r\n    pub diagnostics: Diagnostics,\r\n    /// The current font context.\r\n    pub font_context: FontContext,\r\n    /// The size of the window.\r\n    pub size: Vector2\u003cf64\u003e,\r\n}\r\n\r\nimpl AppInfo {\r\n    /// Reset the application information for a new frame.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all)]\r\n    pub fn reset(\u0026mut self) {\r\n        self.buttons.clear();\r\n        self.keys.clear();\r\n        self.mouse_scroll_delta = None;\r\n    }\r\n}\r\n\r\nimpl Default for AppInfo {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self {\r\n            cursor_pos: None,\r\n            keys: Vec::with_capacity(4),\r\n            buttons: Vec::with_capacity(2),\r\n            mouse_scroll_delta: None,\r\n            diagnostics: Diagnostics::default(),\r\n            font_context: FontContext::default(),\r\n            size: Vector2::new(0.0, 0.0),\r\n        }\r\n    }\r\n}\r\n","traces":[{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":10},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","app","mod.rs"],"content":"use crate::app::context::AppContext;\r\nuse crate::app::runner::MayRunner;\r\nuse crate::config::MayConfig;\r\nuse crate::plugin::PluginManager;\r\nuse crate::vgi::VectorGraphicsInterface;\r\nuse crate::widget::Widget;\r\nuse maycoon_theme::theme::Theme;\r\n\r\n/// Contains diagnostics data for the application.\r\npub mod diagnostics;\r\n\r\n/// Contains the font context structure.\r\npub mod font_ctx;\r\n\r\n/// Contains the application handler.\r\npub mod handler;\r\n\r\n/// Contains the application information structure.\r\npub mod info;\r\n\r\n/// Contains the update mode bitflag.\r\npub mod update;\r\n\r\n/// Contains the [AppContext] structure for access to the application lifecycle.\r\npub mod context;\r\n\r\n/// Contains the [MayRunner] structure to create and run an application using `winit`.\r\npub mod runner;\r\n\r\n/// The main application interface.\r\n///\r\n/// Contains basic functions for the [MayRunner] to create and run an application.\r\npub trait Application: Sized {\r\n    /// The theme of the application and its widgets.\r\n    ///\r\n    /// See [maycoon_theme::theme] for built-in themes.\r\n    type Theme: Theme;\r\n\r\n    // TODO: Change to default type, once (associated type defaults)[https://github.com/rust-lang/rust/issues/29661] is stabilized.\r\n    /// The vector graphics interface to use for rendering.\r\n    ///\r\n    /// See [VectorGraphicsInterface] for more.\r\n    type Graphics: VectorGraphicsInterface;\r\n\r\n    /// The global state of the application.\r\n    type State;\r\n\r\n    /// Renders/builds the application's widgets.\r\n    ///\r\n    /// This function will be passed to the [MayRunner] to create and run the application.\r\n    fn build(context: AppContext, state: Self::State) -\u003e impl Widget;\r\n\r\n    /// Returns the [MayConfig] for the application.\r\n    fn config(\u0026self) -\u003e MayConfig\u003cSelf::Theme, Self::Graphics\u003e;\r\n\r\n    /// Builds and returns the [PluginManager] for the application.\r\n    #[inline(always)]\r\n    fn plugins(\u0026self) -\u003e PluginManager\u003cSelf::Theme, Self::Graphics\u003e {\r\n        PluginManager::new()\r\n    }\r\n\r\n    /// Initializes the backend application data.\r\n    ///\r\n    /// This function is called before the actual launch of the app.\r\n    ///\r\n    /// The default implementation just initializes the task runner.\r\n    #[inline(always)]\r\n    fn init(\u0026self) {\r\n        #[cfg(feature = \"tokio-runner\")]\r\n        {\r\n            tracing::info!(\"initializing tokio task runner\");\r\n            crate::tasks::init(crate::tasks::runner::TaskRunner::Tokio(\r\n                crate::tasks::runner::tokio::TaskRunner::new(\r\n                    true, None, None, None, None, None, None, None,\r\n                ),\r\n            ));\r\n        }\r\n    }\r\n\r\n    /// Runs the application using the [MayRunner].\r\n    ///\r\n    /// Override this method if you want to use a custom event loop.\r\n    #[inline(always)]\r\n    fn run(self, state: Self::State) {\r\n        let config = self.config();\r\n\r\n        tracing::info_span!(\"init\").in_scope(|| self.init());\r\n\r\n        tracing::info!(\"launching application runner with config {config:?}\");\r\n        MayRunner::\u003cSelf::Theme, Self::Graphics\u003e::new(config).run(\r\n            state,\r\n            Self::build,\r\n            self.plugins(),\r\n        );\r\n    }\r\n}\r\n","traces":[{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":15},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","app","runner.rs"],"content":"use crate::app::context::AppContext;\r\nuse crate::app::font_ctx::FontContext;\r\nuse crate::app::handler::AppHandler;\r\nuse crate::app::update::UpdateManager;\r\nuse crate::config::MayConfig;\r\nuse crate::plugin::PluginManager;\r\nuse crate::vgi::VectorGraphicsInterface;\r\nuse crate::widget::Widget;\r\nuse maycoon_theme::theme::Theme;\r\nuse peniko::FontData;\r\nuse winit::dpi::{LogicalPosition, LogicalSize, Position, Size};\r\nuse winit::event_loop::EventLoopBuilder;\r\nuse winit::window::WindowAttributes;\r\n\r\n/// The core Application structure.\r\npub struct MayRunner\u003cT: Theme, V: VectorGraphicsInterface\u003e {\r\n    config: MayConfig\u003cT, V\u003e,\r\n    font_ctx: FontContext,\r\n}\r\n\r\nimpl\u003cT: Theme, V: VectorGraphicsInterface\u003e MayRunner\u003cT, V\u003e {\r\n    /// Create a new App with the given [MayConfig].\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"trace\", skip_all)]\r\n    pub fn new(config: MayConfig\u003cT, V\u003e) -\u003e Self {\r\n        Self {\r\n            config,\r\n            font_ctx: FontContext::default(),\r\n        }\r\n    }\r\n\r\n    /// Loads a new font into the font context.\r\n    ///\r\n    /// See [FontContext::load] for more.\r\n    #[inline(always)]\r\n    pub fn with_font(self, name: impl ToString, font: FontData) -\u003e Self {\r\n        Self {\r\n            config: self.config,\r\n            font_ctx: self.font_ctx.load(name, font).expect(\"Font already loaded\"),\r\n        }\r\n    }\r\n\r\n    /// Set the font context. Can be used to configure fonts.\r\n    #[inline(always)]\r\n    pub fn with_font_context(mut self, font_ctx: FontContext) -\u003e Self {\r\n        self.font_ctx = font_ctx;\r\n        self\r\n    }\r\n\r\n    /// Run the application with given widget and state.\r\n    #[inline(always)]\r\n    #[tracing::instrument(level = \"info\", skip_all)]\r\n    pub fn run\u003cS, W, F\u003e(mut self, state: S, builder: F, mut plugins: PluginManager\u003cT, V\u003e)\r\n    where\r\n        W: Widget,\r\n        F: Fn(AppContext, S) -\u003e W,\r\n    {\r\n        tracing::trace!(\"building event loop\");\r\n        let mut event_loop = EventLoopBuilder::default()\r\n            .build()\r\n            .expect(\"Failed to create event loop\");\r\n\r\n        let mut attrs = WindowAttributes::default()\r\n            .with_inner_size(LogicalSize::new(\r\n                self.config.window.size.x,\r\n                self.config.window.size.y,\r\n            ))\r\n            .with_resizable(self.config.window.resizable)\r\n            .with_enabled_buttons(self.config.window.buttons)\r\n            .with_title(self.config.window.title.clone())\r\n            .with_maximized(self.config.window.maximized)\r\n            .with_visible(self.config.window.visible)\r\n            .with_transparent(self.config.window.transparent)\r\n            .with_blur(self.config.window.blur)\r\n            .with_decorations(self.config.window.decorations)\r\n            .with_window_icon(self.config.window.icon.clone())\r\n            .with_content_protected(self.config.window.content_protected)\r\n            .with_window_level(self.config.window.level)\r\n            .with_active(self.config.window.active)\r\n            .with_cursor(self.config.window.cursor.clone());\r\n\r\n        // since `with_max_inner_size()` doesn't support `Option` values, we need to manually set it\r\n        attrs.max_inner_size = self\r\n            .config\r\n            .window\r\n            .max_size\r\n            .map(|v| Size::Logical(LogicalSize::new(v.x, v.y)));\r\n\r\n        // since `with_min_inner_size()` doesn't support `Option` values, we need to manually set it\r\n        attrs.min_inner_size = self\r\n            .config\r\n            .window\r\n            .min_size\r\n            .map(|v| Size::Logical(LogicalSize::new(v.x, v.y)));\r\n\r\n        // since `with_position()` doesn't support `Option` values, we need to manually set it\r\n        attrs.position = self\r\n            .config\r\n            .window\r\n            .position\r\n            .map(|v| Position::Logical(LogicalPosition::new(v.x, v.y)));\r\n\r\n        // since `with_resize_increments()` doesn't support `Option` values, we need to manually set it\r\n        attrs.resize_increments = self\r\n            .config\r\n            .window\r\n            .resize_increments\r\n            .map(|v| Size::Logical(LogicalSize::new(v.x, v.y)));\r\n\r\n        tracing::trace!(\"creating update manager\");\r\n        let update = UpdateManager::new();\r\n\r\n        tracing::trace!(\"initializing plugins\");\r\n        plugins.run(|pl| pl.init(\u0026mut event_loop, \u0026update, \u0026mut attrs, \u0026mut self.config));\r\n\r\n        tracing::info!(\"running application handler\");\r\n        event_loop\r\n            .run_app(\u0026mut AppHandler::new(\r\n                attrs,\r\n                self.config,\r\n                builder,\r\n                state,\r\n                self.font_ctx,\r\n                update,\r\n                plugins,\r\n            ))\r\n            .expect(\"Failed to run event loop\");\r\n    }\r\n}\r\n","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":62},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","app","update.rs"],"content":"use bitflags::bitflags;\r\nuse std::sync::Arc;\r\nuse std::sync::atomic::{AtomicU8, Ordering};\r\n\r\nbitflags! {\r\n    /// Update bitflags to define which part of the App should Update.\r\n    ///\r\n    /// Possible values:\r\n    /// - **EVAL** - Re-evaluate the widget tree.\r\n    /// - **DRAW** - Re-draw the widget tree.\r\n    /// - **LAYOUT** - Re-layout the widget tree.\r\n    /// - **FORCE** - Force the App to re-evaluate, re-draw and re-layout the widget tree.\r\n    #[derive(Debug, Clone, Copy, PartialEq, Eq, PartialOrd, Ord, Hash)]\r\n    pub struct Update: u8 {\r\n        /// Re-evaluate the widget tree.\r\n        const EVAL   = 0b00000001;\r\n        /// Re-draw the widget tree.\r\n        const DRAW   = 0b00000010;\r\n        /// Re-layout the widget tree.\r\n        const LAYOUT = 0b00000100;\r\n        /// Force the App to re-evaluate, re-draw and re-layout the widget tree.\r\n        const FORCE  = 0b00001000;\r\n        /// Makes the App exit.\r\n        const EXIT   = 0b00010000;\r\n    }\r\n}\r\n\r\n/// Manages updates for the application lifecycle.\r\n///\r\n/// It's using atomic operations to ensure lockless thread-safety.\r\n#[derive(Clone, Debug)]\r\npub struct UpdateManager {\r\n    update: Arc\u003cAtomicU8\u003e,\r\n}\r\n\r\nimpl UpdateManager {\r\n    /// Creates a new `UpdateManager`.\r\n    #[inline(always)]\r\n    pub fn new() -\u003e Self {\r\n        Self {\r\n            update: Arc::new(AtomicU8::new(Update::FORCE.bits())),\r\n        }\r\n    }\r\n\r\n    /// Inserts the given `Update` into the `UpdateManager` using bitwise OR.\r\n    #[inline(always)]\r\n    pub fn insert(\u0026self, update: Update) {\r\n        self.update.fetch_or(update.bits(), Ordering::AcqRel);\r\n    }\r\n\r\n    /// Removes the given `Update` from the `UpdateManager` using bitwise AND.\r\n    #[inline(always)]\r\n    pub fn remove(\u0026self, update: Update) {\r\n        self.update.fetch_and(!update.bits(), Ordering::AcqRel);\r\n    }\r\n\r\n    /// Returns the current `Update` of the `UpdateManager`.\r\n    #[inline(always)]\r\n    pub fn get(\u0026self) -\u003e Update {\r\n        Update::from_bits(self.update.load(Ordering::Acquire))\r\n            .expect(\"failed to decode update bits\")\r\n    }\r\n\r\n    /// Sets the current `Update` of the `UpdateManager`.\r\n    #[inline(always)]\r\n    pub fn set(\u0026self, update: Update) {\r\n        self.update.store(update.bits(), Ordering::Release);\r\n    }\r\n\r\n    /// Clears the current `Update` flags of the `UpdateManager`.\r\n    #[inline(always)]\r\n    pub fn clear(\u0026self) {\r\n        self.update.store(0, Ordering::Release);\r\n    }\r\n\r\n    /// Checks if the given [Update] flag is set.\r\n    ///\r\n    /// Equivalent to `UpdateManager.get().intersects(flag)`.\r\n    #[inline(always)]\r\n    pub fn is_set(\u0026self, flag: Update) -\u003e bool {\r\n        self.get().intersects(flag)\r\n    }\r\n}\r\n\r\nimpl Default for UpdateManager {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self::new()\r\n    }\r\n}\r\n","traces":[{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":16},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","component.rs"],"content":"use crate::app::context::AppContext;\r\nuse crate::app::info::AppInfo;\r\nuse crate::app::update::Update;\r\nuse crate::layout::{LayoutNode, LayoutStyle, StyleNode};\r\nuse crate::signal::MaybeSignal;\r\nuse crate::vgi::Scene;\r\nuse crate::widget::{BoxedWidget, Widget, WidgetChildExt, WidgetChildrenExt, WidgetLayoutExt};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse std::fmt::Debug;\r\nuse std::ops::{Deref, DerefMut};\r\n\r\n/// A trait for creating a [Widget] from simple functions.\r\n///\r\n/// Simplifies the creation of your own widgets.\r\npub trait Component {\r\n    /// Builds the inner widget.\r\n    fn build(\u0026self, context: AppContext) -\u003e impl Widget + 'static;\r\n\r\n    /// The id of this widget/component.\r\n    fn widget_id(\u0026self) -\u003e WidgetId;\r\n\r\n    /// Composes this component into a [Widget] using [ComposedWidget].\r\n    #[inline(always)]\r\n    fn compose(self) -\u003e Composed\u003cSelf\u003e\r\n    where\r\n        Self: Sized,\r\n    {\r\n        Composed {\r\n            component: self,\r\n            widget: None,\r\n        }\r\n    }\r\n}\r\n\r\n/// A [Widget] created from a [Component].\r\npub struct Composed\u003cC: Component\u003e {\r\n    component: C,\r\n    widget: Option\u003cBoxedWidget\u003e,\r\n}\r\n\r\nimpl\u003cC: Component\u003e Composed\u003cC\u003e {\r\n    /// Creates a new [Composed] widget from a [Component].\r\n    #[inline(always)]\r\n    pub fn new(component: C) -\u003e Self {\r\n        Self {\r\n            component,\r\n            widget: None,\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cC: Component\u003e Widget for Composed\u003cC\u003e {\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        context: AppContext,\r\n    ) {\r\n        if let Some(widget) = \u0026mut self.widget {\r\n            widget.render(scene, theme, layout_node, info, context)\r\n        } else {\r\n            self.widget = Some(Box::new(self.component.build(context.clone())));\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        if let Some(widget) = \u0026self.widget {\r\n            widget.layout_style()\r\n        } else {\r\n            StyleNode {\r\n                style: LayoutStyle::default(),\r\n                children: Vec::new(),\r\n            }\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, context: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        if let Some(widget) = \u0026mut self.widget {\r\n            widget.update(layout, context, info)\r\n        } else {\r\n            self.widget = Some(Box::new(self.component.build(context.clone())));\r\n            Update::FORCE\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        self.component.widget_id()\r\n    }\r\n}\r\n\r\nimpl\u003cC: Component + WidgetChildrenExt\u003e WidgetChildrenExt for Composed\u003cC\u003e {\r\n    #[inline(always)]\r\n    fn set_children(\u0026mut self, children: Vec\u003cBoxedWidget\u003e) {\r\n        self.component.set_children(children)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn with_children(self, children: Vec\u003cBoxedWidget\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self.component.with_children(children).compose()\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn add_child(\u0026mut self, child: impl Widget + 'static) {\r\n        self.component.add_child(child)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn with_child(self, child: impl Widget + 'static) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self.component.with_child(child).compose()\r\n    }\r\n}\r\n\r\nimpl\u003cC: Component + WidgetChildExt\u003e WidgetChildExt for Composed\u003cC\u003e {\r\n    #[inline(always)]\r\n    fn set_child(\u0026mut self, child: impl Widget + 'static) {\r\n        self.component.set_child(child)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn with_child(self, child: impl Widget + 'static) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self.component.with_child(child).compose()\r\n    }\r\n}\r\n\r\nimpl\u003cC: Component + WidgetLayoutExt\u003e WidgetLayoutExt for Composed\u003cC\u003e {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.component.set_layout_style(layout_style)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn with_layout_style(self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self.component.with_layout_style(layout_style).compose()\r\n    }\r\n}\r\n\r\nimpl\u003cC: Component + Clone\u003e Clone for Composed\u003cC\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            component: self.component.clone(),\r\n            widget: None,\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cC: Component + Debug\u003e Debug for Composed\u003cC\u003e {\r\n    #[inline(always)]\r\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\r\n        f.debug_struct(\"ComposedWidget\")\r\n            .field(\"component\", \u0026self.component)\r\n            .field(\"widget\", \u0026self.widget.as_ref().map(|_| \"?\".to_string()))\r\n            .finish()\r\n    }\r\n}\r\n\r\nimpl\u003cC: Component\u003e Deref for Composed\u003cC\u003e {\r\n    type Target = C;\r\n\r\n    #[inline(always)]\r\n    fn deref(\u0026self) -\u003e \u0026Self::Target {\r\n        \u0026self.component\r\n    }\r\n}\r\n\r\nimpl\u003cC: Component\u003e DerefMut for Composed\u003cC\u003e {\r\n    #[inline(always)]\r\n    fn deref_mut(\u0026mut self) -\u003e \u0026mut Self::Target {\r\n        \u0026mut self.component\r\n    }\r\n}\r\n","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":44},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","config.rs"],"content":"use nalgebra::{Point2, Vector2};\r\npub use winit::window::{\r\n    BadIcon, Cursor, CursorIcon, CustomCursor, Icon as WindowIcon, WindowButtons, WindowLevel,\r\n};\r\n\r\nuse crate::vgi::VectorGraphicsInterface;\r\nuse maycoon_theme::theme::Theme;\r\n\r\n/// Maycoon Application Configuration Structure.\r\n#[derive(Clone, Debug)]\r\npub struct MayConfig\u003cT: Theme, V: VectorGraphicsInterface\u003e {\r\n    /// Window Configuration\r\n    pub window: WindowConfig,\r\n    /// Theme of the Application.\r\n    pub theme: T,\r\n    /// The configuration of the vector graphics interface.\r\n    pub graphics: V::Config,\r\n}\r\n\r\nimpl\u003cT: Default + Theme, V: VectorGraphicsInterface\u003e Default for MayConfig\u003cT, V\u003e {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self {\r\n            window: WindowConfig::default(),\r\n            theme: T::default(),\r\n            graphics: V::Config::default(),\r\n        }\r\n    }\r\n}\r\n\r\n/// Window configuration.\r\n#[derive(Clone, Debug)]\r\npub struct WindowConfig {\r\n    /// The title of the window.\r\n    pub title: String,\r\n    /// The inner size of the window.\r\n    pub size: Vector2\u003cf64\u003e,\r\n    /// The minimum size of the window.\r\n    pub min_size: Option\u003cVector2\u003cf64\u003e\u003e,\r\n    /// The maximum size of the window.\r\n    pub max_size: Option\u003cVector2\u003cf64\u003e\u003e,\r\n    /// If the window should be resizeable.\r\n    pub resizable: bool,\r\n    /// If the window should be maximized on startup.\r\n    pub maximized: bool,\r\n    /// The window mode.\r\n    pub mode: WindowMode,\r\n    /// The window level.\r\n    pub level: WindowLevel,\r\n    /// If the window should be visible on startup.\r\n    pub visible: bool,\r\n    /// If the window background should be blurred.\r\n    pub blur: bool,\r\n    /// If the window background should be transparent. May not be compatible on all system.\r\n    pub transparent: bool,\r\n    /// The desired initial position for the window.\r\n    pub position: Option\u003cPoint2\u003cf64\u003e\u003e,\r\n    /// If the window should be active/focused on startup.\r\n    pub active: bool,\r\n    /// The enabled window buttons.\r\n    pub buttons: WindowButtons,\r\n    /// If the window should be decorated (have borders).\r\n    pub decorations: bool,\r\n    /// The resize increments of the window. Not supported everywhere.\r\n    pub resize_increments: Option\u003cVector2\u003cf64\u003e\u003e,\r\n    /// Prevents window capturing by some apps (not all though).\r\n    pub content_protected: bool,\r\n    /// The window icon.\r\n    pub icon: Option\u003cWindowIcon\u003e,\r\n    /// The window cursor.\r\n    pub cursor: Cursor,\r\n    /// If the window should exit/close on close request (pressing the close window button).\r\n    pub close_on_request: bool,\r\n}\r\n\r\nimpl Default for WindowConfig {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self {\r\n            title: \"New App\".to_string(),\r\n            size: Vector2::new(800.0, 600.0),\r\n            min_size: None,\r\n            max_size: None,\r\n            resizable: true,\r\n            maximized: false,\r\n            mode: WindowMode::default(),\r\n            level: Default::default(),\r\n            visible: true,\r\n            blur: false,\r\n            transparent: false,\r\n            position: None,\r\n            active: true,\r\n            buttons: WindowButtons::all(),\r\n            decorations: true,\r\n            resize_increments: None,\r\n            content_protected: false,\r\n            icon: None,\r\n            cursor: Cursor::default(),\r\n            close_on_request: true,\r\n        }\r\n    }\r\n}\r\n\r\n/// The window mode.\r\n#[derive(Clone, Debug, Default)]\r\npub enum WindowMode {\r\n    /// The default windowed mode.\r\n    #[default]\r\n    Windowed,\r\n    /// Size the window to fill the screen and remove borders. This is more modern, than default Fullscreen.\r\n    Borderless,\r\n    /// Legacy Fullscreen mode.\r\n    Fullscreen,\r\n}\r\n","traces":[{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":11},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","layout.rs"],"content":"use nalgebra::Vector2;\r\npub use taffy::{\r\n    AlignContent, AlignItems, AlignSelf, Dimension, Display, FlexDirection, FlexWrap, GridAutoFlow,\r\n    GridPlacement, JustifyContent, JustifyItems, JustifySelf, Layout, LengthPercentage,\r\n    LengthPercentageAuto, Line, NodeId, Overflow, Position, Rect, TaffyError, TaffyResult,\r\n    TaffyTree,\r\n};\r\n\r\n/// The tiniest difference two floats should have, in a layout context, to be considered \"unequal\".\r\n///\r\n/// This value is equal to half a pixel.\r\n///\r\n/// When comparing two floats in a layout context,\r\n/// we can check if the difference is higher than this threshold,\r\n/// in order to determine if redrawing is necessary.\r\n///\r\n/// See [equal] for more.\r\npub const LAYOUT_EPSILON: f32 = 0.5;\r\n\r\n/// Checks if two floats are equal, within the [LAYOUT_EPSILON] threshold.\r\n///\r\n/// This is useful for comparing float values in a layout context,\r\n/// as floating point precision can cause small differences that are not significant\r\n/// and therefore need no redraw.\r\n///\r\n/// Example:\r\n/// ```\r\n/// # use maycoon_core::layout;\r\n///\r\n/// // Significant change. Should redraw.\r\n/// assert!(!layout::equal(10.0, 20.0));\r\n///\r\n/// // Insignificant change. Should not redraw.\r\n/// assert!(layout::equal(10.0, 10.005));\r\n/// ```\r\n#[inline(always)]\r\npub const fn equal(x: f32, y: f32) -\u003e bool {\r\n    (x - y).abs() \u003c LAYOUT_EPSILON\r\n}\r\n\r\n/// Checks if the given point intersects the given layout.\r\n///\r\n/// This can be used to check if the cursor is hovering on a widget.\r\n///\r\n/// Example:\r\n/// ```\r\n/// # use taffy::Layout;\r\n/// # use maycoon_core::app::info::AppInfo;\r\n/// # use maycoon_core::layout;\r\n/// # let info = AppInfo::default();\r\n/// # let layout = Layout::default();\r\n///\r\n/// if let Some(cursor) = info.cursor_pos \u0026\u0026 layout::intersects(cursor, \u0026layout) {\r\n///     println!(\"Hovering on widget!\");\r\n/// }\r\n/// ```\r\n#[inline(always)]\r\npub fn intersects(point: Vector2\u003cf32\u003e, layout: \u0026Layout) -\u003e bool {\r\n    point.x \u003e= layout.location.x\r\n        \u0026\u0026 point.x \u003c= layout.location.x + layout.size.width\r\n        \u0026\u0026 point.y \u003e= layout.location.y\r\n        \u0026\u0026 point.y \u003c= layout.location.y + layout.size.height\r\n}\r\n\r\n/// Defines different aspects and properties of a widget layout.\r\n#[derive(Clone, PartialEq, Debug)]\r\npub struct LayoutStyle {\r\n    /// What layout strategy should be used?\r\n    pub display: Display,\r\n\r\n    /// How children overflowing their container should affect layout.\r\n    pub overflow: (Overflow, Overflow),\r\n\r\n    /// How much space (in points) should be reserved for scrollbars.\r\n    pub scrollbar_width: f32,\r\n\r\n    /// What should the position value of this struct use as a base offset?\r\n    pub position: Position,\r\n\r\n    /// How should the position of this element be tweaked relative to the layout defined?\r\n    pub inset: Rect\u003cLengthPercentageAuto\u003e,\r\n\r\n    /// Sets the initial size of the item.\r\n    pub size: Vector2\u003cDimension\u003e,\r\n\r\n    /// Controls the minimum size of the item.\r\n    pub min_size: Vector2\u003cDimension\u003e,\r\n\r\n    /// Controls the maximum size of the item.\r\n    pub max_size: Vector2\u003cDimension\u003e,\r\n\r\n    /// Sets the preferred aspect ratio for the item\r\n    ///\r\n    /// The ratio is calculated as width divided by height.\r\n    pub aspect_ratio: Option\u003cf32\u003e,\r\n\r\n    /// How large should the margin be on each side?\r\n    pub margin: Rect\u003cLengthPercentageAuto\u003e,\r\n\r\n    /// How large should the padding be on each side?\r\n    pub padding: Rect\u003cLengthPercentage\u003e,\r\n\r\n    /// How large should the border be on each side?\r\n    pub border: Rect\u003cLengthPercentage\u003e,\r\n\r\n    /// How this node's children aligned in the cross/block axis?\r\n    pub align_items: Option\u003cAlignItems\u003e,\r\n\r\n    /// How this node should be aligned in the cross/block axis\r\n    /// Falls back to the parents [AlignItems] if not set.\r\n    pub align_self: Option\u003cAlignSelf\u003e,\r\n\r\n    /// How this node's children should be aligned in the inline axis.\r\n    pub justify_items: Option\u003cAlignItems\u003e,\r\n\r\n    /// How this node should be aligned in the inline axis\r\n    /// Falls back to the parents [JustifyItems] if not set.\r\n    pub justify_self: Option\u003cAlignSelf\u003e,\r\n\r\n    /// How should content contained within this item be aligned in the cross/block axis?\r\n    pub align_content: Option\u003cAlignContent\u003e,\r\n\r\n    /// How should content contained within this item be aligned in the main/inline axis?\r\n    pub justify_content: Option\u003cJustifyContent\u003e,\r\n\r\n    /// How large should the gaps between items in a grid or flex container be?\r\n    pub gap: Vector2\u003cLengthPercentage\u003e,\r\n\r\n    /// Which direction does the main axis flow in?\r\n    pub flex_direction: FlexDirection,\r\n\r\n    /// Should elements wrap, or stay in a single line?\r\n    pub flex_wrap: FlexWrap,\r\n\r\n    /// Sets the initial main axis size of the item.\r\n    pub flex_basis: Dimension,\r\n\r\n    /// The relative rate at which this item grows when it is expanding to fill space.\r\n    ///\r\n    /// 0.0 is the default value, and this value must be positive.\r\n    pub flex_grow: f32,\r\n\r\n    /// The relative rate at which this item shrinks when it is contracting to fit into space.\r\n    ///\r\n    /// 1.0 is the default value, and this value must be positive.\r\n    pub flex_shrink: f32,\r\n\r\n    /// Controls how items get placed into the grid for auto-placed items.\r\n    pub grid_auto_flow: GridAutoFlow,\r\n\r\n    /// Defines which row in the grid the item should start and end at.\r\n    pub grid_row: Line\u003cGridPlacement\u003e,\r\n\r\n    /// Defines which column in the grid the item should start and end at.\r\n    pub grid_column: Line\u003cGridPlacement\u003e,\r\n}\r\n\r\nimpl Default for LayoutStyle {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        LayoutStyle {\r\n            display: Display::Flex,\r\n            overflow: (Overflow::Visible, Overflow::Visible),\r\n            scrollbar_width: 0.0,\r\n            position: Position::Relative,\r\n            inset: Rect::auto(),\r\n            margin: Rect::zero(),\r\n            padding: Rect::zero(),\r\n            border: Rect::zero(),\r\n            size: Vector2::new(Dimension::auto(), Dimension::auto()),\r\n            min_size: Vector2::new(Dimension::auto(), Dimension::auto()),\r\n            max_size: Vector2::new(Dimension::auto(), Dimension::auto()),\r\n            aspect_ratio: None,\r\n            gap: Vector2::new(LengthPercentage::length(0.0), LengthPercentage::length(0.0)),\r\n            align_items: None,\r\n            align_self: None,\r\n            justify_items: None,\r\n            justify_self: None,\r\n            align_content: None,\r\n            justify_content: None,\r\n            flex_direction: FlexDirection::Row,\r\n            flex_wrap: FlexWrap::NoWrap,\r\n            flex_grow: 0.0,\r\n            flex_shrink: 1.0,\r\n            flex_basis: Dimension::auto(),\r\n            grid_auto_flow: GridAutoFlow::Row,\r\n            grid_row: Line {\r\n                start: GridPlacement::Auto,\r\n                end: GridPlacement::Auto,\r\n            },\r\n            grid_column: Line {\r\n                start: GridPlacement::Auto,\r\n                end: GridPlacement::Auto,\r\n            },\r\n        }\r\n    }\r\n}\r\n\r\nimpl From\u003cLayoutStyle\u003e for taffy::Style {\r\n    #[inline(always)]\r\n    fn from(value: LayoutStyle) -\u003e Self {\r\n        taffy::Style {\r\n            display: value.display,\r\n            overflow: taffy::Point {\r\n                x: value.overflow.0,\r\n                y: value.overflow.1,\r\n            },\r\n            scrollbar_width: value.scrollbar_width,\r\n            position: value.position,\r\n            inset: value.inset,\r\n            margin: value.margin,\r\n            padding: value.padding,\r\n            border: value.border,\r\n            size: taffy::Size {\r\n                width: value.size.x,\r\n                height: value.size.y,\r\n            },\r\n            min_size: taffy::Size {\r\n                width: value.min_size.x,\r\n                height: value.min_size.y,\r\n            },\r\n            max_size: taffy::Size {\r\n                width: value.max_size.x,\r\n                height: value.max_size.y,\r\n            },\r\n            aspect_ratio: value.aspect_ratio,\r\n            gap: taffy::Size {\r\n                width: value.gap.x,\r\n                height: value.gap.y,\r\n            },\r\n            align_items: value.align_items,\r\n            align_self: value.align_self,\r\n            justify_items: value.justify_items,\r\n            justify_self: value.justify_self,\r\n            align_content: value.align_content,\r\n            justify_content: value.justify_content,\r\n            flex_direction: value.flex_direction,\r\n            flex_wrap: value.flex_wrap,\r\n            flex_grow: value.flex_grow,\r\n            flex_shrink: value.flex_shrink,\r\n            flex_basis: value.flex_basis,\r\n            grid_auto_flow: value.grid_auto_flow,\r\n            grid_row: value.grid_row,\r\n            grid_column: value.grid_column,\r\n            ..Default::default()\r\n        }\r\n    }\r\n}\r\n\r\n/// The computed layout with children nodes.\r\n#[derive(Debug)]\r\npub struct LayoutNode {\r\n    /// The computed layout of this node.\r\n    pub layout: Layout,\r\n    /// The children of this node.\r\n    pub children: Vec\u003cLayoutNode\u003e,\r\n}\r\n\r\n/// The raw layout styles with children nodes.\r\npub struct StyleNode {\r\n    /// The layout style of this node.\r\n    pub style: LayoutStyle,\r\n    /// The children of this node.\r\n    pub children: Vec\u003cStyleNode\u003e,\r\n}\r\n\r\n#[cfg(all(test, feature = \"test\"))]\r\nmod tests {\r\n    use crate::layout::{equal, intersects};\r\n    use nalgebra::Vector2;\r\n    use taffy::{Layout, Point, Size};\r\n\r\n    /// Test the [equal] function.\r\n    #[test_case::test_case(1.0, 1.0, true; \"when equal and true\")]\r\n    #[test_case::test_case(12.0, 12.4, true; \"when positive and true\")]\r\n    #[test_case::test_case(123.0, 123.5, false; \"when positive and false\")]\r\n    #[test_case::test_case(-1234.0, -1234.4, true; \"when negative and true\")]\r\n    #[test_case::test_case(-10.0, -10.5, false; \"when negative and false\")]\r\n    #[test_case::test_case(-1.0, 0.3, false; \"when different and true\")]\r\n    #[test_case::test_case(-0.25, 0.25, false; \"when different and false\")]\r\n    fn test_equal(x: f32, y: f32, eq: bool) {\r\n        assert_eq!(equal(x, y), eq);\r\n    }\r\n\r\n    /// Test the [intersects] function.\r\n    #[test_case::test_case(100.0, 500.0, true; \"when point is on border\")]\r\n    #[test_case::test_case(150.0, 550.0, true; \"when point is inside\")]\r\n    #[test_case::test_case(700.0, 700.0, false; \"when point is outside\")]\r\n    fn test_intersects(x: f32, y: f32, eq: bool) {\r\n        let layout = Layout {\r\n            location: Point { x: 100.0, y: 500.0 },\r\n            size: Size {\r\n                width: 500.0,\r\n                height: 100.0,\r\n            },\r\n            ..Default::default()\r\n        };\r\n\r\n        assert_eq!(intersects(Vector2::new(x, y), \u0026layout), eq);\r\n    }\r\n}\r\n","traces":[{"line":37,"address":[],"length":0,"stats":{"Line":504403158265495552}},{"line":38,"address":[],"length":0,"stats":{"Line":504403158265495552}},{"line":58,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":59,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":60,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":61,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":62,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":191,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":212,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":214,"address":[],"length":0,"stats":{"Line":0}},{"line":218,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":226,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":235,"address":[],"length":0,"stats":{"Line":0}},{"line":236,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":239,"address":[],"length":0,"stats":{"Line":0}},{"line":240,"address":[],"length":0,"stats":{"Line":0}},{"line":241,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":243,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":504403158265495552}},{"line":282,"address":[],"length":0,"stats":{"Line":2017612633061982208}},{"line":289,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":291,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":292,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":299,"address":[],"length":0,"stats":{"Line":1297036692682702848}}],"covered":13,"coverable":54},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","lib.rs"],"content":"#![warn(missing_docs)]\r\n\r\n//! Core library for Maycoon =\u003e See `maycoon` crate.\r\n//!\r\n//! Contains core app logic and widget types.\r\n\r\n/// Contains useful types for interacting with winit.\r\npub mod window {\r\n    pub use winit::event::*;\r\n    pub use winit::event_loop::*;\r\n    pub use winit::keyboard::*;\r\n    pub use winit::window::*;\r\n}\r\n\r\n/// Contains app functionality.\r\npub mod app;\r\n\r\n/// Contains the [MayConfig](config::MayConfig) struct.\r\npub mod config;\r\n\r\n/// Contains useful types and functions for layout interaction.\r\npub mod layout;\r\n\r\n/// Contains the signal system for reactive programming.\r\npub mod signal;\r\n\r\n/// Contains the core widget functionalities.\r\npub mod widget;\r\n\r\n/// Contains structures to work with the component architecture.\r\npub mod component;\r\n\r\n/// Contains the task runner and utilities for running async.\r\npub mod tasks;\r\n\r\n/// Contains the [reference::Ref] for representing a reference to a value.\r\npub mod reference;\r\n\r\n/// Contains the plugin system.\r\npub mod plugin;\r\n\r\n/// Contains the universal vector graphics interface.\r\npub mod vgi;\r\n\r\n/// Contains conditional types to provide generic platform specific structures.\r\npub mod platform;\r\n\r\n/// The data of the default Noto Sans font.\r\npub const DEFAULT_FONT: \u0026[u8] = include_bytes!(\"NotoSans.ttf\");\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","platform.rs"],"content":"/// Contains [Instant](Instant) and [SystemTime](SystemTime) types for the web (using [web_time]).\r\n#[cfg(web)]\r\npub mod time {\r\n    pub use web_time::Instant;\r\n    pub use web_time::SystemTime;\r\n    pub use web_time::SystemTimeError;\r\n}\r\n\r\n/// Contains native [Instant] and [SystemTime] types.\r\n#[cfg(native)]\r\npub mod time {\r\n    pub use std::time::Instant;\r\n    pub use std::time::SystemTime;\r\n    pub use std::time::SystemTimeError;\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","plugin.rs"],"content":"use crate::app::info::AppInfo;\r\nuse crate::app::update::UpdateManager;\r\nuse crate::config::MayConfig;\r\nuse crate::vgi::VectorGraphicsInterface;\r\nuse maycoon_theme::theme::Theme;\r\nuse rpds::HashTrieMap;\r\nuse std::cell::RefCell;\r\nuse std::ops::DerefMut;\r\nuse std::rc::Rc;\r\nuse std::sync::Arc;\r\nuse taffy::{NodeId, TaffyTree};\r\nuse winit::event::WindowEvent;\r\nuse winit::event_loop::{ActiveEventLoop, EventLoop};\r\nuse winit::window::{Window, WindowAttributes};\r\n\r\n/// A plugin interface for maycoon applications.\r\n///\r\n/// Plugins are used to extend functionality and manipulate the inner state of applications.\r\n/// Beware that tampering with the application state may cause crashes or other issues if not done correctly.\r\n///\r\n/// All functions defined in this trait get called before the app handler logic and therefore can control the application flow.\r\npub trait Plugin\u003cT: Theme, V: VectorGraphicsInterface\u003e: 'static {\r\n    /// The plugin name.\r\n    ///\r\n    /// Should be unique among the ecosystem.\r\n    fn name(\u0026self) -\u003e \u0026'static str;\r\n\r\n    /// Called when the plugin is registered using [PluginManager::register].\r\n    fn on_register(\u0026mut self, _manager: \u0026mut PluginManager\u003cT, V\u003e) {}\r\n\r\n    /// Called when the plugin is unregistered using [PluginManager::unregister].\r\n    fn on_unregister(\u0026mut self, _manager: \u0026mut PluginManager\u003cT, V\u003e) {}\r\n\r\n    /// Called right before initializing the [AppHandler](crate::app::handler::AppHandler) and running the event loop.\r\n    #[inline(always)]\r\n    fn init(\r\n        \u0026mut self,\r\n        _event_loop: \u0026mut EventLoop\u003c()\u003e,\r\n        _update: \u0026UpdateManager,\r\n        _window: \u0026mut WindowAttributes,\r\n        _config: \u0026mut MayConfig\u003cT, V\u003e,\r\n    ) {\r\n    }\r\n\r\n    /// Called when the application is resumed after being suspended or when it's first started.\r\n    ///\r\n    /// Desktop applications typically don't get suspended and this function is only called once,\r\n    /// while mobile apps can be suspended and resumed.\r\n    #[inline(always)]\r\n    fn on_resume(\r\n        \u0026mut self,\r\n        _config: \u0026mut MayConfig\u003cT, V\u003e,\r\n        _scene: \u0026mut V::Scene,\r\n        _taffy: \u0026mut TaffyTree,\r\n        _window_node: NodeId,\r\n        _info: \u0026mut AppInfo,\r\n        _update: \u0026UpdateManager,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n    ) {\r\n    }\r\n\r\n    /// Called right before the application handler tries to update the application\r\n    /// and figure out what updates to apply.\r\n    #[inline(always)]\r\n    fn on_update(\r\n        \u0026mut self,\r\n        _config: \u0026mut MayConfig\u003cT, V\u003e,\r\n        _window: \u0026Arc\u003cWindow\u003e,\r\n        _scene: \u0026mut V::Scene,\r\n        _taffy: \u0026mut TaffyTree,\r\n        _window_node: NodeId,\r\n        _info: \u0026mut AppInfo,\r\n        _update: \u0026UpdateManager,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n    ) {\r\n    }\r\n\r\n    /// Called when a window event is received.\r\n    #[inline(always)]\r\n    fn on_window_event(\r\n        \u0026mut self,\r\n        _event: \u0026mut WindowEvent,\r\n        _config: \u0026mut MayConfig\u003cT, V\u003e,\r\n        _window: \u0026Arc\u003cWindow\u003e,\r\n        _scene: \u0026mut V::Scene,\r\n        _taffy: \u0026mut TaffyTree,\r\n        _window_node: NodeId,\r\n        _info: \u0026mut AppInfo,\r\n        _update: \u0026UpdateManager,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n    ) {\r\n    }\r\n\r\n    /// Called when the application is suspended.\r\n    #[cold]\r\n    fn on_suspended(\r\n        \u0026mut self,\r\n        _config: \u0026mut MayConfig\u003cT, V\u003e,\r\n        _scene: \u0026mut V::Scene,\r\n        _taffy: \u0026mut TaffyTree,\r\n        _window_node: NodeId,\r\n        _info: \u0026mut AppInfo,\r\n        _update: \u0026UpdateManager,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n    ) {\r\n    }\r\n}\r\n\r\n/// A plugin manager for maycoon applications.\r\npub struct PluginManager\u003cT: Theme, V: VectorGraphicsInterface\u003e {\r\n    plugins: HashTrieMap\u003c\u0026'static str, Rc\u003cRefCell\u003cdyn Plugin\u003cT, V\u003e\u003e\u003e\u003e,\r\n}\r\n\r\nimpl\u003cT: Theme, V: VectorGraphicsInterface\u003e PluginManager\u003cT, V\u003e {\r\n    /// Creates a new empty plugin manager.\r\n    #[inline(always)]\r\n    pub fn new() -\u003e Self {\r\n        Self {\r\n            plugins: HashTrieMap::new(),\r\n        }\r\n    }\r\n\r\n    /// Registers a new plugin and returns itself.\r\n    #[inline(always)]\r\n    pub fn register(mut self, mut plugin: impl Plugin\u003cT, V\u003e) -\u003e Self {\r\n        plugin.on_register(\u0026mut self);\r\n\r\n        Self {\r\n            plugins: self\r\n                .plugins\r\n                .insert(plugin.name(), Rc::new(RefCell::new(plugin))),\r\n        }\r\n    }\r\n\r\n    /// Unregisters a plugin and returns itself.\r\n    #[cold]\r\n    pub fn unregister(mut self, name: \u0026'static str) -\u003e Self {\r\n        let plugins = self.plugins.clone();\r\n\r\n        plugins\r\n            .get(name)\r\n            .expect(\"Plugin not found\")\r\n            .borrow_mut()\r\n            .on_unregister(\u0026mut self);\r\n\r\n        Self {\r\n            plugins: self.plugins.remove(name),\r\n        }\r\n    }\r\n\r\n    /// Unregisters all plugins.\r\n    #[cold]\r\n    pub fn clear(\u0026mut self) {\r\n        let plugins = self.plugins.clone();\r\n\r\n        for (_, pl) in plugins.iter() {\r\n            pl.borrow_mut().on_unregister(self);\r\n        }\r\n\r\n        self.plugins = HashTrieMap::new();\r\n    }\r\n\r\n    /// Runs a closure on all plugins.\r\n    #[inline(always)]\r\n    pub fn run\u003cF\u003e(\u0026mut self, mut op: F)\r\n    where\r\n        F: FnMut(\u0026mut dyn Plugin\u003cT, V\u003e),\r\n    {\r\n        for (_, plugin) in self.plugins.iter() {\r\n            let mut plugin = plugin.borrow_mut();\r\n\r\n            op(plugin.deref_mut());\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT: Theme, V: VectorGraphicsInterface\u003e Default for PluginManager\u003cT, V\u003e {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self::new()\r\n    }\r\n}\r\n\r\n#[cfg(all(test, feature = \"test\"))]\r\nmod tests {\r\n    use crate::plugin::{Plugin, PluginManager};\r\n    use crate::vgi::dummy::DummyGraphics;\r\n    use maycoon_theme::theme::dummy::DummyTheme;\r\n    use std::sync::atomic::{AtomicU32, Ordering};\r\n\r\n    static A: AtomicU32 = AtomicU32::new(0);\r\n    static B: AtomicU32 = AtomicU32::new(0);\r\n    static C: AtomicU32 = AtomicU32::new(0);\r\n\r\n    /// Tests if plugin manager operates correctly on multiple plugins.\r\n    #[test]\r\n    fn test_plugin_manager() {\r\n        let mut plugins = PluginManager::\u003cDummyTheme, DummyGraphics\u003e::new()\r\n            .register(TestPluginA)\r\n            .register(TestPluginB)\r\n            .register(TestPluginC);\r\n\r\n        let mut run_a = 0;\r\n        let mut run_b = 0;\r\n        let mut run_c = 0;\r\n\r\n        plugins.run(|pl| match pl.name() {\r\n            \"Test Plugin A\" =\u003e run_a += 1,\r\n            \"Test Plugin B\" =\u003e run_b += 1,\r\n            \"Test Plugin C\" =\u003e run_c += 1,\r\n            _ =\u003e panic!(),\r\n        });\r\n\r\n        assert_eq!(run_a, 1);\r\n        assert_eq!(run_b, 1);\r\n        assert_eq!(run_c, 1);\r\n\r\n        plugins\r\n            .unregister(\u003cTestPluginA as Plugin\u003cDummyTheme, DummyGraphics\u003e\u003e::name(\r\n                \u0026TestPluginA,\r\n            ))\r\n            .unregister(\u003cTestPluginB as Plugin\u003cDummyTheme, DummyGraphics\u003e\u003e::name(\r\n                \u0026TestPluginB,\r\n            ))\r\n            .unregister(\u003cTestPluginC as Plugin\u003cDummyTheme, DummyGraphics\u003e\u003e::name(\r\n                \u0026TestPluginC,\r\n            ));\r\n\r\n        assert_eq!(A.load(Ordering::Relaxed), 11);\r\n        assert_eq!(B.load(Ordering::Relaxed), 11);\r\n        assert_eq!(C.load(Ordering::Relaxed), 11);\r\n    }\r\n\r\n    struct TestPluginA;\r\n\r\n    impl Plugin\u003cDummyTheme, DummyGraphics\u003e for TestPluginA {\r\n        fn name(\u0026self) -\u003e \u0026'static str {\r\n            \"Test Plugin A\"\r\n        }\r\n\r\n        fn on_register(\u0026mut self, _manager: \u0026mut PluginManager\u003cDummyTheme, DummyGraphics\u003e) {\r\n            A.fetch_add(1, Ordering::Relaxed);\r\n        }\r\n\r\n        fn on_unregister(\u0026mut self, _manager: \u0026mut PluginManager\u003cDummyTheme, DummyGraphics\u003e) {\r\n            A.fetch_add(10, Ordering::Relaxed);\r\n        }\r\n    }\r\n\r\n    struct TestPluginB;\r\n\r\n    impl Plugin\u003cDummyTheme, DummyGraphics\u003e for TestPluginB {\r\n        fn name(\u0026self) -\u003e \u0026'static str {\r\n            \"Test Plugin B\"\r\n        }\r\n\r\n        fn on_register(\u0026mut self, _manager: \u0026mut PluginManager\u003cDummyTheme, DummyGraphics\u003e) {\r\n            B.fetch_add(1, Ordering::Relaxed);\r\n        }\r\n\r\n        fn on_unregister(\u0026mut self, _manager: \u0026mut PluginManager\u003cDummyTheme, DummyGraphics\u003e) {\r\n            B.fetch_add(10, Ordering::Relaxed);\r\n        }\r\n    }\r\n\r\n    struct TestPluginC;\r\n\r\n    impl Plugin\u003cDummyTheme, DummyGraphics\u003e for TestPluginC {\r\n        fn name(\u0026self) -\u003e \u0026'static str {\r\n            \"Test Plugin C\"\r\n        }\r\n\r\n        fn on_register(\u0026mut self, _manager: \u0026mut PluginManager\u003cDummyTheme, DummyGraphics\u003e) {\r\n            C.fetch_add(1, Ordering::Relaxed);\r\n        }\r\n\r\n        fn on_unregister(\u0026mut self, _manager: \u0026mut PluginManager\u003cDummyTheme, DummyGraphics\u003e) {\r\n            C.fetch_add(10, Ordering::Relaxed);\r\n        }\r\n    }\r\n}\r\n","traces":[{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":119,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":125,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":126,"address":[],"length":0,"stats":{"Line":648518346341351424}},{"line":129,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":137,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":138,"address":[],"length":0,"stats":{"Line":648518346341351424}},{"line":140,"address":[],"length":0,"stats":{"Line":648518346341351424}},{"line":141,"address":[],"length":0,"stats":{"Line":864691128455135232}},{"line":144,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":147,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":169,"address":[],"length":0,"stats":{"Line":576460752303423488}},{"line":170,"address":[],"length":0,"stats":{"Line":648518346341351424}},{"line":172,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":238,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":241,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":242,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":245,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":246,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":253,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":254,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":257,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":258,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":261,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":262,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":269,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":270,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":273,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":274,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":277,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":278,"address":[],"length":0,"stats":{"Line":216172782113783808}}],"covered":33,"coverable":47},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","reference.rs"],"content":"use std::ops::Deref;\r\nuse std::sync::RwLockReadGuard;\r\n\r\n/// Represents a reference to a value of type `T`.\r\n///\r\n/// Due to Rust's temporal borrowing rules,\r\n/// returning a reference to a value may not be always possible,\r\n/// so this enum is used to represent one by having multiple variants for multiple types of references.\r\npub enum Ref\u003c'a, T\u003e {\r\n    /// An owned value. Useful for [Copy] types.\r\n    Owned(T),\r\n    /// A borrowed reference.\r\n    Borrow(\u0026'a T),\r\n    /// A reference of a [std::cell::Ref].\r\n    Ref(std::cell::Ref\u003c'a, T\u003e),\r\n    /// A [RwLockReadGuard] reference.\r\n    ReadGuard(RwLockReadGuard\u003c'a, T\u003e),\r\n}\r\n\r\nimpl\u003c'a, T\u003e Deref for Ref\u003c'a, T\u003e {\r\n    type Target = T;\r\n\r\n    #[inline(always)]\r\n    fn deref(\u0026self) -\u003e \u0026Self::Target {\r\n        match self {\r\n            Ref::Owned(value) =\u003e value,\r\n            Ref::Borrow(value) =\u003e value,\r\n            Ref::Ref(value) =\u003e value,\r\n            Ref::ReadGuard(value) =\u003e value,\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003c'a, T\u003e From\u003cT\u003e for Ref\u003c'a, T\u003e {\r\n    #[inline(always)]\r\n    fn from(value: T) -\u003e Self {\r\n        Ref::Owned(value)\r\n    }\r\n}\r\n\r\nimpl\u003c'a, T\u003e From\u003c\u0026'a T\u003e for Ref\u003c'a, T\u003e {\r\n    #[inline(always)]\r\n    fn from(value: \u0026'a T) -\u003e Self {\r\n        Ref::Borrow(value)\r\n    }\r\n}\r\n\r\nimpl\u003c'a, T\u003e From\u003cstd::cell::Ref\u003c'a, T\u003e\u003e for Ref\u003c'a, T\u003e {\r\n    #[inline(always)]\r\n    fn from(value: std::cell::Ref\u003c'a, T\u003e) -\u003e Self {\r\n        Ref::Ref(value)\r\n    }\r\n}\r\n\r\nimpl\u003c'a, T\u003e From\u003cRwLockReadGuard\u003c'a, T\u003e\u003e for Ref\u003c'a, T\u003e {\r\n    #[inline(always)]\r\n    fn from(value: RwLockReadGuard\u003c'a, T\u003e) -\u003e Self {\r\n        Ref::ReadGuard(value)\r\n    }\r\n}\r\n\r\n#[cfg(all(test, feature = \"test\"))]\r\nmod tests {\r\n    use crate::reference::Ref;\r\n    use std::cell::RefCell;\r\n    use std::fmt::Debug;\r\n    use std::sync::RwLock;\r\n\r\n    #[test_case::test_case(1; \"with int\")]\r\n    #[test_case::test_case(\"Test\".to_string(); \"with string\")]\r\n    #[test_case::test_case(vec![1, 2, 3]; \"with vector\")]\r\n    fn test_ref\u003cT: Clone + PartialEq + Debug\u003e(value: T) {\r\n        let r_bor = Ref::Borrow(\u0026value);\r\n        assert_eq!(*r_bor, value);\r\n\r\n        let r_own = Ref::Owned(value.clone());\r\n        assert_eq!(*r_own, value);\r\n\r\n        let refcell = RefCell::new(value.clone());\r\n        let r_ref = Ref::Ref(refcell.borrow());\r\n        assert_eq!(*r_ref, value);\r\n\r\n        let rwlock = RwLock::new(value.clone());\r\n        let r_rw = Ref::ReadGuard(rwlock.read().unwrap());\r\n        assert_eq!(*r_rw, value);\r\n    }\r\n\r\n    /// Tests if the size of [Ref] is correct.\r\n    ///\r\n    /// Useful for not accidentally increasing the stack size of [Ref].\r\n    #[test]\r\n    fn test_ref_size() {\r\n        const SIZE: usize = 24;\r\n\r\n        assert_eq!(size_of::\u003cRef\u003c'_, u8\u003e\u003e(), SIZE);\r\n    }\r\n}\r\n","traces":[{"line":24,"address":[],"length":0,"stats":{"Line":936748722493063168}},{"line":25,"address":[],"length":0,"stats":{"Line":936748722493063168}},{"line":26,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":27,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":28,"address":[],"length":0,"stats":{"Line":864691128455135232}},{"line":29,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":73,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":74,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":76,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":77,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":79,"address":[],"length":0,"stats":{"Line":864691128455135232}},{"line":80,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":81,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":83,"address":[],"length":0,"stats":{"Line":864691128455135232}},{"line":84,"address":[],"length":0,"stats":{"Line":648518346341351424}},{"line":85,"address":[],"length":0,"stats":{"Line":432345564227567616}}],"covered":17,"coverable":25},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","signal","eval.rs"],"content":"use crate::reference::Ref;\r\nuse crate::signal::Signal;\r\nuse std::rc::Rc;\r\n\r\n/// A signal that evaluates a function to get the value.\r\n///\r\n/// The evaluation function will be called every time the value is requested via [Signal::get],\r\n/// so it's recommended to avoid expensive operations.\r\npub struct EvalSignal\u003cT: 'static\u003e {\r\n    eval: Rc\u003cdyn Fn() -\u003e T\u003e,\r\n}\r\n\r\nimpl\u003cT: 'static\u003e EvalSignal\u003cT\u003e {\r\n    /// Create a new eval signal using the given evaluation function.\r\n    #[inline(always)]\r\n    pub fn new(eval: impl Fn() -\u003e T + 'static) -\u003e Self {\r\n        Self {\r\n            eval: Rc::new(eval),\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Signal\u003cT\u003e for EvalSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn get(\u0026self) -\u003e Ref\u003c'_, T\u003e {\r\n        Ref::Owned((self.eval)())\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn set_value(\u0026self, _: T) {}\r\n\r\n    #[inline(always)]\r\n    fn listen(self, _: Box\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn notify(\u0026self) {}\r\n\r\n    #[inline(always)]\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn Signal\u003cT\u003e\u003e {\r\n        Box::new(self.clone())\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Clone for EvalSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            eval: self.eval.clone(),\r\n        }\r\n    }\r\n}\r\n\r\n#[cfg(all(test, feature = \"test\"))]\r\nmod tests {\r\n    use crate::signal::Signal;\r\n    use crate::signal::eval::EvalSignal;\r\n    use std::cell::RefCell;\r\n    use std::rc::Rc;\r\n\r\n    /// Tests the [EvalSignal] implementation of [Signal].\r\n    #[test]\r\n    fn test_eval_signal() {\r\n        let value = Rc::new(RefCell::new(0));\r\n\r\n        let value_clone = value.clone();\r\n        let signal = EvalSignal::new(move || {\r\n            *value_clone.borrow_mut() += 1;\r\n            *value_clone.borrow()\r\n        });\r\n\r\n        // signal = value = 1\r\n        assert_eq!(*signal.get(), 1);\r\n        assert_eq!(*value.borrow(), 1);\r\n\r\n        // signal = value = 2\r\n        assert_eq!(*signal.get(), 2);\r\n        assert_eq!(*value.borrow(), 2);\r\n\r\n        // signal = value = 3\r\n        assert_eq!(*signal.get(), 3);\r\n        assert_eq!(*value.borrow(), 3);\r\n    }\r\n}\r\n","traces":[{"line":16,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":18,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":25,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":26,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}}],"covered":4,"coverable":12},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","signal","fixed.rs"],"content":"use crate::signal::{Ref, Signal};\r\nuse std::rc::Rc;\r\n\r\n/// A signal with a fixed value. Based on [Rc].\r\n///\r\n/// The inner value cannot be mutated and listeners do not exist.\r\n///\r\n/// Useful for testing purposes, but also used in `MaybeSignal::into_signal` to convert a fixed value into a signal.\r\npub struct FixedSignal\u003cT: 'static\u003e {\r\n    value: Rc\u003cT\u003e,\r\n}\r\n\r\nimpl\u003cT: 'static\u003e FixedSignal\u003cT\u003e {\r\n    /// Creates a new fixed signal.\r\n    #[inline(always)]\r\n    pub fn new(value: T) -\u003e Self {\r\n        Self {\r\n            value: Rc::new(value),\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Signal\u003cT\u003e for FixedSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn get(\u0026self) -\u003e Ref\u003c'_, T\u003e {\r\n        Ref::Borrow(self.value.as_ref())\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn set_value(\u0026self, _: T) {}\r\n\r\n    #[inline(always)]\r\n    fn listen(self, _: Box\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn notify(\u0026self) {}\r\n\r\n    #[inline(always)]\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn Signal\u003cT\u003e\u003e {\r\n        Box::new(self.clone())\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e From\u003cRc\u003cT\u003e\u003e for FixedSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn from(value: Rc\u003cT\u003e) -\u003e Self {\r\n        Self { value }\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Clone for FixedSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            value: self.value.clone(),\r\n        }\r\n    }\r\n}\r\n","traces":[{"line":16,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":18,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":25,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":26,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":45,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":60,"address":[],"length":0,"stats":{"Line":216172782113783808}}],"covered":8,"coverable":13},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","signal","listener.rs"],"content":"use crate::reference::Ref;\r\nuse rpds::{Vector, VectorSync};\r\nuse std::rc::Rc;\r\nuse std::sync::Arc;\r\n\r\n/// A collection of listeners.\r\n///\r\n/// This is basically just a wrapper around `Vec\u003cListener\u003cT\u003e\u003e\u003e`.\r\npub struct ListenerRegister\u003cT\u003e {\r\n    listeners: Vector\u003cListener\u003cT\u003e\u003e,\r\n}\r\n\r\nimpl\u003cT\u003e ListenerRegister\u003cT\u003e {\r\n    /// Create a new empty listener register.\r\n    ///\r\n    /// By default, the listener register has a capacity of 1,\r\n    /// meaning that it can hold one listener without reallocating.\r\n    #[inline(always)]\r\n    pub fn new() -\u003e Self {\r\n        Self {\r\n            listeners: Vector::new(),\r\n        }\r\n    }\r\n\r\n    /// Register a new listener.\r\n    #[inline(always)]\r\n    pub fn register(self, listener: Listener\u003cT\u003e) -\u003e Self {\r\n        Self {\r\n            listeners: self.listeners.push_back(listener),\r\n        }\r\n    }\r\n\r\n    /// Notify all listeners with the values produced by `factory`.\r\n    #[inline(always)]\r\n    pub fn notify\u003c'a\u003e(\u0026self, factory: impl Fn() -\u003e Ref\u003c'a, T\u003e)\r\n    where\r\n        T: 'a,\r\n    {\r\n        for listener in \u0026self.listeners {\r\n            listener.call(factory());\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT\u003e Default for ListenerRegister\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self::new()\r\n    }\r\n}\r\n\r\nimpl\u003cT\u003e Clone for ListenerRegister\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            listeners: self.listeners.clone(),\r\n        }\r\n    }\r\n}\r\n\r\n/// A collection of listeners that can be sent to other threads.\r\n///\r\n/// This is basically just a wrapper around `Vec\u003cSendListener\u003cT\u003e\u003e\u003e`.\r\npub struct SendListenerRegistry\u003cT\u003e {\r\n    listeners: VectorSync\u003cSendListener\u003cT\u003e\u003e,\r\n}\r\n\r\nimpl\u003cT\u003e SendListenerRegistry\u003cT\u003e {\r\n    /// Create a new empty listener register.\r\n    ///\r\n    /// By default, the listener register has a capacity of 1,\r\n    /// meaning that it can hold one listener without reallocating.\r\n    #[inline(always)]\r\n    pub fn new() -\u003e Self {\r\n        Self {\r\n            listeners: VectorSync::new_sync(),\r\n        }\r\n    }\r\n\r\n    /// Register a new listener.\r\n    #[inline(always)]\r\n    pub fn register(self, listener: SendListener\u003cT\u003e) -\u003e Self {\r\n        Self {\r\n            listeners: self.listeners.push_back(listener),\r\n        }\r\n    }\r\n\r\n    /// Notify all listeners with the values produced by `factory`.\r\n    #[inline(always)]\r\n    pub fn notify\u003c'a\u003e(\u0026self, factory: impl Fn() -\u003e Ref\u003c'a, T\u003e)\r\n    where\r\n        T: 'a,\r\n    {\r\n        for listener in \u0026self.listeners {\r\n            listener.call(factory());\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT\u003e Default for SendListenerRegistry\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self::new()\r\n    }\r\n}\r\n\r\nimpl\u003cT\u003e Clone for SendListenerRegistry\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            listeners: self.listeners.clone(),\r\n        }\r\n    }\r\n}\r\n\r\n/// A listener that listens to a signal value.\r\n///\r\n/// This is basically just a wrapper around `Rc\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e\u003e`.\r\n///\r\n/// This type is not `Send` and therefore cannot be sent to other threads.\r\n///\r\n/// It trades less overhead for not being `Send`.\r\n///\r\n/// Use [SendListener] if you need a `Send`-safe listener.\r\npub struct Listener\u003cT\u003e {\r\n    function: Rc\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e,\r\n}\r\n\r\nimpl\u003cT\u003e Listener\u003cT\u003e {\r\n    /// Create a new listener.\r\n    #[inline(always)]\r\n    pub fn new(function: impl Fn(Ref\u003c'_, T\u003e) + 'static) -\u003e Self {\r\n        Self {\r\n            function: Rc::new(function),\r\n        }\r\n    }\r\n\r\n    /// Create a new listener from a raw reference counted function.\r\n    #[inline(always)]\r\n    pub fn from_rc(function: Rc\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e) -\u003e Self {\r\n        Self { function }\r\n    }\r\n\r\n    /// Call the listener with a value.\r\n    #[inline(always)]\r\n    pub fn call(\u0026self, value: Ref\u003c'_, T\u003e) {\r\n        (self.function)(value)\r\n    }\r\n}\r\n\r\nimpl\u003cT\u003e Default for Listener\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self {\r\n            function: Rc::new(|_| {}),\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT\u003e Clone for Listener\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            function: self.function.clone(),\r\n        }\r\n    }\r\n}\r\n\r\n/// A listener that listens to a signal value.\r\n///\r\n/// This is basically just a wrapper around `Arc\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e\u003e`.\r\n///\r\n/// This type is `Send` and therefore can be sent to other threads.\r\n///\r\n/// It trades more overhead for being `Send`.\r\n///\r\n/// Use [Listener] if you don't need a `Send`-safe listener.\r\npub struct SendListener\u003cT\u003e {\r\n    function: Arc\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e,\r\n}\r\n\r\nimpl\u003cT\u003e SendListener\u003cT\u003e {\r\n    /// Create a new listener.\r\n    #[inline(always)]\r\n    pub fn new(function: impl Fn(Ref\u003c'_, T\u003e) + 'static) -\u003e Self {\r\n        Self {\r\n            function: Arc::new(function),\r\n        }\r\n    }\r\n\r\n    /// Create a new listener from a raw atomically reference counted function.\r\n    #[inline(always)]\r\n    pub fn from_arc(function: Arc\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e) -\u003e Self {\r\n        Self { function }\r\n    }\r\n\r\n    /// Call the listener with a value.\r\n    #[inline(always)]\r\n    pub fn call(\u0026self, value: Ref\u003c'_, T\u003e) {\r\n        (self.function)(value)\r\n    }\r\n}\r\n\r\nimpl\u003cT\u003e Default for SendListener\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self {\r\n            function: Arc::new(|_| {}),\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT\u003e Clone for SendListener\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            function: self.function.clone(),\r\n        }\r\n    }\r\n}\r\n","traces":[{"line":19,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":21,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":27,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":29,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":35,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":39,"address":[],"length":0,"stats":{"Line":504403158265495552}},{"line":40,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":134,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":215,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}}],"covered":9,"coverable":40},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","signal","map.rs"],"content":"use crate::signal::{BoxedSignal, Ref, Signal};\r\nuse std::rc::Rc;\r\n\r\n/// A signal wrapping another signal and applying a mapping function, when the inner value is requested.\r\n/// The mapping function will be called every time the inner value is requested via [Signal::get].\r\n/// This signal cannot be directly mutated. Use [MapSignal::signal] to get the inner signal.\r\n///\r\n/// Calling [Signal::set], [Signal::set_value], [Signal::listen] has no effect.\r\npub struct MapSignal\u003cT: 'static, U: 'static\u003e {\r\n    signal: BoxedSignal\u003cT\u003e,\r\n    map: Rc\u003cdyn Fn(Ref\u003cT\u003e) -\u003e Ref\u003cU\u003e\u003e,\r\n}\r\n\r\nimpl\u003cT: 'static, U: 'static\u003e MapSignal\u003cT, U\u003e {\r\n    /// Create a new map signal using the given inner signal and mapping function.\r\n    #[inline(always)]\r\n    pub fn new(signal: BoxedSignal\u003cT\u003e, map: impl Fn(Ref\u003cT\u003e) -\u003e Ref\u003cU\u003e + 'static) -\u003e Self {\r\n        Self {\r\n            signal,\r\n            map: Rc::new(map),\r\n        }\r\n    }\r\n\r\n    /// Get the inner signal.\r\n    ///\r\n    /// Can be used to mutate the inner value.\r\n    #[inline(always)]\r\n    pub fn signal(\u0026self) -\u003e BoxedSignal\u003cT\u003e {\r\n        self.signal.dyn_clone()\r\n    }\r\n\r\n    /// Get the inner signal's value, without applying the mapping function.\r\n    #[inline(always)]\r\n    pub fn get_unmapped(\u0026self) -\u003e Ref\u003c'_, T\u003e {\r\n        self.signal.get()\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static, U: 'static\u003e Signal\u003cU\u003e for MapSignal\u003cT, U\u003e {\r\n    #[inline(always)]\r\n    fn get(\u0026self) -\u003e Ref\u003c'_, U\u003e {\r\n        (self.map)(self.get_unmapped())\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn set_value(\u0026self, _: U) {}\r\n\r\n    #[inline(always)]\r\n    fn listen(self, _: Box\u003cdyn Fn(Ref\u003c'_, U\u003e)\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn notify(\u0026self) {\r\n        self.signal.notify();\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn Signal\u003cU\u003e\u003e {\r\n        Box::new(self.clone())\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static, U: 'static\u003e Clone for MapSignal\u003cT, U\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            signal: self.signal.dyn_clone(),\r\n            map: self.map.clone(),\r\n        }\r\n    }\r\n}\r\n\r\n#[cfg(all(test, feature = \"test\"))]\r\nmod tests {\r\n    use crate::reference::Ref;\r\n    use crate::signal::Signal;\r\n    use crate::signal::fixed::FixedSignal;\r\n\r\n    /// Tests the [MapSignal] implementation of [Signal].\r\n    #[test]\r\n    fn test_map_signal() {\r\n        let signal = FixedSignal::new(0)\r\n            .map(|i| Ref::Owned(i.to_string()))\r\n            .map(|s| Ref::Owned(s.len()))\r\n            .map(|len| Ref::Owned(len.to_string()));\r\n\r\n        assert_eq!(*signal.get(), \"1\".to_string());\r\n    }\r\n}\r\n","traces":[{"line":17,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":20,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":35,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":41,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":42,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":63,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":69,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":71,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":72,"address":[],"length":0,"stats":{"Line":216172782113783808}}],"covered":11,"coverable":18},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","signal","memoized.rs"],"content":"use crate::reference::Ref;\r\nuse crate::signal::Signal;\r\nuse crate::signal::listener::{Listener, ListenerRegister};\r\nuse std::cell::OnceCell;\r\nuse std::rc::Rc;\r\n\r\n/// A signal for creating a value once, when requested.\r\n/// The value is immutable after creation.\r\n/// Calling [Signal::set], [Signal::set_value], [Signal::listen] or [Signal::notify] has no effect.\r\n///\r\n/// **NOTE:** The inner factory function will only be called **once**, when the value is requested via [Signal::get].\r\npub struct MemoizedSignal\u003cT: 'static\u003e {\r\n    inner: Rc\u003cOnceCell\u003cT\u003e\u003e,\r\n    factory: Rc\u003cdyn Fn() -\u003e T\u003e,\r\n    listeners: ListenerRegister\u003cT\u003e,\r\n}\r\n\r\nimpl\u003cT: 'static\u003e MemoizedSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    /// Create a new memoized signal using the given factory function.\r\n    pub fn new(factory: impl Fn() -\u003e T + 'static) -\u003e Self {\r\n        Self {\r\n            inner: Rc::new(OnceCell::new()),\r\n            factory: Rc::new(factory),\r\n            listeners: ListenerRegister::new(),\r\n        }\r\n    }\r\n\r\n    /// Returns if the value has been initialized or not.\r\n    #[inline(always)]\r\n    pub fn is_init(\u0026self) -\u003e bool {\r\n        self.inner.get().is_some()\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Signal\u003cT\u003e for MemoizedSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn get(\u0026self) -\u003e Ref\u003c'_, T\u003e {\r\n        if !self.is_init() {\r\n            self.inner.set((self.factory)()).ok().unwrap();\r\n\r\n            self.notify();\r\n        }\r\n\r\n        Ref::Borrow(self.inner.get().unwrap())\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn set_value(\u0026self, _: T) {}\r\n\r\n    #[inline(always)]\r\n    fn listen(self, listener: Box\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        Self {\r\n            inner: self.inner,\r\n            factory: self.factory,\r\n            listeners: self.listeners.register(Listener::new(listener)),\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn notify(\u0026self) {\r\n        self.listeners.notify(|| self.get());\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn Signal\u003cT\u003e\u003e {\r\n        Box::new(self.clone())\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Clone for MemoizedSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            inner: self.inner.clone(),\r\n            factory: self.factory.clone(),\r\n            listeners: self.listeners.clone(),\r\n        }\r\n    }\r\n}\r\n\r\n#[cfg(all(test, feature = \"test\"))]\r\nmod tests {\r\n    use crate::signal::Signal;\r\n    use crate::signal::memoized::MemoizedSignal;\r\n    use std::cell::RefCell;\r\n    use std::rc::Rc;\r\n\r\n    /// Tests the [MemoizedSignal] implementation of [Signal].\r\n    #[test]\r\n    fn test_memoized_signal() {\r\n        let sum = Rc::new(RefCell::new(0));\r\n        let diff = Rc::new(RefCell::new(0));\r\n\r\n        let sum_clone = sum.clone();\r\n        let diff_clone = diff.clone();\r\n        let signal = MemoizedSignal::new(|| 1)\r\n            .listen(Box::new(move |val| {\r\n                *sum_clone.borrow_mut() += *val;\r\n            }))\r\n            .listen(Box::new(move |val| {\r\n                *diff_clone.borrow_mut() -= *val;\r\n            }));\r\n\r\n        // sum = 0\r\n        assert_eq!(*sum.borrow(), 0);\r\n        // diff = 0\r\n        assert_eq!(*diff.borrow(), 0);\r\n\r\n        // signal = 1\r\n        assert_eq!(*signal.get(), 1);\r\n\r\n        // sum = sum + signal = 0 + 1 = 1\r\n        assert_eq!(*sum.borrow(), 1);\r\n        // diff = diff - signal = 0 - 1 = -1\r\n        assert_eq!(*diff.borrow(), -1);\r\n    }\r\n}\r\n","traces":[{"line":21,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":23,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":24,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":25,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":31,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":32,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":38,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":39,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":57,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":58,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":59,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}}],"covered":14,"coverable":24},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","signal","mod.rs"],"content":"use crate::app::context::AppContext;\r\nuse crate::reference::Ref;\r\nuse crate::signal::fixed::FixedSignal;\r\nuse crate::signal::listener::Listener;\r\nuse crate::signal::map::MapSignal;\r\nuse std::rc::Rc;\r\n\r\n/// Contains the [FixedSignal] signal.\r\npub mod fixed;\r\n\r\n/// Contains the [memoized::MemoizedSignal] signal.\r\npub mod memoized;\r\n\r\n/// Contains the [state::StateSignal] signal.\r\npub mod state;\r\n\r\n/// Contains the [MapSignal] signal.\r\npub mod map;\r\n\r\n/// Contains the [eval::EvalSignal] signal.\r\npub mod eval;\r\n\r\n/// Contains the [Listener] listener.\r\npub mod listener;\r\n\r\n/// A [Signal] in a [Box].\r\npub type BoxedSignal\u003cT\u003e = Box\u003cdyn Signal\u003cT\u003e\u003e;\r\n\r\n/// Base signal trait.\r\n///\r\n/// Signals store values of type `T` and notify listeners when they change.\r\n///\r\n/// **NOTE:** By default, signals don't have any listeners. To \"hook\" a signal into the application cycle, call [use_signal].\r\n///\r\n/// # Avoiding Borrowing Errors\r\n/// Be careful not to write something like `signal.set(*signal.get());`,\r\n/// as many signals that use [Rc] or [RefCell] might panic, due to the value already being borrowed\r\n/// (by the `signal.get();` call). Write `let value = *signal.get();` or `let value = signal.clone()`\r\n/// and then `signal.set(value);` instead.\r\n///\r\n/// [use_signal]: AppContext::use_signal\r\n/// [RefCell]: std::cell::RefCell\r\npub trait Signal\u003cT: 'static\u003e: 'static {\r\n    /// Get a reference to the current value of the signal.\r\n    fn get(\u0026self) -\u003e Ref\u003c'_, T\u003e;\r\n\r\n    /// Set the value of the signal.\r\n    ///\r\n    /// **NOTE:** This does not notify listeners, use [set] instead.\r\n    fn set_value(\u0026self, value: T);\r\n\r\n    /// Add a listener to the signal, which will be called when the inner value changes and returns the signal.\r\n    fn listen(self, listener: Box\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e) -\u003e Self\r\n    where\r\n        Self: Sized;\r\n\r\n    /// Notify listeners that the inner value has changed.\r\n    /// May also be called manually to update listeners.\r\n    fn notify(\u0026self);\r\n\r\n    /// Set the value of the signal and notify listeners.\r\n    #[inline(always)]\r\n    fn set(\u0026self, value: T) {\r\n        tracing::trace_span!(\"set signal\").in_scope(|| {\r\n            self.set_value(value);\r\n            self.notify();\r\n        });\r\n    }\r\n\r\n    /// Converts the signal into a [MaybeSignal].\r\n    #[inline(always)]\r\n    fn maybe(\u0026self) -\u003e MaybeSignal\u003cT\u003e\r\n    where\r\n        Self: Sized,\r\n    {\r\n        MaybeSignal::signal(self.dyn_clone())\r\n    }\r\n\r\n    /// Converts this signal into a [MapSignal] and applies the given mapping function.\r\n    #[inline(always)]\r\n    fn map\u003cU: 'static\u003e(\u0026self, map: impl Fn(Ref\u003cT\u003e) -\u003e Ref\u003cU\u003e + 'static) -\u003e MapSignal\u003cT, U\u003e\r\n    where\r\n        Self: Sized,\r\n    {\r\n        MapSignal::new(self.dyn_clone(), map)\r\n    }\r\n\r\n    /// Hooks the signal into the given [AppContext].\r\n    ///\r\n    /// Required for the signal to become reactive with the app lifecycle.\r\n    #[inline(always)]\r\n    fn hook(self, context: \u0026AppContext) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        context.use_signal(self)\r\n    }\r\n\r\n    /// Clones the signal into a `Box\u003cdyn Signal\u003cT\u003e\u003e`.\r\n    ///\r\n    /// This is an object-safe alternative to simply making the signal [Clone]-dependent.\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn Signal\u003cT\u003e\u003e;\r\n}\r\n\r\n/// A value which may be a signal or a fixed value.\r\npub enum MaybeSignal\u003cT: 'static\u003e {\r\n    /// A signal.\r\n    Signal(BoxedSignal\u003cT\u003e),\r\n    /// A fixed value wrapped inside a [Rc].\r\n    Value(Rc\u003cT\u003e),\r\n}\r\n\r\nimpl\u003cT: 'static\u003e MaybeSignal\u003cT\u003e {\r\n    /// Wrap a [Signal] inside a [MaybeSignal].\r\n    #[inline(always)]\r\n    pub const fn signal(signal: BoxedSignal\u003cT\u003e) -\u003e Self {\r\n        Self::Signal(signal)\r\n    }\r\n\r\n    /// Wrap a value inside a [MaybeSignal].\r\n    #[inline(always)]\r\n    pub fn value(value: T) -\u003e Self {\r\n        Self::Value(Rc::new(value))\r\n    }\r\n\r\n    /// Get a reference to the current value.\r\n    ///\r\n    /// If the value is a signal, the signal's current value is returned,\r\n    /// otherwise a [Ref::Rc] of the value is returned.\r\n    #[inline(always)]\r\n    pub fn get(\u0026self) -\u003e Ref\u003c'_, T\u003e {\r\n        match self {\r\n            MaybeSignal::Signal(signal) =\u003e signal.get(),\r\n            MaybeSignal::Value(value) =\u003e Ref::Borrow(value.as_ref()),\r\n        }\r\n    }\r\n\r\n    /// Converts the [MaybeSignal] into an [BoxedSignal] if it is a [MaybeSignal::Signal].\r\n    #[inline(always)]\r\n    pub fn as_signal(\u0026self) -\u003e Option\u003cBoxedSignal\u003cT\u003e\u003e {\r\n        match self {\r\n            MaybeSignal::Signal(signal) =\u003e Some(signal.dyn_clone()),\r\n            _ =\u003e None,\r\n        }\r\n    }\r\n\r\n    /// Converts the [MaybeSignal] into a [BoxedSignal].\r\n    ///\r\n    /// If the value is a [MaybeSignal::Value], a [FixedSignal] is created.\r\n    #[inline(always)]\r\n    pub fn into_signal(self) -\u003e BoxedSignal\u003cT\u003e {\r\n        match self {\r\n            MaybeSignal::Signal(signal) =\u003e signal,\r\n            MaybeSignal::Value(value) =\u003e Box::new(FixedSignal::from(value)),\r\n        }\r\n    }\r\n\r\n    /// Applies the given mapping function to the signal.\r\n    ///\r\n    /// Returns a [MaybeSignal] containing a [MapSignal] which maps the inner value of the signal.\r\n    #[inline(always)]\r\n    pub fn map\u003cU: 'static\u003e(self, map: impl Fn(Ref\u003cT\u003e) -\u003e Ref\u003cU\u003e + 'static) -\u003e MaybeSignal\u003cU\u003e {\r\n        let signal = self.into_signal();\r\n\r\n        MaybeSignal::signal(Box::new(MapSignal::new(signal, map)))\r\n    }\r\n}\r\n\r\nimpl\u003cT: Default + 'static\u003e Default for MaybeSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self::value(T::default())\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e From\u003cT\u003e for MaybeSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn from(value: T) -\u003e Self {\r\n        Self::value(value)\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e From\u003cBoxedSignal\u003cT\u003e\u003e for MaybeSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn from(signal: BoxedSignal\u003cT\u003e) -\u003e Self {\r\n        Self::signal(signal)\r\n    }\r\n}\r\n\r\nimpl\u003c'a, T: 'static\u003e From\u003c\u0026'a BoxedSignal\u003cT\u003e\u003e for MaybeSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn from(value: \u0026'a BoxedSignal\u003cT\u003e) -\u003e Self {\r\n        Self::signal(value.dyn_clone())\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static, U: 'static\u003e From\u003cMapSignal\u003cT, U\u003e\u003e for MaybeSignal\u003cU\u003e {\r\n    #[inline(always)]\r\n    fn from(value: MapSignal\u003cT, U\u003e) -\u003e Self {\r\n        Self::signal(Box::new(value))\r\n    }\r\n}\r\n","traces":[{"line":63,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":64,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":65,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":66,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":85,"address":[],"length":0,"stats":{"Line":648518346341351424}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}}],"covered":6,"coverable":39},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","signal","state.rs"],"content":"use crate::signal::listener::ListenerRegister;\r\nuse crate::signal::{Listener, Ref, Signal};\r\nuse std::cell::RefCell;\r\nuse std::rc::Rc;\r\n\r\n/// Simple signal implementation based on [Rc] and [RefCell] to get/set a value and notify listeners when it changes.\r\n///\r\n/// You can also mutate the inner value, but only in a set scope.\r\n///\r\n/// As this signal uses [RefCell], it's subject to possible runtime borrowing errors.\r\n/// See the section about these errors in [Signal] for more.\r\npub struct StateSignal\u003cT: 'static\u003e {\r\n    value: Rc\u003cRefCell\u003cT\u003e\u003e,\r\n    listeners: ListenerRegister\u003cT\u003e,\r\n}\r\n\r\nimpl\u003cT: 'static\u003e StateSignal\u003cT\u003e {\r\n    /// Creates a new signal with the given value.\r\n    #[inline(always)]\r\n    pub fn new(value: T) -\u003e Self {\r\n        Self {\r\n            value: Rc::new(RefCell::new(value)),\r\n            listeners: ListenerRegister::new(),\r\n        }\r\n    }\r\n\r\n    /// Mutate the inner value in a set scope.\r\n    ///\r\n    /// This scope is needed in order to notify the app for changes.\r\n    #[inline(always)]\r\n    #[tracing::instrument(skip_all)]\r\n    pub fn mutate(\u0026self, op: impl FnOnce(\u0026mut T)) {\r\n        op(\u0026mut self.value.borrow_mut());\r\n        self.notify();\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Signal\u003cT\u003e for StateSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn get(\u0026self) -\u003e Ref\u003c'_, T\u003e {\r\n        Ref::Ref(self.value.borrow())\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn set_value(\u0026self, value: T) {\r\n        *self.value.borrow_mut() = value;\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn listen(self, listener: Box\u003cdyn Fn(Ref\u003c'_, T\u003e)\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        Self {\r\n            listeners: self.listeners.register(Listener::new(listener)),\r\n            ..self\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn notify(\u0026self) {\r\n        self.listeners.notify(|| self.get());\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn Signal\u003cT\u003e\u003e {\r\n        Box::new(self.clone())\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Clone for StateSignal\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn clone(\u0026self) -\u003e Self {\r\n        Self {\r\n            value: self.value.clone(),\r\n            listeners: self.listeners.clone(),\r\n        }\r\n    }\r\n}\r\n\r\n#[cfg(all(test, feature = \"test\"))]\r\nmod tests {\r\n    use crate::signal::Signal;\r\n    use crate::signal::state::StateSignal;\r\n    use std::cell::RefCell;\r\n    use std::rc::Rc;\r\n\r\n    /// Tests the [StateSignal] implementation of [Signal].\r\n    #[test]\r\n    fn test_state_signal() {\r\n        let sum = Rc::new(RefCell::new(0));\r\n        let diff = Rc::new(RefCell::new(0));\r\n\r\n        let sum_clone = sum.clone();\r\n        let diff_clone = diff.clone();\r\n        let signal = StateSignal::new(0)\r\n            .listen(Box::new(move |val| {\r\n                *sum_clone.borrow_mut() += *val;\r\n            }))\r\n            .listen(Box::new(move |val| {\r\n                *diff_clone.borrow_mut() -= *val;\r\n            }));\r\n\r\n        let value = *signal.get();\r\n\r\n        // value = value + 1 = 0 + 1 = 1\r\n        signal.set(value + 1);\r\n\r\n        // sum = sum + value = 0 + 1 = 1\r\n        assert_eq!(*sum.borrow(), 1);\r\n\r\n        // diff = sum - value = 0 - 1 = -1\r\n        assert_eq!(*diff.borrow(), -1);\r\n\r\n        // value = value - 1 = 1 - 1 = 0\r\n        signal.mutate(|val| {\r\n            *val -= 1;\r\n        });\r\n\r\n        // sum = sum + value = 1 + 0 = 1\r\n        assert_eq!(*sum.borrow(), 1);\r\n\r\n        // diff = diff + value = -1 + 0 = -1\r\n        assert_eq!(*diff.borrow(), -1);\r\n    }\r\n}\r\n","traces":[{"line":20,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":22,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":23,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":32,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":33,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":34,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":40,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":41,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":45,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":46,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":50,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":55,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":61,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":62,"address":[],"length":0,"stats":{"Line":720575940379279360}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}}],"covered":14,"coverable":19},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","tasks","fetcher.rs"],"content":"use crate::tasks::runner;\r\nuse crate::tasks::task::Task;\r\n\r\n/// A value factory that uses the result of an asynchronous task to compute an output value.\r\n///\r\n/// The fetcher takes a task and a factory function.\r\n/// It produces an output value `O` by taking an [Option] of an input value `I`.\r\n///\r\n/// If the inner [Task] is not ready yet, the factory will be called with `None`.\r\n/// Once the inner [Task] is ready, the factory will be called with `Some(I)`.\r\n///\r\n/// This is similar to the [FutureBuilder](https://api.flutter.dev/flutter/widgets/FutureBuilder-class.html) from Flutter.\r\npub struct Fetcher\u003cI: Send + 'static, O\u003e {\r\n    task: Option\u003cBox\u003cdyn Task\u003cI\u003e\u003e\u003e,\r\n    factory: Box\u003cdyn Fn(Option\u003cI\u003e) -\u003e O\u003e,\r\n    value: Option\u003cO\u003e,\r\n}\r\n\r\nimpl\u003cI: Send + 'static, O\u003e Fetcher\u003cI, O\u003e {\r\n    /// Create a new task fetcher with the given task and factory function.\r\n    #[inline(always)]\r\n    pub const fn new(\r\n        task: Box\u003cdyn Task\u003cI\u003e\u003e,\r\n        factory: Box\u003cdyn Fn(Option\u003cI\u003e) -\u003e O + 'static\u003e,\r\n    ) -\u003e Self {\r\n        Self {\r\n            task: Some(task),\r\n            factory,\r\n            value: None,\r\n        }\r\n    }\r\n\r\n    /// Spawn a future using the [TaskRunner](runner::TaskRunner)\r\n    /// and create a new [Fetcher] with the resulting task and the given factory function.\r\n    ///\r\n    /// If you want to spawn a blocking task, use [Fetcher::spawn_blocking] instead.\r\n    #[inline(always)]\r\n    pub fn spawn(\r\n        future: impl Future\u003cOutput = I\u003e + Send + 'static,\r\n        factory: impl Fn(Option\u003cI\u003e) -\u003e O + 'static,\r\n    ) -\u003e Self {\r\n        let runner = runner();\r\n        let task = runner.spawn(future);\r\n\r\n        Self::new(task, Box::new(factory))\r\n    }\r\n\r\n    /// Spawn a blocking function using the [TaskRunner](runner::TaskRunner)\r\n    /// and create a new [Fetcher] with the resulting task and the given factory function.\r\n    ///\r\n    /// If your task is non-blocking (a simple future), use [Fetcher::spawn] instead.\r\n    #[inline(always)]\r\n    #[cfg(native)]\r\n    pub fn spawn_blocking(\r\n        func: impl Fn() -\u003e I + Send + 'static,\r\n        factory: impl Fn(Option\u003cI\u003e) -\u003e O + 'static,\r\n    ) -\u003e Self {\r\n        let runner = runner();\r\n        let task = runner.spawn_blocking(func);\r\n\r\n        Self::new(task, Box::new(factory))\r\n    }\r\n\r\n    /// Returns a mutable reference to the possible output value.\r\n    ///\r\n    /// This is mostly used internally and will return the cached output value.\r\n    #[inline(always)]\r\n    pub const fn value_mut(\u0026mut self) -\u003e Option\u003c\u0026mut O\u003e {\r\n        self.value.as_mut()\r\n    }\r\n\r\n    /// Returns a reference to the possible output value.\r\n    ///\r\n    /// This is mostly used internally and will return the cached output value.\r\n    #[inline(always)]\r\n    pub const fn value_ref(\u0026self) -\u003e Option\u003c\u0026O\u003e {\r\n        self.value.as_ref()\r\n    }\r\n\r\n    /// Returns whether the inner task is ready.\r\n    ///\r\n    /// **NOTE:** This will only return `true`, if the inner task has finished,\r\n    /// but the value has not been consumed yet.\r\n    #[inline(always)]\r\n    pub fn is_ready(\u0026self) -\u003e bool {\r\n        self.task.as_ref().map(|t| t.is_ready()).unwrap_or(false)\r\n    }\r\n\r\n    /// Returns whether the inner task has finished and the value has been computed.\r\n    #[inline(always)]\r\n    pub const fn is_fetched(\u0026self) -\u003e bool {\r\n        self.task.is_none() \u0026\u0026 self.value.is_some()\r\n    }\r\n\r\n    /// Computes the output value from the inner task.\r\n    ///\r\n    /// If the inner task is not ready, the factory function will be called with `None`.\r\n    /// Otherwise, it will be called with `Some(I)`.\r\n    #[inline(always)]\r\n    pub fn compute(\u0026mut self) {\r\n        if self.is_ready() {\r\n            let mut task = self.task.take().unwrap();\r\n            let value = task.take().unwrap();\r\n\r\n            self.value = Some((self.factory)(Some(value)));\r\n        } else {\r\n            self.value = Some((self.factory)(None));\r\n        }\r\n    }\r\n\r\n    /// Fetches the output value and returns a mutable reference.\r\n    ///\r\n    /// This will only actually compute the value,\r\n    /// if the task is not fully finished yet,\r\n    /// so it's safe to call, even if the task is already done.\r\n    #[inline(always)]\r\n    pub fn fetch(\u0026mut self) -\u003e \u0026mut O {\r\n        if !self.is_fetched() {\r\n            self.compute();\r\n        }\r\n\r\n        self.value_mut().unwrap()\r\n    }\r\n}\r\n\r\n#[cfg(all(test, feature = \"test\"))]\r\nmod tests {\r\n    use crate::tasks::fetcher::Fetcher;\r\n    use std::time::Duration;\r\n\r\n    #[test]\r\n    fn test_fetcher_spawn() {\r\n        init();\r\n\r\n        let mut fetcher = Fetcher::spawn(\r\n            async { tokio::time::sleep(Duration::from_millis(10)).await },\r\n            |_| 1,\r\n        );\r\n\r\n        std::thread::sleep(Duration::from_millis(20));\r\n\r\n        assert_eq!(fetcher.fetch(), \u00261);\r\n    }\r\n\r\n    #[test]\r\n    fn test_fetcher_spawn_blocking() {\r\n        init();\r\n\r\n        let mut fetcher =\r\n            Fetcher::spawn_blocking(|| std::thread::sleep(Duration::from_millis(10)), |_| 1);\r\n\r\n        std::thread::sleep(Duration::from_millis(20));\r\n\r\n        assert_eq!(fetcher.fetch(), \u00261);\r\n    }\r\n\r\n    fn init() {\r\n        crate::tasks::try_init(crate::tasks::TaskRunner::Tokio(\r\n            crate::tasks::runner::tokio::TaskRunner::new(\r\n                false, None, None, None, None, None, None, None,\r\n            ),\r\n        ));\r\n    }\r\n}\r\n","traces":[{"line":22,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":27,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":38,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":42,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":43,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":45,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":54,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":58,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":59,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":61,"address":[],"length":0,"stats":{"Line":216172782113783808}},{"line":68,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":69,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":86,"address":[],"length":0,"stats":{"Line":864691128455135232}},{"line":91,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":92,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":100,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":101,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":102,"address":[],"length":0,"stats":{"Line":720575940379279360}},{"line":103,"address":[],"length":0,"stats":{"Line":720575940379279360}},{"line":105,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":118,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":119,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":122,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":157,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":158,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":159,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":160,"address":[],"length":0,"stats":{"Line":864691128455135232}}],"covered":29,"coverable":32},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","tasks","mod.rs"],"content":"use crate::tasks::runner::TaskRunner;\r\nuse crate::tasks::task::{LocalTask, Task};\r\nuse std::sync::OnceLock;\r\n\r\n/// Contains the [TaskRunner] and related structures.\r\npub mod runner;\r\n\r\n/// Contains the [Task] and [task::LocalTask] traits.\r\npub mod task;\r\n\r\n/// Contains a dummy implementation of a waker. Used in [Task::take].\r\npub mod waker;\r\n\r\n/// Contains the [fetcher::Fetcher] structure.\r\npub mod fetcher;\r\n\r\n/// The global task runner.\r\nstatic RUNNER: OnceLock\u003cTaskRunner\u003e = OnceLock::new();\r\n\r\n/// Tries to initialize the task runner, if it isn't yet.\r\n#[inline(always)]\r\npub fn try_init(runner: TaskRunner) {\r\n    RUNNER.get_or_init(move || runner);\r\n}\r\n\r\n/// Initializes the global task runner.\r\n///\r\n/// Panics if the task runner is already initialized.\r\n#[inline(always)]\r\npub fn init(runner: TaskRunner) {\r\n    RUNNER.set(runner).expect(\"Task runner already initialized\");\r\n}\r\n\r\n/// Try to get the global task runner.\r\n/// Returns [None] if the task runner is not initialized.\r\n#[inline(always)]\r\npub fn try_runner\u003c'a\u003e() -\u003e Option\u003c\u0026'a TaskRunner\u003e {\r\n    RUNNER.get()\r\n}\r\n\r\n/// Get the global task runner.\r\n///\r\n/// Panics if the task runner is not initialized.\r\n#[inline(always)]\r\npub fn runner\u003c'a\u003e() -\u003e \u0026'a TaskRunner {\r\n    RUNNER.get().expect(\"Task runner not initialized\")\r\n}\r\n\r\n/// Spawns a task on the global task runner.\r\n///\r\n/// If this actually spawns a task on a background task or just spawns a local task,\r\n/// depends on the [TaskRunner] type that is in use.\r\n#[inline(always)]\r\npub fn spawn\u003cFut\u003e(future: Fut) -\u003e Box\u003cdyn Task\u003cFut::Output\u003e\u003e\r\nwhere\r\n    Fut: Future + Send + 'static,\r\n    Fut::Output: Send + 'static,\r\n{\r\n    runner().spawn(future)\r\n}\r\n\r\n/// Spawns a local task on the global task runner.\r\n///\r\n/// The local task will run on the current thread\r\n/// and will be executed by the application event loop.\r\n#[inline(always)]\r\npub fn spawn_local\u003cFut\u003e(future: Fut) -\u003e Box\u003cdyn LocalTask\u003cFut::Output\u003e\u003e\r\nwhere\r\n    Fut: Future + 'static,\r\n    Fut::Output: 'static,\r\n{\r\n    runner().spawn_local(future)\r\n}\r\n\r\n/// Spawns a blocking task on the global task runner.\r\n///\r\n/// This will always spawn a task in a background thread,\r\n/// as local spawning would block the thread.\r\n///\r\n/// Only available on native platforms.\r\n#[inline(always)]\r\n#[cfg(native)]\r\npub fn spawn_blocking\u003cR, F\u003e(func: F) -\u003e Box\u003cdyn Task\u003cR\u003e\u003e\r\nwhere\r\n    R: Send + 'static,\r\n    F: FnOnce() -\u003e R + Send + 'static,\r\n{\r\n    runner().spawn_blocking(func)\r\n}\r\n\r\n/// Blocks the current thread on the global task runner until the future is ready.\r\n///\r\n/// Only available on native platforms.\r\n#[inline(always)]\r\n#[cfg(native)]\r\npub fn block_on\u003cFut\u003e(future: Fut) -\u003e Fut::Output\r\nwhere\r\n    Fut: Future,\r\n{\r\n    runner().block_on(future)\r\n}\r\n","traces":[{"line":22,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":23,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":46,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}}],"covered":4,"coverable":16},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","tasks","runner","mod.rs"],"content":"use crate::tasks::task::{LocalTask, Task};\r\nuse std::fmt::Debug;\r\n\r\n/// Contains implementations of [Task], [LocalTask] and [TaskRunnerImpl] using [tokio].\r\n#[cfg(all(native, feature = \"tokio-runner\"))]\r\npub mod tokio;\r\n\r\n/// A task runner that can be used to spawn tasks.\r\n///\r\n/// The fields will only be available, if the corresponding feature is enabled.\r\n#[derive(Debug)]\r\npub enum TaskRunner {\r\n    /// A task runner that uses the [tokio] runtime.\r\n    #[cfg(feature = \"tokio-runner\")]\r\n    Tokio(tokio::TaskRunner),\r\n    /// A dummy task runner that will panic on any method call.\r\n    /// Useful if you want to disable the task runner feature,\r\n    /// but still want the build script to work (e.g. for libraries).\r\n    #[cfg(feature = \"dummy-runner\")]\r\n    Dummy,\r\n}\r\n\r\nimpl TaskRunner {\r\n    /// Spawns a task, possibly in the background.\r\n    ///\r\n    /// Returns a task handle to the future.\r\n    ///\r\n    /// Panics, when no valid task runner is enabled.\r\n    #[inline(always)]\r\n    #[tracing::instrument(skip_all)]\r\n    pub fn spawn\u003cFut\u003e(\u0026self, _future: Fut) -\u003e Box\u003cdyn Task\u003cFut::Output\u003e\u003e\r\n    where\r\n        Fut: Future + Send + 'static,\r\n        Fut::Output: Send + 'static,\r\n    {\r\n        match self {\r\n            #[cfg(feature = \"tokio-runner\")]\r\n            TaskRunner::Tokio(rt) =\u003e Box::new(rt.spawn(_future)),\r\n\r\n            _ =\u003e {\r\n                panic!(\r\n                    \"No valid task runner feature selected. Please select a `-runner` feature (e.g. `tokio-runner`).\"\r\n                );\r\n\r\n                // Required for code to compile\r\n                #[allow(unreachable_code)]\r\n                Box::new(crate::tasks::task::NeverTask::new())\r\n            },\r\n        }\r\n    }\r\n\r\n    /// Spawns a local task, that will run on the current thread.\r\n    ///\r\n    /// Returns a task handle to the future.\r\n    ///\r\n    /// Panics, when no valid task runner is enabled.\r\n    #[inline(always)]\r\n    #[tracing::instrument(skip_all)]\r\n    pub fn spawn_local\u003cFut\u003e(\u0026self, _future: Fut) -\u003e Box\u003cdyn LocalTask\u003cFut::Output\u003e\u003e\r\n    where\r\n        Fut: Future + 'static,\r\n        Fut::Output: 'static,\r\n    {\r\n        match self {\r\n            #[cfg(feature = \"tokio-runner\")]\r\n            TaskRunner::Tokio(rt) =\u003e Box::new(rt.spawn_local(_future)),\r\n\r\n            _ =\u003e {\r\n                panic!(\r\n                    \"No valid task runner feature selected. Please select a `-runner` feature (e.g. `tokio-runner`).\"\r\n                );\r\n\r\n                // Required for code to compile\r\n                #[allow(unreachable_code)]\r\n                Box::new(crate::tasks::task::LocalNeverTask::new())\r\n            },\r\n        }\r\n    }\r\n\r\n    /// Spawns a blocking task in the background.\r\n    ///\r\n    /// Returns a task handle to the operation.\r\n    ///\r\n    /// Panics, when no valid task runner is enabled.\r\n    #[inline(always)]\r\n    #[cfg(native)]\r\n    #[tracing::instrument(skip_all)]\r\n    pub fn spawn_blocking\u003cR, F\u003e(\u0026self, _func: F) -\u003e Box\u003cdyn Task\u003cR\u003e\u003e\r\n    where\r\n        R: Send + 'static,\r\n        F: FnOnce() -\u003e R + Send + 'static,\r\n    {\r\n        match self {\r\n            #[cfg(feature = \"tokio-runner\")]\r\n            TaskRunner::Tokio(rt) =\u003e Box::new(rt.spawn_blocking(_func)),\r\n\r\n            _ =\u003e {\r\n                panic!(\r\n                    \"No valid task runner feature selected. Please select a `-runner` feature (e.g. `tokio-runner`).\"\r\n                );\r\n\r\n                // Required for code to compile\r\n                #[allow(unreachable_code)]\r\n                Box::new(crate::tasks::task::NeverTask::new())\r\n            },\r\n        }\r\n    }\r\n\r\n    /// Blocks on the given future, until it's completed.\r\n    ///\r\n    /// Panics, when no valid task runner is enabled.\r\n    #[inline(always)]\r\n    #[cfg(native)]\r\n    #[tracing::instrument(skip_all)]\r\n    pub fn block_on\u003cFut\u003e(\u0026self, _future: Fut) -\u003e Fut::Output\r\n    where\r\n        Fut: Future,\r\n    {\r\n        match self {\r\n            #[cfg(feature = \"tokio-runner\")]\r\n            TaskRunner::Tokio(rt) =\u003e rt.block_on(_future),\r\n\r\n            _ =\u003e panic!(\r\n                \"No valid task runner feature selected. Please select a `-runner` feature (e.g. `tokio-runner`).\"\r\n            ),\r\n        }\r\n    }\r\n\r\n    /// Allows the task runner to perform work on the current thread for one tick.\r\n    ///\r\n    /// The task runner should return as soon as possible (after the first `await` point is reached),\r\n    /// to avoid blocks and freezes.\r\n    #[inline(always)]\r\n    #[tracing::instrument(skip_all)]\r\n    pub fn tick(\u0026self) {\r\n        match self {\r\n            #[cfg(feature = \"tokio-runner\")]\r\n            TaskRunner::Tokio(rt) =\u003e rt.tick(),\r\n\r\n            _ =\u003e panic!(\r\n                \"No valid task runner feature selected. Please select a `-runner` feature (e.g. `tokio-runner`).\"\r\n            ),\r\n        }\r\n    }\r\n}\r\n\r\n/// A trait that provides a task runner implementation.\r\npub trait TaskRunnerImpl: Debug + 'static {\r\n    /// The task type, that this task runner implementation uses.\r\n    type Task\u003cT: Send + 'static\u003e: Task\u003cT\u003e;\r\n\r\n    /// The local task type, that this task runner implementation uses.\r\n    type LocalTask\u003cT: 'static\u003e: LocalTask\u003cT\u003e;\r\n\r\n    /// Spawns a task, possibly in the background.\r\n    ///\r\n    /// Returns a task handle to the future.\r\n    fn spawn\u003cFut\u003e(\u0026self, future: Fut) -\u003e Self::Task\u003cFut::Output\u003e\r\n    where\r\n        Fut: Future + Send + 'static,\r\n        Fut::Output: Send + 'static;\r\n\r\n    /// Spawns a local task, that will run on the current thread.\r\n    ///\r\n    /// The task will be executed by the application event loop via [TaskRunnerImpl::tick].\r\n    ///\r\n    /// Returns a task handle to the future.\r\n    fn spawn_local\u003cFut\u003e(\u0026self, future: Fut) -\u003e Self::LocalTask\u003cFut::Output\u003e\r\n    where\r\n        Fut: Future + 'static,\r\n        Fut::Output: 'static;\r\n\r\n    /// Spawns a blocking task in the background.\r\n    ///\r\n    /// Returns a task handle to the operation.\r\n    #[cfg(native)]\r\n    fn spawn_blocking\u003cR, F\u003e(\u0026self, func: F) -\u003e Self::Task\u003cR\u003e\r\n    where\r\n        R: Send + 'static,\r\n        F: FnOnce() -\u003e R + Send + 'static;\r\n\r\n    /// Blocks on the given future, until it's completed.\r\n    #[cfg(native)]\r\n    fn block_on\u003cFut\u003e(\u0026self, future: Fut) -\u003e Fut::Output\r\n    where\r\n        Fut: Future;\r\n\r\n    /// Allows the task runner to perform work on the current thread for one tick.\r\n    ///\r\n    /// The task runner should return as soon as possible (after the first `await` point is reached),\r\n    /// to avoid blocks and freezes.\r\n    fn tick(\u0026self);\r\n}\r\n","traces":[{"line":31,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":36,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":38,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":93,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":95,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}}],"covered":6,"coverable":29},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","tasks","runner","tokio.rs"],"content":"use crate::tasks::runner::TaskRunnerImpl;\r\nuse crate::tasks::task::{LocalTask, Task};\r\nuse crate::tasks::waker::noop_waker;\r\nuse fragile::Fragile;\r\nuse std::future::ready;\r\nuse std::pin::Pin;\r\nuse std::task::{Context, Poll};\r\nuse std::time::Duration;\r\nuse tokio::runtime::{Builder, Runtime};\r\nuse tokio::task::{JoinHandle, LocalSet};\r\n\r\n/// A [TaskRunnerImpl] implementation that uses [tokio].\r\n#[derive(Debug)]\r\npub struct TaskRunner {\r\n    rt: Runtime,\r\n    local: Fragile\u003cLocalSet\u003e,\r\n}\r\n\r\nimpl TaskRunner {\r\n    /// Creates a new [TaskRunner] with the given configuration.\r\n    ///\r\n    /// Giving [None] to some config parameters will use the default value (that [tokio] uses).\r\n    #[inline(always)]\r\n    pub fn new(\r\n        io: bool,\r\n        stack_size: Option\u003cusize\u003e,\r\n        workers: Option\u003cusize\u003e,\r\n        max_io_events_per_tick: Option\u003cusize\u003e,\r\n        max_blocking_threads: Option\u003cusize\u003e,\r\n        event_interval: Option\u003cu32\u003e,\r\n        global_queue_interval: Option\u003cu32\u003e,\r\n        keep_alive: Option\u003cDuration\u003e,\r\n    ) -\u003e Self {\r\n        let mut builder = Builder::new_multi_thread();\r\n\r\n        if io {\r\n            builder.enable_io();\r\n        }\r\n\r\n        if let Some(stack_size) = stack_size {\r\n            builder.thread_stack_size(stack_size);\r\n        }\r\n\r\n        if let Some(workers) = workers {\r\n            builder.worker_threads(workers);\r\n        }\r\n\r\n        if let Some(max_io_events_per_tick) = max_io_events_per_tick {\r\n            builder.max_io_events_per_tick(max_io_events_per_tick);\r\n        }\r\n\r\n        if let Some(max_blocking_threads) = max_blocking_threads {\r\n            builder.max_blocking_threads(max_blocking_threads);\r\n        }\r\n\r\n        if let Some(event_interval) = event_interval {\r\n            builder.event_interval(event_interval);\r\n        }\r\n\r\n        if let Some(global_queue_interval) = global_queue_interval {\r\n            builder.global_queue_interval(global_queue_interval);\r\n        }\r\n\r\n        if let Some(keep_alive) = keep_alive {\r\n            builder.thread_keep_alive(keep_alive);\r\n        }\r\n\r\n        Self {\r\n            rt: builder\r\n                .enable_time()\r\n                .build()\r\n                .expect(\"Failed to build tokio runtime\"),\r\n            local: Fragile::new(LocalSet::new()),\r\n        }\r\n    }\r\n}\r\n\r\nimpl TaskRunnerImpl for TaskRunner {\r\n    type Task\u003cT: Send + 'static\u003e = TokioTask\u003cT\u003e;\r\n    type LocalTask\u003cT: 'static\u003e = LocalTokioTask\u003cT\u003e;\r\n\r\n    #[inline(always)]\r\n    fn spawn\u003cFut\u003e(\u0026self, future: Fut) -\u003e Self::Task\u003cFut::Output\u003e\r\n    where\r\n        Fut: Future + Send + 'static,\r\n        Fut::Output: Send + 'static,\r\n    {\r\n        TokioTask(self.rt.spawn(future))\r\n    }\r\n\r\n    fn spawn_local\u003cFut\u003e(\u0026self, future: Fut) -\u003e Self::LocalTask\u003cFut::Output\u003e\r\n    where\r\n        Fut: Future + 'static,\r\n        Fut::Output: 'static,\r\n    {\r\n        LocalTokioTask(\r\n            self.local\r\n                .try_get()\r\n                .expect(\"`spawn_local` must be called from the main thread\")\r\n                .spawn_local(future),\r\n        )\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn spawn_blocking\u003cR, F\u003e(\u0026self, func: F) -\u003e Self::Task\u003cR\u003e\r\n    where\r\n        R: Send + 'static,\r\n        F: FnOnce() -\u003e R + Send + 'static,\r\n    {\r\n        TokioTask(self.rt.spawn_blocking(func))\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn block_on\u003cFut\u003e(\u0026self, future: Fut) -\u003e Fut::Output\r\n    where\r\n        Fut: Future,\r\n    {\r\n        self.rt.block_on(future)\r\n    }\r\n\r\n    fn tick(\u0026self) {\r\n        self.block_on(async {\r\n            self.local\r\n                .try_get()\r\n                .expect(\"`tick` must be called from the main thread\")\r\n                .run_until(async { ready(()).await })\r\n                .await;\r\n        });\r\n    }\r\n}\r\n\r\n/// A [Task] implementation that uses [tokio].\r\npub struct TokioTask\u003cT: Send + 'static\u003e(JoinHandle\u003cT\u003e);\r\n\r\nimpl\u003cT: Send + 'static\u003e Task\u003cT\u003e for TokioTask\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn is_ready(\u0026self) -\u003e bool {\r\n        self.0.is_finished()\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn take(\u0026mut self) -\u003e Option\u003cT\u003e {\r\n        let pinned = Pin::new(\u0026mut self.0);\r\n        let waker = noop_waker();\r\n        let mut ctx = Context::from_waker(\u0026waker);\r\n\r\n        match pinned.poll(\u0026mut ctx) {\r\n            Poll::Ready(value) =\u003e Some(value.expect(\"Failed to poll tokio task\")),\r\n            Poll::Pending =\u003e None,\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT: Send + 'static\u003e Future for TokioTask\u003cT\u003e {\r\n    type Output = T;\r\n\r\n    #[inline(always)]\r\n    fn poll(mut self: Pin\u003c\u0026mut Self\u003e, cx: \u0026mut Context\u003c'_\u003e) -\u003e Poll\u003cT\u003e {\r\n        let pinned = Pin::new(\u0026mut self.0);\r\n\r\n        match pinned.poll(cx) {\r\n            Poll::Ready(res) =\u003e Poll::Ready(res.expect(\"Failed to join tokio task\")),\r\n            Poll::Pending =\u003e Poll::Pending,\r\n        }\r\n    }\r\n}\r\n\r\n/// A [LocalTask] implementation that uses [tokio].\r\npub struct LocalTokioTask\u003cT: 'static\u003e(JoinHandle\u003cT\u003e);\r\n\r\nimpl\u003cT: 'static\u003e LocalTask\u003cT\u003e for LocalTokioTask\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn is_ready(\u0026self) -\u003e bool {\r\n        self.0.is_finished()\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn take(\u0026mut self) -\u003e Option\u003cT\u003e {\r\n        let pinned = Pin::new(\u0026mut self.0);\r\n        let waker = noop_waker();\r\n        let mut ctx = Context::from_waker(\u0026waker);\r\n\r\n        match pinned.poll(\u0026mut ctx) {\r\n            Poll::Ready(value) =\u003e Some(value.expect(\"Failed to poll tokio task\")),\r\n            Poll::Pending =\u003e None,\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Future for LocalTokioTask\u003cT\u003e {\r\n    type Output = T;\r\n\r\n    #[inline(always)]\r\n    fn poll(mut self: Pin\u003c\u0026mut Self\u003e, cx: \u0026mut Context\u003c'_\u003e) -\u003e Poll\u003cT\u003e {\r\n        let pinned = Pin::new(\u0026mut self.0);\r\n\r\n        match pinned.poll(cx) {\r\n            Poll::Ready(res) =\u003e Poll::Ready(res.expect(\"Failed to join tokio task\")),\r\n            Poll::Pending =\u003e Poll::Pending,\r\n        }\r\n    }\r\n}\r\n","traces":[{"line":24,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":34,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":36,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":73,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":83,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":88,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":72057594037927936}},{"line":110,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":138,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":142,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":143,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":144,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":145,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":147,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":148,"address":[],"length":0,"stats":{"Line":432345564227567616}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}}],"covered":24,"coverable":66},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","tasks","task.rs"],"content":"use std::pin::Pin;\r\nuse std::task::{Context, Poll};\r\n\r\n/// A task that **can** be spawned on a background thread.\r\n///\r\n/// The inner value requires to be [Send] and `static`.\r\npub trait Task\u003cT: Send + 'static\u003e: Future\u003cOutput = T\u003e + Send + 'static {\r\n    /// Returns if the task is finished or still pending.\r\n    fn is_ready(\u0026self) -\u003e bool;\r\n\r\n    /// Tries to take the inner value if the task is finished.\r\n    ///\r\n    /// Returns [None] if the task is still pending.\r\n    ///\r\n    /// This should only be called if you are sure the task is ready (check via [Task::is_ready]).\r\n    /// Furthermore, calling this multiple times when the task is finished will probably raise a panic,\r\n    /// so make sure to only call this once, if the task is finished.\r\n    fn take(\u0026mut self) -\u003e Option\u003cT\u003e;\r\n}\r\n\r\n/// A task that is executed on the local thread.\r\n///\r\n/// Unlike [Task], the inner type does not need to be [Send].\r\npub trait LocalTask\u003cT\u003e: Future\u003cOutput = T\u003e + 'static {\r\n    /// Returns if the task is finished or still pending.\r\n    fn is_ready(\u0026self) -\u003e bool;\r\n\r\n    /// Tries to take the inner value if the task is finished.\r\n    ///\r\n    /// Returns [None] if the task is still pending.\r\n    ///\r\n    /// This should only be called if you are sure the task is ready (check via [Task::is_ready]).\r\n    /// Furthermore, calling this multiple times when the task is finished will probably raise a panic,\r\n    /// so make sure to only call this once, if the task is finished.\r\n    fn take(\u0026mut self) -\u003e Option\u003cT\u003e;\r\n}\r\n\r\n/// A task that never completes.\r\n///\r\n/// This is the [Send]-safe variant of [LocalNeverTask].\r\n#[derive(Debug)]\r\npub struct NeverTask\u003cT: Send + 'static\u003e(std::marker::PhantomData\u003cT\u003e);\r\n\r\nimpl\u003cT: Send + 'static\u003e NeverTask\u003cT\u003e {\r\n    /// Creates a new [NeverTask].\r\n    #[inline(always)]\r\n    pub const fn new() -\u003e Self {\r\n        Self(std::marker::PhantomData)\r\n    }\r\n}\r\n\r\nimpl\u003cT: Send + 'static\u003e Future for NeverTask\u003cT\u003e {\r\n    type Output = T;\r\n\r\n    #[inline(always)]\r\n    fn poll(self: Pin\u003c\u0026mut Self\u003e, _cx: \u0026mut Context\u003c'_\u003e) -\u003e Poll\u003cSelf::Output\u003e {\r\n        Poll::Pending\r\n    }\r\n}\r\n\r\nimpl\u003cT: Send + 'static\u003e Task\u003cT\u003e for NeverTask\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn is_ready(\u0026self) -\u003e bool {\r\n        false\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn take(\u0026mut self) -\u003e Option\u003cT\u003e {\r\n        None\r\n    }\r\n}\r\n\r\nimpl\u003cT: Send + 'static\u003e Default for NeverTask\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self::new()\r\n    }\r\n}\r\n\r\n/// A task that never completes.\r\n///\r\n/// This is the non-[Send]-safe variant of [NeverTask].\r\n#[derive(Debug, Default)]\r\npub struct LocalNeverTask\u003cT: 'static\u003e(std::marker::PhantomData\u003cT\u003e);\r\n\r\nimpl\u003cT: 'static\u003e LocalNeverTask\u003cT\u003e {\r\n    /// Create a new [LocalNeverTask].\r\n    #[inline(always)]\r\n    pub const fn new() -\u003e Self {\r\n        Self(std::marker::PhantomData)\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e Future for LocalNeverTask\u003cT\u003e {\r\n    type Output = T;\r\n\r\n    #[inline(always)]\r\n    fn poll(self: Pin\u003c\u0026mut Self\u003e, _cx: \u0026mut Context\u003c'_\u003e) -\u003e Poll\u003cSelf::Output\u003e {\r\n        Poll::Pending\r\n    }\r\n}\r\n\r\nimpl\u003cT: 'static\u003e LocalTask\u003cT\u003e for LocalNeverTask\u003cT\u003e {\r\n    #[inline(always)]\r\n    fn is_ready(\u0026self) -\u003e bool {\r\n        false\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn take(\u0026mut self) -\u003e Option\u003cT\u003e {\r\n        None\r\n    }\r\n}\r\n","traces":[{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":18},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","tasks","waker.rs"],"content":"use std::task::{RawWaker, RawWakerVTable, Waker};\r\n\r\n/// Creates a no-op waker.\r\n///\r\n/// Should only be used in certain cases.\r\n///\r\n/// Mostly used in [crate::tasks::task::Task::take].\r\n#[inline(always)]\r\npub const fn noop_waker() -\u003e Waker {\r\n    unsafe { Waker::from_raw(noop_raw_waker()) }\r\n}\r\n\r\n/// Create a no-op raw waker.\r\n#[inline(always)]\r\nconst fn noop_raw_waker() -\u003e RawWaker {\r\n    RawWaker::new(\r\n        std::ptr::null(),\r\n        \u0026RawWakerVTable::new(clone, wake, wake_by_ref, drop),\r\n    )\r\n}\r\n\r\n/// No-op clone.\r\n#[inline(always)]\r\nconst fn clone(_: *const ()) -\u003e RawWaker {\r\n    noop_raw_waker()\r\n}\r\n\r\n/// No-op wake.\r\n#[inline(always)]\r\nconst fn wake(_: *const ()) {}\r\n\r\n/// No-op wake-by-ref.\r\n#[inline(always)]\r\nconst fn wake_by_ref(_: *const ()) {}\r\n\r\n/// No-op drop.\r\n#[inline(always)]\r\nconst fn drop(_: *const ()) {}\r\n","traces":[{"line":9,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":10,"address":[],"length":0,"stats":{"Line":288230376151711744}},{"line":15,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":17,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":18,"address":[],"length":0,"stats":{"Line":144115188075855872}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":288230376151711744}}],"covered":6,"coverable":10},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","vgi","dummy.rs"],"content":"use crate::vgi::kurbo::{\r\n    Affine, Circle, CircleSegment, CubicBez, Ellipse, QuadBez, Rect, RoundedRect, Stroke, Triangle,\r\n};\r\nuse crate::vgi::{FontData, Scene, VectorGraphicsInterface};\r\nuse nalgebra::Vector2;\r\nuse peniko::{Brush, Color, ImageBrush};\r\nuse std::any::Any;\r\nuse std::convert::Infallible;\r\nuse std::fmt::Debug;\r\nuse std::sync::Arc;\r\nuse winit::event_loop::ActiveEventLoop;\r\nuse winit::window::Window;\r\n\r\n/// A dummy graphics backend that does nothing.\r\n///\r\n/// Useful for testing.\r\n#[derive(Debug)]\r\npub struct DummyGraphics;\r\n\r\nimpl VectorGraphicsInterface for DummyGraphics {\r\n    type Error = Infallible;\r\n    type Scene = DummyScene;\r\n    type Config = ();\r\n\r\n    fn new(_: Self::Config) -\u003e Result\u003cSelf, Self::Error\u003e\r\n    where\r\n        Self: Sized,\r\n    {\r\n        Ok(Self)\r\n    }\r\n\r\n    fn init(\r\n        \u0026mut self,\r\n        _window: Arc\u003cWindow\u003e,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e {\r\n        Ok(())\r\n    }\r\n\r\n    fn render(\r\n        \u0026mut self,\r\n        _window: Arc\u003cWindow\u003e,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n        _scene: \u0026Self::Scene,\r\n        _bg_color: Color,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e {\r\n        Ok(())\r\n    }\r\n\r\n    fn resize(\r\n        \u0026mut self,\r\n        _window: Arc\u003cWindow\u003e,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n        _size: Vector2\u003cu32\u003e,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e {\r\n        Ok(())\r\n    }\r\n\r\n    fn uninit(\r\n        \u0026mut self,\r\n        _window: Arc\u003cWindow\u003e,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e {\r\n        Ok(())\r\n    }\r\n\r\n    fn destroy(\r\n        \u0026mut self,\r\n        _window: Arc\u003cWindow\u003e,\r\n        _event_loop: \u0026ActiveEventLoop,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e {\r\n        Ok(())\r\n    }\r\n}\r\n\r\n/// A dummy scene that does nothing.\r\n///\r\n/// Useful for testing.\r\npub struct DummyScene;\r\n\r\nimpl Scene for DummyScene {\r\n    fn new() -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        unimplemented!(\"This is a dummy scene\")\r\n    }\r\n\r\n    fn as_any(\u0026self) -\u003e \u0026dyn Any {\r\n        self\r\n    }\r\n\r\n    fn as_any_mut(\u0026mut self) -\u003e \u0026mut dyn Any {\r\n        self\r\n    }\r\n\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn Scene\u003e {\r\n        Box::new(DummyScene)\r\n    }\r\n\r\n    fn reset(\u0026mut self) {}\r\n\r\n    fn append(\u0026mut self, _other: \u0026dyn Scene, _transform: Option\u003cAffine\u003e) {}\r\n\r\n    fn draw_rect(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _stroke: Option\u003c\u0026Stroke\u003e,\r\n        _rect: \u0026Rect,\r\n    ) {\r\n    }\r\n\r\n    fn draw_rounded_rect(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _stroke: Option\u003c\u0026Stroke\u003e,\r\n        _rect: \u0026RoundedRect,\r\n    ) {\r\n    }\r\n\r\n    fn draw_circle(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _stroke: Option\u003c\u0026Stroke\u003e,\r\n        _circle: \u0026Circle,\r\n    ) {\r\n    }\r\n\r\n    fn draw_circle_segment(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _stroke: Option\u003c\u0026Stroke\u003e,\r\n        _circle_segment: \u0026CircleSegment,\r\n    ) {\r\n    }\r\n\r\n    fn draw_ellipse(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _stroke: Option\u003c\u0026Stroke\u003e,\r\n        _ellipse: \u0026Ellipse,\r\n    ) {\r\n    }\r\n\r\n    fn draw_cubic_bezier(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _stroke: Option\u003c\u0026Stroke\u003e,\r\n        _cubic_bez: \u0026CubicBez,\r\n    ) {\r\n    }\r\n\r\n    fn draw_quadratic_bezier(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _stroke: Option\u003c\u0026Stroke\u003e,\r\n        _quad_bez: \u0026QuadBez,\r\n    ) {\r\n    }\r\n\r\n    fn draw_triangle(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _stroke: Option\u003c\u0026Stroke\u003e,\r\n        _triangle: \u0026Triangle,\r\n    ) {\r\n    }\r\n\r\n    fn draw_image(\r\n        \u0026mut self,\r\n        _img: \u0026ImageBrush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _position: Vector2\u003cf32\u003e,\r\n    ) {\r\n    }\r\n\r\n    fn draw_text(\r\n        \u0026mut self,\r\n        _brush: \u0026Brush,\r\n        _transform: Option\u003cAffine\u003e,\r\n        _position: Vector2\u003cf32\u003e,\r\n        _text: \u0026str,\r\n        _hinting: bool,\r\n        _font: \u0026FontData,\r\n        _size: f32,\r\n        _line_gap: f32,\r\n        _max_width: f32,\r\n    ) {\r\n    }\r\n\r\n    #[cfg(feature = \"svg\")]\r\n    fn draw_svg(\u0026mut self, _svg: \u0026usvg::Tree, _transform: Option\u003cAffine\u003e) {}\r\n}\r\n","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":32},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","vgi","mod.rs"],"content":"use nalgebra::Vector2;\r\nuse std::any::Any;\r\nuse std::error::Error;\r\nuse std::fmt::Debug;\r\nuse std::sync::Arc;\r\nuse winit::event_loop::ActiveEventLoop;\r\nuse winit::window::Window;\r\n\r\nuse crate::vgi::kurbo::{\r\n    Affine, Circle, CircleSegment, CubicBez, Ellipse, QuadBez, Rect, RoundedRect, Stroke, Triangle,\r\n};\r\npub use peniko::*;\r\n\r\n#[cfg(feature = \"svg\")]\r\npub use usvg as svg;\r\n\r\n/// Contains the [vello::VectorGraphicsInterface] which uses [vello] as the backend.\r\n///\r\n/// This is the recommended graphics backend.\r\n///\r\n/// Requires the `vello-vg` feature (enabled by default).\r\n#[cfg(feature = \"vello-vg\")]\r\npub mod vello;\r\n\r\n/// Contains the [dummy::DummyGraphics] \u0026 [dummy::DummyGraphics] structs.\r\n///\r\n/// Useful for testing.\r\npub mod dummy;\r\n\r\n/// The default graphics backend for maycoon.\r\n///\r\n/// See [vello::VectorGraphicsInterface] for more.\r\n///\r\n/// Requires the `vello-vg` feature (enabled by default).\r\n#[cfg(feature = \"vello-vg\")]\r\npub type DefaultGraphics = vello::VectorGraphicsInterface;\r\n\r\n/// A trait describing ways to render vector graphics.\r\n///\r\n/// This is a universal interface for 2D vector graphics rendering.\r\npub trait VectorGraphicsInterface: Debug + 'static {\r\n    /// The error used by most graphics operations.\r\n    type Error: Error;\r\n    /// A direct interface for drawing vector graphics using this interface.\r\n    type Scene: Scene;\r\n    /// A configuration struct for initializing the interface.\r\n    type Config: Debug + Default + Clone;\r\n\r\n    /// Creates a new vector graphics interface using the given configuration.\r\n    ///\r\n    /// Returns an [Err] if the interface could not be created.\r\n    fn new(config: Self::Config) -\u003e Result\u003cSelf, Self::Error\u003e\r\n    where\r\n        Self: Sized;\r\n\r\n    /// Initializes the interface.\r\n    ///\r\n    /// This will be called on [winit::event::Event::Resumed] to initialize the graphics interface.\r\n    ///\r\n    /// Returns an [Err] if the interface could not be initialized.\r\n    fn init(\r\n        \u0026mut self,\r\n        window: Arc\u003cWindow\u003e,\r\n        event_loop: \u0026ActiveEventLoop,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e;\r\n\r\n    /// Renders the scene to the window.\r\n    ///\r\n    /// This method should render the scene on a window surface and **present** the surface too.\r\n    ///\r\n    /// Returns an [Err] if the scene could not be rendered.\r\n    fn render(\r\n        \u0026mut self,\r\n        window: Arc\u003cWindow\u003e,\r\n        event_loop: \u0026ActiveEventLoop,\r\n        scene: \u0026Self::Scene,\r\n        bg_color: Color,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e;\r\n\r\n    /// Resizes the window.\r\n    ///\r\n    /// This method should resize the window surface to the given size.\r\n    ///\r\n    /// **NOTE**: Do not resize the window itself. This is already done automatically.\r\n    ///\r\n    /// Returns an [Err] if the window could not be resized.\r\n    fn resize(\r\n        \u0026mut self,\r\n        window: Arc\u003cWindow\u003e,\r\n        event_loop: \u0026ActiveEventLoop,\r\n        size: Vector2\u003cu32\u003e,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e;\r\n\r\n    /// Uninitializes the interface.\r\n    ///\r\n    /// This will be called on [winit::event::Event::Suspended] to uninitialize the graphics interface.\r\n    ///\r\n    /// Returns an [Err] if the interface could not be uninitialized.\r\n    fn uninit(\r\n        \u0026mut self,\r\n        window: Arc\u003cWindow\u003e,\r\n        event_loop: \u0026ActiveEventLoop,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e;\r\n\r\n    /// Destroys the interface.\r\n    ///\r\n    /// This will be called on [winit::event::WindowEvent::Destroyed] to destroy the graphics interface.\r\n    ///\r\n    /// Returns an [Err] if the interface could not be destroyed.\r\n    fn destroy(\r\n        \u0026mut self,\r\n        window: Arc\u003cWindow\u003e,\r\n        event_loop: \u0026ActiveEventLoop,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e;\r\n}\r\n\r\n/// An interface for drawing vector graphics onto a canvas.\r\n///\r\n/// Must be provided by the [VectorGraphicsInterface].\r\npub trait Scene: 'static {\r\n    /// Creates a new empty scene.\r\n    fn new() -\u003e Self\r\n    where\r\n        Self: Sized;\r\n\r\n    /// Returns this [Scene] as an [Any] reference.\r\n    fn as_any(\u0026self) -\u003e \u0026dyn Any;\r\n\r\n    /// Returns this [Scene] as a mutable [Any] reference.\r\n    fn as_any_mut(\u0026mut self) -\u003e \u0026mut dyn Any;\r\n\r\n    /// Clones this [Scene] and returns it boxed.\r\n    ///\r\n    /// Used to keep object safety while allowing the scene to be cloned.\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn Scene\u003e;\r\n\r\n    /// Resets the [Scene] to its initial state.\r\n    ///\r\n    /// This scene should be equal to [Scene::new] after this call.\r\n    fn reset(\u0026mut self);\r\n\r\n    /// Appends the given [Scene] to this [Scene].\r\n    ///\r\n    /// Apply an optional transform to the scene.\r\n    fn append(\u0026mut self, other: \u0026dyn Scene, transform: Option\u003cAffine\u003e);\r\n\r\n    /// Draws a rectangle onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the rectangle.\r\n    ///\r\n    /// Optionally, strokes and does not fill the rectangle.\r\n    fn draw_rect(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        rect: \u0026Rect,\r\n    );\r\n\r\n    /// Draws a rounded rectangle onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the rectangle.\r\n    ///\r\n    /// Optionally, strokes and does not fill the rectangle.\r\n    fn draw_rounded_rect(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        rect: \u0026RoundedRect,\r\n    );\r\n\r\n    /// Draws a circle onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the circle.\r\n    ///\r\n    /// Optionally, strokes and does not fill the circle.\r\n    fn draw_circle(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        circle: \u0026Circle,\r\n    );\r\n\r\n    /// Draws a circle segment onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the circle segment.\r\n    ///\r\n    /// Optionally, strokes and does not fill the circle segment.\r\n    fn draw_circle_segment(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        circle_segment: \u0026CircleSegment,\r\n    );\r\n\r\n    /// Draws an ellipse onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the ellipse.\r\n    ///\r\n    /// Optionally, strokes and does not fill the ellipse.\r\n    fn draw_ellipse(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        ellipse: \u0026Ellipse,\r\n    );\r\n\r\n    /// Draws a cubic bezier onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the cubic bezier.\r\n    ///\r\n    /// Optionally, strokes and does not fill the cubic bezier.\r\n    fn draw_cubic_bezier(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        cubic_bez: \u0026CubicBez,\r\n    );\r\n\r\n    /// Draws a quadratic bezier onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the quadratic bezier.\r\n    ///\r\n    /// Optionally, strokes and does not fill the quadratic bezier.\r\n    fn draw_quadratic_bezier(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        quad_bez: \u0026QuadBez,\r\n    );\r\n\r\n    /// Draws a triangle onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the triangle.\r\n    ///\r\n    /// Optionally, strokes and does not fill the triangle.\r\n    fn draw_triangle(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        triangle: \u0026Triangle,\r\n    );\r\n\r\n    /// Draws an image onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the image (after the position is inserted).\r\n    fn draw_image(\u0026mut self, img: \u0026ImageBrush, transform: Option\u003cAffine\u003e, position: Vector2\u003cf32\u003e);\r\n\r\n    /// Draws text onto the [Scene] with the given brush.\r\n    ///\r\n    /// Apply an optional transform to the text (after the position is inserted).\r\n    ///\r\n    /// You can also specify hinting, size, and the line gap.\r\n    ///\r\n    /// Furthermore, you can choose if the text should be wrapped by passing `max_width`.\r\n    fn draw_text(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        position: Vector2\u003cf32\u003e,\r\n        text: \u0026str,\r\n        hinting: bool,\r\n        font: \u0026FontData,\r\n        size: f32,\r\n        line_gap: f32,\r\n        max_width: f32,\r\n    );\r\n\r\n    // TODO: add `Affine` transform arg as soon as vello_svg supports it\r\n    /// Draws an SVG onto the [Scene] with an optional transform.\r\n    ///\r\n    /// Only enabled if the [svg] feature is enabled.\r\n    #[cfg(feature = \"svg\")]\r\n    fn draw_svg(\u0026mut self, svg: \u0026usvg::Tree, transform: Option\u003cAffine\u003e);\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","vgi","vello.rs"],"content":"use crate::vgi::FontData;\r\nuse crate::vgi::kurbo::Stroke;\r\nuse crate::{tasks, vgi};\r\nuse nalgebra::Vector2;\r\nuse peniko::kurbo::{CubicBez, Triangle};\r\nuse peniko::{Brush, Color, Fill, ImageBrush};\r\nuse skrifa::instance::Size;\r\nuse skrifa::setting::VariationSetting;\r\nuse skrifa::{FontRef, MetadataProvider};\r\nuse std::any::Any;\r\nuse std::fmt::Debug;\r\nuse std::num::NonZeroUsize;\r\nuse std::sync::Arc;\r\npub use vello::AaConfig as Antialiasing;\r\nuse vello::kurbo::{\r\n    Affine, Circle, CircleSegment, Ellipse, QuadBez, Rect, RoundedRect, Shape, Vec2,\r\n};\r\nuse vello::util::{DeviceHandle, RenderContext, RenderSurface};\r\nuse vello::{AaSupport, Error, Glyph, RenderParams, Renderer, RendererOptions};\r\npub use wgpu_types::PresentMode;\r\nuse wgpu_types::{CommandEncoderDescriptor, TextureViewDescriptor};\r\nuse winit::event_loop::ActiveEventLoop;\r\nuse winit::window::Window;\r\n\r\n/// A vector graphics interface using [vello] as the backend.\r\n///\r\n/// This is the recommended graphics backend.\r\n///\r\n/// Requires the `vello-vg` feature (enabled by default).\r\n///\r\n/// Uses [vello] and [wgpu](https://crates.io/crates/wgpu) to render vector graphics.\r\npub struct VectorGraphicsInterface {\r\n    config: VectorGraphicsConfig,\r\n    context: RenderContext,\r\n    renderer: Option\u003cRenderer\u003e,\r\n    surface: Option\u003cRenderSurface\u003c'static\u003e\u003e,\r\n    device: usize,\r\n}\r\n\r\nimpl vgi::VectorGraphicsInterface for VectorGraphicsInterface {\r\n    type Error = Error;\r\n    type Scene = Scene;\r\n    type Config = VectorGraphicsConfig;\r\n\r\n    #[inline(always)]\r\n    fn new(config: Self::Config) -\u003e Result\u003cSelf, Self::Error\u003e\r\n    where\r\n        Self: Sized,\r\n    {\r\n        Ok(Self {\r\n            config,\r\n            context: RenderContext::new(),\r\n            renderer: None,\r\n            surface: None,\r\n            device: 0,\r\n        })\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn init(\u0026mut self, window: Arc\u003cWindow\u003e, _: \u0026ActiveEventLoop) -\u003e Result\u003c(), Self::Error\u003e {\r\n        let size = window.inner_size();\r\n\r\n        self.surface = Some(tasks::block_on(self.context.create_surface(\r\n            window,\r\n            size.width,\r\n            size.height,\r\n            self.config.present_mode,\r\n        ))?);\r\n\r\n        self.device = (self.config.device_selector)(\u0026self.context.devices);\r\n        let device = \u0026self.context.devices[self.device];\r\n\r\n        self.renderer = Some(Renderer::new(\r\n            \u0026device.device,\r\n            RendererOptions {\r\n                use_cpu: false,\r\n                antialiasing_support: match self.config.antialiasing {\r\n                    Antialiasing::Area =\u003e AaSupport::area_only(),\r\n                    Antialiasing::Msaa8 =\u003e AaSupport {\r\n                        area: false,\r\n                        msaa8: true,\r\n                        msaa16: false,\r\n                    },\r\n                    Antialiasing::Msaa16 =\u003e AaSupport {\r\n                        area: false,\r\n                        msaa8: false,\r\n                        msaa16: true,\r\n                    },\r\n                },\r\n                num_init_threads: Some(self.config.init_threads),\r\n                pipeline_cache: None,\r\n            },\r\n        )?);\r\n\r\n        Ok(())\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        window: Arc\u003cWindow\u003e,\r\n        _: \u0026ActiveEventLoop,\r\n        scene: \u0026Self::Scene,\r\n        bg_color: Color,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e {\r\n        let renderer = self\r\n            .renderer\r\n            .as_mut()\r\n            .expect(\"Vector graphics not initialized yet\");\r\n        let surface = self\r\n            .surface\r\n            .as_ref()\r\n            .expect(\"Vector graphics not initialized yet\");\r\n        let device_handle = \u0026self.context.devices[self.device];\r\n\r\n        renderer.render_to_texture(\r\n            \u0026device_handle.device,\r\n            \u0026device_handle.queue,\r\n            \u0026scene.scene,\r\n            \u0026surface.target_view,\r\n            \u0026RenderParams {\r\n                base_color: bg_color,\r\n                width: window.inner_size().width,\r\n                height: window.inner_size().height,\r\n                antialiasing_method: self.config.antialiasing,\r\n            },\r\n        )?;\r\n\r\n        let surface_texture = surface\r\n            .surface\r\n            .get_current_texture()\r\n            .expect(\"Failed to get current surface texture\");\r\n\r\n        let mut encoder = device_handle\r\n            .device\r\n            .create_command_encoder(\u0026CommandEncoderDescriptor {\r\n                label: Some(\"Surface Blit Encoder\"),\r\n            });\r\n\r\n        surface.blitter.copy(\r\n            \u0026device_handle.device,\r\n            \u0026mut encoder,\r\n            \u0026surface.target_view,\r\n            \u0026surface_texture\r\n                .texture\r\n                .create_view(\u0026TextureViewDescriptor::default()),\r\n        );\r\n\r\n        device_handle.queue.submit([encoder.finish()]);\r\n\r\n        window.pre_present_notify();\r\n\r\n        surface_texture.present();\r\n\r\n        Ok(())\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn resize(\r\n        \u0026mut self,\r\n        _: Arc\u003cWindow\u003e,\r\n        _: \u0026ActiveEventLoop,\r\n        size: Vector2\u003cu32\u003e,\r\n    ) -\u003e Result\u003c(), Self::Error\u003e {\r\n        self.context.resize_surface(\r\n            self.surface\r\n                .as_mut()\r\n                .expect(\"Vector graphics not initialized yet\"),\r\n            size.x,\r\n            size.y,\r\n        );\r\n\r\n        Ok(())\r\n    }\r\n\r\n    #[cold]\r\n    fn uninit(\u0026mut self, _: Arc\u003cWindow\u003e, _: \u0026ActiveEventLoop) -\u003e Result\u003c(), Self::Error\u003e {\r\n        self.renderer = None;\r\n        self.surface = None;\r\n\r\n        Ok(())\r\n    }\r\n\r\n    #[cold]\r\n    fn destroy(\u0026mut self, _: Arc\u003cWindow\u003e, _: \u0026ActiveEventLoop) -\u003e Result\u003c(), Self::Error\u003e {\r\n        for device in \u0026self.context.devices {\r\n            device.device.destroy();\r\n        }\r\n\r\n        Ok(())\r\n    }\r\n}\r\n\r\nimpl Debug for VectorGraphicsInterface {\r\n    #[inline(always)]\r\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\r\n        f.debug_struct(\"VectorGraphicsInterface\")\r\n            .field(\"config\", \u0026self.config)\r\n            .field(\"context\", \u0026\"\u003chidden\u003e\")\r\n            .field(\"renderer\", \u0026\"\u003chidden\u003e\")\r\n            .field(\"surface\", \u0026self.surface)\r\n            .field(\"device\", \u0026self.device)\r\n            .finish()\r\n    }\r\n}\r\n\r\n/// A configuration struct for initializing the [VectorGraphicsInterface].\r\n///\r\n/// This struct is passed to [VectorGraphicsInterface::new].\r\n#[derive(Debug, Copy, Clone)]\r\npub struct VectorGraphicsConfig {\r\n    /// The present mode to use for the surface. Defaults to [PresentMode::AutoNoVsync].\r\n    pub present_mode: PresentMode,\r\n    /// A function to select a device. All devices that are given to this function are compatible.\r\n    ///\r\n    /// Default is to panic if the list is empty or select the first device.\r\n    pub device_selector: fn(\u0026Vec\u003cDeviceHandle\u003e) -\u003e usize,\r\n    /// Use the CPU for some rendering work.\r\n    ///\r\n    /// **NOTE**: This does not disable GPU-usage. Rasterization will still be done by the GPU:\r\n    pub use_cpu: bool,\r\n    /// The antialiasing configuration for the renderer. Defaults to [Antialiasing::Area].\r\n    pub antialiasing: Antialiasing,\r\n    /// The threads to use for renderer initialization. Defaults to 50% of [std::thread::available_parallelism] or 1 if it fails.\r\n    pub init_threads: NonZeroUsize,\r\n}\r\n\r\nimpl Default for VectorGraphicsConfig {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self {\r\n            present_mode: PresentMode::AutoNoVsync,\r\n            device_selector: |dev| {\r\n                if dev.is_empty() {\r\n                    panic!(\"No compatible devices found.\")\r\n                } else {\r\n                    0\r\n                }\r\n            },\r\n            use_cpu: false,\r\n            antialiasing: Antialiasing::Area,\r\n            init_threads: NonZeroUsize::new(\r\n                std::thread::available_parallelism()\r\n                    .map(|p| ((p.get() as f32 * 0.5).round() as usize).clamp(1, usize::MAX))\r\n                    .unwrap_or(1),\r\n            )\r\n            .unwrap(),\r\n        }\r\n    }\r\n}\r\n\r\n/// A scene to draw on. Uses [vello::Scene] under the hood.\r\n#[derive(Clone, Default)]\r\npub struct Scene {\r\n    scene: vello::Scene,\r\n}\r\n\r\nimpl Scene {\r\n    #[inline(always)]\r\n    fn draw(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        shape: \u0026impl Shape,\r\n    ) {\r\n        let transform = transform.unwrap_or_default();\r\n\r\n        if let Some(stroke) = stroke {\r\n            self.scene.stroke(stroke, transform, brush, None, shape);\r\n        } else {\r\n            self.scene\r\n                .fill(Fill::NonZero, transform, brush, None, shape);\r\n        }\r\n    }\r\n}\r\n\r\nimpl vgi::Scene for Scene {\r\n    #[inline(always)]\r\n    fn new() -\u003e Self {\r\n        Self {\r\n            scene: vello::Scene::new(),\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn as_any(\u0026self) -\u003e \u0026dyn Any {\r\n        self\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn as_any_mut(\u0026mut self) -\u003e \u0026mut dyn Any {\r\n        self\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn dyn_clone(\u0026self) -\u003e Box\u003cdyn vgi::Scene\u003e {\r\n        Box::new(self.clone())\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn reset(\u0026mut self) {\r\n        self.scene.reset();\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn append(\u0026mut self, other: \u0026dyn vgi::Scene, transform: Option\u003cAffine\u003e) {\r\n        let any = other.as_any();\r\n        let scene = any.downcast_ref::\u003cScene\u003e().unwrap();\r\n\r\n        self.scene.append(\u0026scene.scene, transform)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_rect(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        rect: \u0026Rect,\r\n    ) {\r\n        self.draw(brush, transform, stroke, rect)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_rounded_rect(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        rect: \u0026RoundedRect,\r\n    ) {\r\n        self.draw(brush, transform, stroke, rect)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_circle(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        circle: \u0026Circle,\r\n    ) {\r\n        self.draw(brush, transform, stroke, circle)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_circle_segment(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        circle_segment: \u0026CircleSegment,\r\n    ) {\r\n        self.draw(brush, transform, stroke, circle_segment)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_ellipse(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        ellipse: \u0026Ellipse,\r\n    ) {\r\n        self.draw(brush, transform, stroke, ellipse)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_cubic_bezier(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        cubic_bez: \u0026CubicBez,\r\n    ) {\r\n        self.draw(brush, transform, stroke, cubic_bez)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_quadratic_bezier(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        quad_bez: \u0026QuadBez,\r\n    ) {\r\n        self.draw(brush, transform, stroke, quad_bez)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_triangle(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        stroke: Option\u003c\u0026Stroke\u003e,\r\n        triangle: \u0026Triangle,\r\n    ) {\r\n        self.draw(brush, transform, stroke, triangle)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn draw_image(\u0026mut self, img: \u0026ImageBrush, transform: Option\u003cAffine\u003e, position: Vector2\u003cf32\u003e) {\r\n        let transform = transform\r\n            .unwrap_or_default()\r\n            .with_translation(Vec2::new(position.x as f64, position.y as f64));\r\n\r\n        self.scene.draw_image(img, transform);\r\n    }\r\n\r\n    fn draw_text(\r\n        \u0026mut self,\r\n        brush: \u0026Brush,\r\n        transform: Option\u003cAffine\u003e,\r\n        position: Vector2\u003cf32\u003e,\r\n        text: \u0026str,\r\n        hinting: bool,\r\n        font: \u0026FontData,\r\n        size: f32,\r\n        line_gap: f32,\r\n        max_width: f32,\r\n    ) {\r\n        let font_ref = FontRef::new(font.data.as_ref()).expect(\"Failed to load font ref\");\r\n\r\n        let location = font_ref.axes().location::\u003c\u0026[VariationSetting; 0]\u003e(\u0026[]);\r\n        let metrics = font_ref.metrics(Size::new(size), \u0026location);\r\n        let glyph_metrics = font_ref.glyph_metrics(Size::new(size), \u0026location);\r\n        let line_height = metrics.ascent + metrics.descent + metrics.leading;\r\n        let charmap = font_ref.charmap();\r\n        let max_pen_x = position.x + max_width;\r\n\r\n        let mut pen_x = position.x;\r\n        let mut pen_y = position.y + size;\r\n\r\n        // TODO: use char counting, but more performant than just `text.chars().count()`\r\n        let mut glyphs = Vec::with_capacity(text.len());\r\n\r\n        for word in text.split_inclusive(|c| [' ', '\\n'].contains(\u0026c)) {\r\n            if word.contains('\\n') {\r\n                pen_y += line_height + line_gap;\r\n                pen_x = position.x;\r\n                continue;\r\n            }\r\n\r\n            let word_width: f32 = word\r\n                .chars()\r\n                .filter_map(|c| {\r\n                    let gid = charmap.map(c)?;\r\n                    glyph_metrics.advance_width(gid)\r\n                })\r\n                .sum();\r\n\r\n            if pen_x + word_width \u003e max_pen_x {\r\n                pen_y += line_height + line_gap;\r\n                pen_x = position.x;\r\n            }\r\n\r\n            for c in word.chars() {\r\n                if c == ' ' {\r\n                    pen_x += glyph_metrics\r\n                        .advance_width(charmap.map(' ').unwrap_or_default())\r\n                        .unwrap_or_default();\r\n                    continue;\r\n                }\r\n\r\n                let gid = charmap.map(c).unwrap_or_default();\r\n                let advance = glyph_metrics.advance_width(gid).unwrap_or_default();\r\n\r\n                glyphs.push(Glyph {\r\n                    id: gid.to_u32(),\r\n                    x: pen_x,\r\n                    y: pen_y,\r\n                });\r\n\r\n                pen_x += advance;\r\n            }\r\n        }\r\n\r\n        self.scene\r\n            .draw_glyphs(font)\r\n            .font_size(size)\r\n            .transform(transform.unwrap_or_default())\r\n            .brush(brush)\r\n            .normalized_coords(bytemuck::cast_slice(location.coords()))\r\n            .hint(hinting)\r\n            .draw(\u0026peniko::Style::Fill(Fill::NonZero), glyphs.into_iter());\r\n    }\r\n\r\n    #[inline(always)]\r\n    #[cfg(feature = \"svg\")]\r\n    fn draw_svg(\u0026mut self, svg: \u0026usvg::Tree, affine: Option\u003cAffine\u003e) {\r\n        let mut scene = vello::Scene::new();\r\n\r\n        vello_svg::append_tree(\u0026mut scene, svg);\r\n\r\n        self.scene.append(\u0026scene, affine);\r\n    }\r\n}\r\n","traces":[{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":190,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":260,"address":[],"length":0,"stats":{"Line":0}},{"line":267,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":280,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":292,"address":[],"length":0,"stats":{"Line":0}},{"line":293,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":298,"address":[],"length":0,"stats":{"Line":0}},{"line":302,"address":[],"length":0,"stats":{"Line":0}},{"line":303,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":309,"address":[],"length":0,"stats":{"Line":0}},{"line":311,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":0}},{"line":322,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":348,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":359,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":370,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":388,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":403,"address":[],"length":0,"stats":{"Line":0}},{"line":404,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":411,"address":[],"length":0,"stats":{"Line":0}},{"line":423,"address":[],"length":0,"stats":{"Line":0}},{"line":425,"address":[],"length":0,"stats":{"Line":0}},{"line":426,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":430,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":433,"address":[],"length":0,"stats":{"Line":0}},{"line":436,"address":[],"length":0,"stats":{"Line":0}},{"line":438,"address":[],"length":0,"stats":{"Line":0}},{"line":439,"address":[],"length":0,"stats":{"Line":0}},{"line":440,"address":[],"length":0,"stats":{"Line":0}},{"line":441,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":0}},{"line":445,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":448,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":453,"address":[],"length":0,"stats":{"Line":0}},{"line":454,"address":[],"length":0,"stats":{"Line":0}},{"line":455,"address":[],"length":0,"stats":{"Line":0}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":460,"address":[],"length":0,"stats":{"Line":0}},{"line":461,"address":[],"length":0,"stats":{"Line":0}},{"line":462,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":466,"address":[],"length":0,"stats":{"Line":0}},{"line":467,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":470,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":472,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":479,"address":[],"length":0,"stats":{"Line":0}},{"line":480,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":482,"address":[],"length":0,"stats":{"Line":0}},{"line":483,"address":[],"length":0,"stats":{"Line":0}},{"line":484,"address":[],"length":0,"stats":{"Line":0}},{"line":485,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":494,"address":[],"length":0,"stats":{"Line":0}},{"line":496,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":180},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-core","src","widget.rs"],"content":"use crate::app::context::AppContext;\r\nuse crate::app::info::AppInfo;\r\nuse crate::app::update::Update;\r\nuse crate::layout::{LayoutNode, LayoutStyle, StyleNode};\r\nuse crate::signal::MaybeSignal;\r\nuse crate::vgi::Scene;\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\n\r\n/// A boxed widget.\r\npub type BoxedWidget = Box\u003cdyn Widget\u003e;\r\n\r\n/// The base trait for all widgets.\r\npub trait Widget {\r\n    /// Render the widget to the canvas.\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        context: AppContext,\r\n    );\r\n\r\n    /// Return the layout style node for layout computation.\r\n    fn layout_style(\u0026self) -\u003e StyleNode;\r\n\r\n    /// Update the widget state with given info and layout. Returns if the app should be updated.\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, context: AppContext, info: \u0026AppInfo) -\u003e Update;\r\n\r\n    /// Return the widget id.\r\n    fn widget_id(\u0026self) -\u003e WidgetId;\r\n}\r\n\r\n/// An extension trait for widgets with a single child widget.\r\npub trait WidgetChildExt {\r\n    /// Sets the child widget of the widget.\r\n    fn set_child(\u0026mut self, child: impl Widget + 'static);\r\n\r\n    /// Sets the child widget of the widget and returns self.\r\n    #[inline(always)]\r\n    fn with_child(mut self, child: impl Widget + 'static) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self.set_child(child);\r\n        self\r\n    }\r\n}\r\n\r\n/// An extension trait for widgets with multiple child widgets.\r\npub trait WidgetChildrenExt {\r\n    /// Sets the child widgets of the widget.\r\n    fn set_children(\u0026mut self, children: Vec\u003cBoxedWidget\u003e);\r\n\r\n    /// Sets the child widgets of the widget and returns self.\r\n    #[inline(always)]\r\n    fn with_children(mut self, children: Vec\u003cBoxedWidget\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self.set_children(children);\r\n        self\r\n    }\r\n\r\n    /// Adds a child widget to the widget.\r\n    fn add_child(\u0026mut self, child: impl Widget + 'static);\r\n\r\n    /// Adds a child widget to the widget and returns self.\r\n    #[inline(always)]\r\n    fn with_child(mut self, child: impl Widget + 'static) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self.add_child(child);\r\n        self\r\n    }\r\n}\r\n\r\n/// An extension trait for widgets with a layout style.\r\npub trait WidgetLayoutExt {\r\n    /// Sets the layout style of the widget.\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e);\r\n\r\n    /// Sets the layout style of the widget and returns self.\r\n    #[inline(always)]\r\n    fn with_layout_style(mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) -\u003e Self\r\n    where\r\n        Self: Sized,\r\n    {\r\n        self.set_layout_style(layout_style);\r\n        self\r\n    }\r\n}\r\n","traces":[{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":12},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-macros","src","assets.rs"],"content":"use proc_macro2::TokenStream;\r\nuse quote::quote;\r\nuse std::path::{Path, PathBuf};\r\nuse syn::{Expr, Lit};\r\n\r\n#[inline]\r\npub fn static_asset(input: TokenStream) -\u003e TokenStream {\r\n    let input: Expr = syn::parse2(input).expect(\"failed to parse input\");\r\n\r\n    match input {\r\n        Expr::Lit(expr_lit) =\u003e match expr_lit.lit {\r\n            Lit::Str(lit) =\u003e {\r\n                let lit = lit.value();\r\n                let source = Path::new(\u0026lit);\r\n\r\n                let file_name = source\r\n                    .file_name()\r\n                    .expect(\"Failed to get file name\")\r\n                    .to_str()\r\n                    .unwrap();\r\n\r\n                let data = if source.starts_with(\"http\") || source.starts_with(\"\") {\r\n                    std::fs::read_to_string(source).expect(\"Failed to read file\")\r\n                } else {\r\n                    get_or_create_asset(Path::new(\"icons\"), file_name, || {\r\n                        ureq::get(source.to_str().unwrap())\r\n                            .call()\r\n                            .expect(\"Failed to download file\")\r\n                            .into_body()\r\n                            .read_to_string()\r\n                            .expect(\"Failed to read file\")\r\n                    })\r\n                };\r\n\r\n                let data = data.as_str();\r\n\r\n                quote! {\r\n                    #data\r\n                }\r\n            },\r\n\r\n            _ =\u003e panic!(\"Expected string literal\"),\r\n        },\r\n\r\n        _ =\u003e panic!(\"Expected literal\"),\r\n    }\r\n}\r\n\r\npub fn temp_assets_folder() -\u003e PathBuf {\r\n    let path = std::env::temp_dir().join(\"maycoon-compilation-assets\");\r\n\r\n    if !path.exists() {\r\n        std::fs::create_dir_all(\u0026path).expect(\"failed to create static assets directory\");\r\n    }\r\n\r\n    path\r\n}\r\n\r\npub fn get_or_create_asset(path: \u0026Path, name: \u0026str, or_create: impl FnOnce() -\u003e String) -\u003e String {\r\n    let asset_folder = temp_assets_folder().join(path);\r\n\r\n    if !asset_folder.exists() {\r\n        std::fs::create_dir_all(\u0026asset_folder).expect(\"failed to create static assets directory\");\r\n    }\r\n\r\n    let asset_path = asset_folder.join(name);\r\n\r\n    if asset_path.exists() {\r\n        std::fs::read_to_string(\u0026asset_path).expect(\"failed to read static asset\")\r\n    } else {\r\n        let data = or_create();\r\n\r\n        std::fs::write(\u0026asset_path, \u0026data).expect(\"failed to write static asset\");\r\n\r\n        data\r\n    }\r\n}\r\n","traces":[{"line":7,"address":[],"length":0,"stats":{"Line":0}},{"line":8,"address":[],"length":0,"stats":{"Line":0}},{"line":10,"address":[],"length":0,"stats":{"Line":0}},{"line":11,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":0}},{"line":13,"address":[],"length":0,"stats":{"Line":0}},{"line":14,"address":[],"length":0,"stats":{"Line":0}},{"line":16,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":37},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-macros","src","lib.rs"],"content":"#![warn(missing_docs)]\r\n\r\n//! Macros for Maycoon =\u003e See `maycoon` crate.\r\n//!\r\n//! Contains procedural macros.\r\n\r\nmod assets;\r\nmod svg_icon;\r\n\r\n/// Create a new `SvgIcon` from the given SVG source.\r\n///\r\n/// This is equivalent to `SvgIcon::new(static_asset!(url))` and works as a convenience macro.\r\n#[proc_macro]\r\npub fn svg_icon(input: proc_macro::TokenStream) -\u003e proc_macro::TokenStream {\r\n    proc_macro::TokenStream::from(svg_icon::svg_icon(proc_macro2::TokenStream::from(input)))\r\n}\r\n\r\n/// Creates a static asset from the given path/url and caches the file for faster compilation times.\r\n///\r\n/// This will either read a file path or download the file from the given URL using [ureq].\r\n/// After the data has been retrieved, it will be saved as a static asset file in a temporary directory (e.g. `%temp%` on windows).\r\n/// When re-executing this macro, the file can be re-loaded for faster compilation times.\r\n#[proc_macro]\r\npub fn static_asset(input: proc_macro::TokenStream) -\u003e proc_macro::TokenStream {\r\n    proc_macro::TokenStream::from(assets::static_asset(proc_macro2::TokenStream::from(input)))\r\n}\r\n","traces":[{"line":14,"address":[],"length":0,"stats":{"Line":0}},{"line":15,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":4},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-macros","src","svg_icon.rs"],"content":"use crate::assets;\r\nuse proc_macro2::TokenStream;\r\nuse quote::quote;\r\nuse syn::LitStr;\r\n\r\n#[inline]\r\npub fn svg_icon(input: TokenStream) -\u003e TokenStream {\r\n    let data = syn::parse2::\u003cLitStr\u003e(assets::static_asset(input))\r\n        .expect(\"failed to parse input\")\r\n        .value();\r\n\r\n    quote! {\r\n        maycoon::widgets::icon::svg::SvgIcon::new(#data).expect(\"failed to create SVG icon\")\r\n    }\r\n}\r\n","traces":[{"line":7,"address":[],"length":0,"stats":{"Line":0}},{"line":8,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":0}},{"line":13,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":4},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-theme","src","globals.rs"],"content":"/// Global theme values for all widgets to use.\r\n///\r\n/// This may be used to invert the text color of widgets that are inside a container.\r\n#[derive(Copy, Clone, Default, Debug, PartialEq, Eq)]\r\npub struct Globals {\r\n    /// Invert text color.\r\n    pub invert_text_color: bool,\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-theme","src","id.rs"],"content":"use std::fmt::{Debug, Display, Formatter};\r\n\r\n/// An identifier for a widget. This is not for instantiated widgets, but for the widget types in general.\r\n/// It contains a namespace, which should be the crate name and the id of the widget.\r\n///\r\n/// ```\r\n/// # use maycoon_theme::id::WidgetId;\r\n/// WidgetId::new(\"fancy_text_widget\", \"FancyText\");\r\n/// ```\r\n#[derive(Debug, Copy, Clone, PartialEq, PartialOrd, Eq, Ord, Hash)]\r\npub struct WidgetId {\r\n    namespace: \u0026'static str,\r\n    id: \u0026'static str,\r\n}\r\n\r\nimpl WidgetId {\r\n    /// Create a new widget id by a namespace and custom id.\r\n    /// The namespace should be the crate name and the id should be the widget type name.\r\n    ///\r\n    /// Example:\r\n    /// ```\r\n    /// # use maycoon_theme::id::WidgetId;\r\n    /// let id = WidgetId::new(\"my_crate\", \"MyWidget\");\r\n    /// ```\r\n    #[inline(always)]\r\n    pub const fn new(namespace: \u0026'static str, id: \u0026'static str) -\u003e Self {\r\n        Self { namespace, id }\r\n    }\r\n\r\n    /// Returns the namespace of the widget id.\r\n    #[inline(always)]\r\n    pub const fn namespace(\u0026self) -\u003e \u0026'static str {\r\n        self.namespace\r\n    }\r\n\r\n    /// Returns the actual widget id.\r\n    #[inline(always)]\r\n    pub const fn id(\u0026self) -\u003e \u0026'static str {\r\n        self.id\r\n    }\r\n}\r\n\r\nimpl Display for WidgetId {\r\n    #[inline(always)]\r\n    fn fmt(\u0026self, f: \u0026mut Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\r\n        // TODO: use const formatting/writing when const format is stable\r\n        write!(f, \"{}:{}\", self.namespace, self.id)\r\n    }\r\n}\r\n","traces":[{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":7},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-theme","src","lib.rs"],"content":"#![warn(missing_docs)]\r\n\r\n//! Theme/Styling library for Maycoon =\u003e See `maycoon` crate.\r\n//!\r\n//! Contains themes and widget styles.\r\n\r\n/// Contains the [globals::Globals] struct.\r\npub mod globals;\r\n/// Contains the [id::WidgetId] struct.\r\npub mod id;\r\n/// Contains styling structures.\r\npub mod style;\r\n/// Contains the [theme::Theme] trait and built-in themes.\r\npub mod theme;\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-theme","src","style.rs"],"content":"use peniko::{Brush, Color, Gradient};\r\nuse rpds::HashTrieMap;\r\n\r\n/// Styling map for defining widget appearance.\r\n#[derive(Clone, Debug)]\r\npub struct Style {\r\n    map: HashTrieMap\u003c\u0026'static str, StyleVal\u003e,\r\n}\r\n\r\nimpl Style {\r\n    /// Create a new empty style.\r\n    #[inline(always)]\r\n    pub fn new() -\u003e Self {\r\n        Self {\r\n            map: HashTrieMap::new(),\r\n        }\r\n    }\r\n\r\n    /// Create a style from an array of strings and style values.\r\n    #[inline(always)]\r\n    pub fn from_values(values: impl IntoIterator\u003cItem = (\u0026'static str, StyleVal)\u003e) -\u003e Self {\r\n        Self {\r\n            map: HashTrieMap::from_iter(values),\r\n        }\r\n    }\r\n\r\n    /// Insert a style value with the given name into the style map and return the new style.\r\n    #[inline(always)]\r\n    pub fn with_value(self, name: \u0026'static str, value: StyleVal) -\u003e Self {\r\n        Self {\r\n            map: self.map.insert(name, value),\r\n        }\r\n    }\r\n\r\n    /// Get a style value by name. Returns [None] if the value name does not exist.\r\n    #[inline(always)]\r\n    pub fn get(\u0026self, name: \u0026'static str) -\u003e Option\u003cStyleVal\u003e {\r\n        self.map.get(name).cloned()\r\n    }\r\n\r\n    /// Get a color style value by name. Returns [None] if the value name does not exist.\r\n    #[inline(always)]\r\n    pub fn get_color(\u0026self, name: \u0026'static str) -\u003e Option\u003cColor\u003e {\r\n        if let Some(val) = self.map.get(name) {\r\n            match val {\r\n                StyleVal::Color(color) =\u003e Some(*color),\r\n                _ =\u003e None,\r\n            }\r\n        } else {\r\n            None\r\n        }\r\n    }\r\n\r\n    /// Get a gradient style value by name. Returns [None] if the value name does not exist.\r\n    #[inline(always)]\r\n    pub fn get_gradient(\u0026self, name: \u0026'static str) -\u003e Option\u003cGradient\u003e {\r\n        if let Some(val) = self.map.get(name) {\r\n            match val {\r\n                StyleVal::Gradient(gradient) =\u003e Some(gradient.clone()),\r\n                _ =\u003e None,\r\n            }\r\n        } else {\r\n            None\r\n        }\r\n    }\r\n\r\n    /// Get a brush style value by name. Returns [None] if the value name does not exist.\r\n    #[inline(always)]\r\n    pub fn get_brush(\u0026self, name: \u0026'static str) -\u003e Option\u003cBrush\u003e {\r\n        if let Some(val) = self.map.get(name) {\r\n            match val {\r\n                StyleVal::Brush(brush) =\u003e Some(brush.clone()),\r\n                _ =\u003e None,\r\n            }\r\n        } else {\r\n            None\r\n        }\r\n    }\r\n\r\n    /// Get a float style value by name. Returns [None] if the value name does not exist.\r\n    #[inline(always)]\r\n    pub fn get_float(\u0026self, name: \u0026'static str) -\u003e Option\u003cf32\u003e {\r\n        if let Some(val) = self.map.get(name) {\r\n            match val {\r\n                StyleVal::Float(float) =\u003e Some(*float),\r\n                _ =\u003e None,\r\n            }\r\n        } else {\r\n            None\r\n        }\r\n    }\r\n\r\n    /// Get an int style value by name. Returns [None] if the value name does not exist.\r\n    #[inline(always)]\r\n    pub fn get_int(\u0026self, name: \u0026'static str) -\u003e Option\u003ci32\u003e {\r\n        if let Some(val) = self.map.get(name) {\r\n            match val {\r\n                StyleVal::Int(int) =\u003e Some(*int),\r\n                _ =\u003e None,\r\n            }\r\n        } else {\r\n            None\r\n        }\r\n    }\r\n\r\n    /// Get an unsized int style value by name. Returns [None] if the value name does not exist.\r\n    #[inline(always)]\r\n    pub fn get_uint(\u0026self, name: \u0026'static str) -\u003e Option\u003cu32\u003e {\r\n        if let Some(val) = self.map.get(name) {\r\n            match val {\r\n                StyleVal::UInt(uint) =\u003e Some(*uint),\r\n                _ =\u003e None,\r\n            }\r\n        } else {\r\n            None\r\n        }\r\n    }\r\n\r\n    /// Get a bool style value by name. Returns [None] if the value name does not exist.\r\n    #[inline(always)]\r\n    pub fn get_bool(\u0026self, name: \u0026'static str) -\u003e Option\u003cbool\u003e {\r\n        if let Some(val) = self.map.get(name) {\r\n            match val {\r\n                StyleVal::Bool(bool) =\u003e Some(*bool),\r\n                _ =\u003e None,\r\n            }\r\n        } else {\r\n            None\r\n        }\r\n    }\r\n}\r\n\r\nimpl Default for Style {\r\n    #[inline(always)]\r\n    fn default() -\u003e Self {\r\n        Self::new()\r\n    }\r\n}\r\n\r\n/// Default widget styles.\r\n#[derive(Clone, PartialEq, Debug)]\r\npub struct DefaultStyles {\r\n    text: DefaultTextStyles,\r\n    container: DefaultContainerStyles,\r\n    interactive: DefaultInteractiveStyles,\r\n}\r\n\r\nimpl DefaultStyles {\r\n    /// Create new default styles with given styles.\r\n    #[inline(always)]\r\n    pub const fn new(\r\n        text: DefaultTextStyles,\r\n        container: DefaultContainerStyles,\r\n        interactive: DefaultInteractiveStyles,\r\n    ) -\u003e Self {\r\n        Self {\r\n            text,\r\n            container,\r\n            interactive,\r\n        }\r\n    }\r\n\r\n    /// Get the default styles for text widgets.\r\n    #[inline(always)]\r\n    pub const fn text(\u0026self) -\u003e \u0026DefaultTextStyles {\r\n        \u0026self.text\r\n    }\r\n\r\n    /// Get the default styles for container widgets.\r\n    #[inline(always)]\r\n    pub const fn container(\u0026self) -\u003e \u0026DefaultContainerStyles {\r\n        \u0026self.container\r\n    }\r\n\r\n    /// Get the default styles for interactive widgets.\r\n    #[inline(always)]\r\n    pub const fn interactive(\u0026self) -\u003e \u0026DefaultInteractiveStyles {\r\n        \u0026self.interactive\r\n    }\r\n}\r\n\r\n/// The default text widget styles.\r\n#[derive(Clone, PartialEq, Debug)]\r\npub struct DefaultTextStyles {\r\n    foreground: Color,\r\n    background: Color,\r\n}\r\n\r\nimpl DefaultTextStyles {\r\n    /// Create new default text styles with given colors.\r\n    #[inline(always)]\r\n    pub const fn new(foreground: Color, background: Color) -\u003e Self {\r\n        Self {\r\n            foreground,\r\n            background,\r\n        }\r\n    }\r\n\r\n    /// Get the default foreground color.\r\n    #[inline(always)]\r\n    pub const fn foreground(\u0026self) -\u003e Color {\r\n        self.foreground\r\n    }\r\n\r\n    /// Get the default background color.\r\n    #[inline(always)]\r\n    pub const fn background(\u0026self) -\u003e Color {\r\n        self.background\r\n    }\r\n}\r\n\r\n/// The default container widget styles.\r\n#[derive(Clone, PartialEq, Debug)]\r\npub struct DefaultContainerStyles {\r\n    foreground: Color,\r\n    background: Color,\r\n}\r\n\r\nimpl DefaultContainerStyles {\r\n    /// Create new default container styles with given colors.\r\n    #[inline(always)]\r\n    pub const fn new(foreground: Color, background: Color) -\u003e Self {\r\n        Self {\r\n            foreground,\r\n            background,\r\n        }\r\n    }\r\n\r\n    /// Get the default foreground color.\r\n    #[inline(always)]\r\n    pub const fn foreground(\u0026self) -\u003e Color {\r\n        self.foreground\r\n    }\r\n\r\n    /// Get the default background color.\r\n    #[inline(always)]\r\n    pub const fn background(\u0026self) -\u003e Color {\r\n        self.background\r\n    }\r\n}\r\n\r\n/// The default interactive widget styles.\r\n#[derive(Clone, PartialEq, Debug)]\r\npub struct DefaultInteractiveStyles {\r\n    active: Color,\r\n    inactive: Color,\r\n    hover: Color,\r\n    disabled: Color,\r\n}\r\n\r\nimpl DefaultInteractiveStyles {\r\n    /// Create new default interactive styles with given colors.\r\n    #[inline(always)]\r\n    pub const fn new(active: Color, inactive: Color, hover: Color, disabled: Color) -\u003e Self {\r\n        Self {\r\n            active,\r\n            inactive,\r\n            hover,\r\n            disabled,\r\n        }\r\n    }\r\n\r\n    /// Get the default active widget color.\r\n    #[inline(always)]\r\n    pub const fn active(\u0026self) -\u003e Color {\r\n        self.active\r\n    }\r\n\r\n    /// Get the default inactive widget color.\r\n    #[inline(always)]\r\n    pub const fn inactive(\u0026self) -\u003e Color {\r\n        self.inactive\r\n    }\r\n\r\n    /// Get the default on-hover widget color.\r\n    #[inline(always)]\r\n    pub const fn hover(\u0026self) -\u003e Color {\r\n        self.hover\r\n    }\r\n\r\n    /// Get the default disabled widget color.\r\n    #[inline(always)]\r\n    pub const fn disabled(\u0026self) -\u003e Color {\r\n        self.disabled\r\n    }\r\n}\r\n\r\n/// A style value.\r\n#[derive(Clone, Debug)]\r\npub enum StyleVal {\r\n    /// A color style value.\r\n    Color(Color),\r\n    /// A gradient style value.\r\n    Gradient(Gradient),\r\n    /// A brush style value.\r\n    Brush(Brush),\r\n    /// A float style value.\r\n    Float(f32),\r\n    /// An int style value.\r\n    Int(i32),\r\n    /// An unsized int style value.\r\n    UInt(u32),\r\n    /// A bool style value.\r\n    Bool(bool),\r\n}\r\n","traces":[{"line":13,"address":[],"length":0,"stats":{"Line":0}},{"line":15,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":254,"address":[],"length":0,"stats":{"Line":0}},{"line":265,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":277,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":78},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-theme","src","theme","celeste.rs"],"content":"use peniko::{Color, color::palette};\r\n\r\nuse crate::globals::Globals;\r\nuse crate::id::WidgetId;\r\nuse crate::style::{\r\n    DefaultContainerStyles, DefaultInteractiveStyles, DefaultStyles, DefaultTextStyles, Style,\r\n};\r\nuse crate::theme::Theme;\r\n\r\n/// A smooth and minimalistic theme with a cold blue and purple touch.\r\n#[derive(Debug, Clone)]\r\npub enum CelesteTheme {\r\n    /// Use [CelesteTheme::light] to use the light Celeste theme.\r\n    Light(Globals),\r\n}\r\n\r\nimpl CelesteTheme {\r\n    /// The Light Celeste Theme.\r\n    pub fn light() -\u003e Self {\r\n        Self::Light(Globals::default())\r\n    }\r\n}\r\n\r\nimpl Default for CelesteTheme {\r\n    fn default() -\u003e Self {\r\n        Self::light()\r\n    }\r\n}\r\n\r\nimpl Theme for CelesteTheme {\r\n    fn of(\u0026self, id: WidgetId) -\u003e Option\u003cStyle\u003e {\r\n        match id.namespace() {\r\n            \"maycoon-widgets\" =\u003e match id.id() {\r\n                \"Text\" =\u003e Some(Style::from_values(light::TEXT)),\r\n                \"Button\" =\u003e Some(Style::from_values(light::BUTTON)),\r\n                \"Checkbox\" =\u003e Some(Style::from_values(light::CHECKBOX)),\r\n                \"Slider\" =\u003e Some(Style::from_values(light::SLIDER)),\r\n                _ =\u003e None,\r\n            },\r\n            _ =\u003e None,\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn defaults(\u0026self) -\u003e DefaultStyles {\r\n        DefaultStyles::new(\r\n            DefaultTextStyles::new(palette::css::BLACK, palette::css::WHITE_SMOKE),\r\n            DefaultContainerStyles::new(palette::css::ANTIQUE_WHITE, palette::css::WHITE),\r\n            DefaultInteractiveStyles::new(\r\n                Color::from_rgb8(130, 150, 230),\r\n                Color::from_rgb8(150, 170, 250),\r\n                Color::from_rgb8(140, 160, 240),\r\n                Color::from_rgb8(110, 110, 110),\r\n            ),\r\n        )\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn window_background(\u0026self) -\u003e Color {\r\n        Color::WHITE\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn globals(\u0026self) -\u003e \u0026Globals {\r\n        match \u0026self {\r\n            CelesteTheme::Light(globals) =\u003e globals,\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn globals_mut(\u0026mut self) -\u003e \u0026mut Globals {\r\n        match self {\r\n            CelesteTheme::Light(globals) =\u003e globals,\r\n        }\r\n    }\r\n}\r\n\r\nmod light {\r\n    use crate::style::StyleVal;\r\n    use peniko::Color;\r\n    use peniko::color::palette;\r\n\r\n    pub const TEXT: [(\u0026str, StyleVal); 2] = [\r\n        (\"color\", StyleVal::Color(palette::css::BLACK)),\r\n        (\"color_invert\", StyleVal::Color(palette::css::WHITE)),\r\n    ];\r\n\r\n    pub const BUTTON: [(\u0026str, StyleVal); 3] = [\r\n        (\r\n            \"color_idle\",\r\n            StyleVal::Color(Color::from_rgb8(150, 170, 250)),\r\n        ),\r\n        (\r\n            \"color_pressed\",\r\n            StyleVal::Color(Color::from_rgb8(130, 150, 230)),\r\n        ),\r\n        (\r\n            \"color_hovered\",\r\n            StyleVal::Color(Color::from_rgb8(140, 160, 240)),\r\n        ),\r\n    ];\r\n\r\n    pub const CHECKBOX: [(\u0026str, StyleVal); 2] = [\r\n        (\r\n            \"color_checked\",\r\n            StyleVal::Color(Color::from_rgb8(130, 130, 230)),\r\n        ),\r\n        (\r\n            \"color_unchecked\",\r\n            StyleVal::Color(Color::from_rgb8(170, 170, 250)),\r\n        ),\r\n    ];\r\n\r\n    pub const SLIDER: [(\u0026str, StyleVal); 2] = [\r\n        (\"color\", StyleVal::Color(Color::from_rgb8(130, 130, 230))),\r\n        (\r\n            \"color_ball\",\r\n            StyleVal::Color(Color::from_rgb8(170, 170, 250)),\r\n        ),\r\n    ];\r\n}\r\n","traces":[{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":29},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-theme","src","theme","dummy.rs"],"content":"use crate::globals::Globals;\r\nuse crate::id::WidgetId;\r\nuse crate::style::{\r\n    DefaultContainerStyles, DefaultInteractiveStyles, DefaultStyles, DefaultTextStyles, Style,\r\n};\r\nuse crate::theme::Theme;\r\nuse peniko::Color;\r\n\r\n/// A dummy theme that only returns [None] or [Color::WHITE].\r\n///\r\n/// Useful for testing.\r\n#[derive(Debug, Copy, Clone, Default)]\r\npub struct DummyTheme(Globals);\r\n\r\nimpl Theme for DummyTheme {\r\n    fn of(\u0026self, _id: WidgetId) -\u003e Option\u003cStyle\u003e {\r\n        None\r\n    }\r\n\r\n    fn defaults(\u0026self) -\u003e DefaultStyles {\r\n        DefaultStyles::new(\r\n            DefaultTextStyles::new(Color::WHITE, Color::WHITE),\r\n            DefaultContainerStyles::new(Color::WHITE, Color::WHITE),\r\n            DefaultInteractiveStyles::new(Color::WHITE, Color::WHITE, Color::WHITE, Color::WHITE),\r\n        )\r\n    }\r\n\r\n    fn window_background(\u0026self) -\u003e Color {\r\n        Color::WHITE\r\n    }\r\n\r\n    fn globals(\u0026self) -\u003e \u0026Globals {\r\n        \u0026self.0\r\n    }\r\n\r\n    fn globals_mut(\u0026mut self) -\u003e \u0026mut Globals {\r\n        \u0026mut self.0\r\n    }\r\n}\r\n","traces":[{"line":16,"address":[],"length":0,"stats":{"Line":0}},{"line":17,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":12},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-theme","src","theme","mod.rs"],"content":"use peniko::Color;\r\nuse std::fmt::Debug;\r\n\r\nuse crate::globals::Globals;\r\nuse crate::id::WidgetId;\r\nuse crate::style::{DefaultStyles, Style};\r\n\r\n/// The Celeste Theme.\r\npub mod celeste;\r\n\r\n/// A dummy theme for testing purposes.\r\npub mod dummy;\r\n\r\n/// Base trait for all themes.\r\npub trait Theme: Debug + 'static {\r\n    /// Return the [Style] of the given widget using its ID.\r\n    /// Returns [None] if the theme does not have styles for the given widget.\r\n    /// In that case, you should use [Theme::defaults] to get widget style defaults.\r\n    fn of(\u0026self, id: WidgetId) -\u003e Option\u003cStyle\u003e;\r\n    /// Get the default widget styles.\r\n    fn defaults(\u0026self) -\u003e DefaultStyles;\r\n    /// Get the background color of the window.\r\n    fn window_background(\u0026self) -\u003e Color;\r\n    /// Get global style values.\r\n    fn globals(\u0026self) -\u003e \u0026Globals;\r\n    /// Get mutable global style values.\r\n    fn globals_mut(\u0026mut self) -\u003e \u0026mut Globals;\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","build.rs"],"content":"fn main() {\r\n    cfg_aliases::cfg_aliases! {\r\n        web: { target_arch = \"wasm32\" },\r\n        native: { not(target_arch = \"wasm32\") },\r\n    }\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","animator.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout::{LayoutNode, StyleNode};\r\nuse maycoon_core::vgi::Scene;\r\nuse maycoon_core::widget::Widget;\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse std::time::{Duration, Instant};\r\n\r\n/// A widget that animates another widget using an animation function.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Animator`.\r\npub struct Animator\u003cW: Widget, A: Fn(\u0026mut W, f32) -\u003e Update\u003e {\r\n    start: Instant,\r\n    duration: Duration,\r\n    widget: W,\r\n    animation: A,\r\n}\r\n\r\nimpl\u003cW: Widget, A: Fn(\u0026mut W, f32) -\u003e Update\u003e Animator\u003cW, A\u003e {\r\n    /// Creates a new animator widget with the given duration, child widget and animation function.\r\n    ///\r\n    /// The animation function is called with a value between `0.0` and `1.0` based on the elapsed time since the start of the animation\r\n    /// and the total duration of the animation.\r\n    #[inline(always)]\r\n    pub fn new(duration: Duration, widget: W, animation: A) -\u003e Self {\r\n        Self {\r\n            start: Instant::now(),\r\n            duration,\r\n            widget,\r\n            animation,\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cW: Widget, A: Fn(\u0026mut W, f32) -\u003e Update\u003e Widget for Animator\u003cW, A\u003e {\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        context: AppContext,\r\n    ) {\r\n        self.widget.render(scene, theme, layout_node, info, context);\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        self.widget.layout_style()\r\n    }\r\n\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, context: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        let elapsed = self.start.elapsed();\r\n\r\n        let mut update = self.widget.update(layout, context, info);\r\n\r\n        if elapsed \u003c self.duration {\r\n            let f = elapsed.as_secs_f32() / self.duration.as_secs_f32();\r\n\r\n            update.insert((self.animation)(\u0026mut self.widget, f));\r\n        }\r\n\r\n        update\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Animator\")\r\n    }\r\n}\r\n","traces":[{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":15},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","button.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout;\r\nuse maycoon_core::layout::{LayoutNode, LayoutStyle, LengthPercentage, StyleNode};\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::kurbo::{Affine, Rect, RoundedRect, RoundedRectRadii, Vec2};\r\nuse maycoon_core::vgi::{Brush, Scene};\r\nuse maycoon_core::widget::{BoxedWidget, Widget, WidgetChildExt, WidgetLayoutExt};\r\nuse maycoon_core::window::{ElementState, MouseButton};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\n\r\n/// An interactive area with a child widget that runs a closure when pressed.\r\n///\r\n/// See the [counter](https://github.com/maycoon-ui/maycoon/blob/master/examples/counter/src/main.rs) example for how to use it in practice.\r\n///\r\n/// ### Theming\r\n/// Styling the button require following properties:\r\n/// - `color_pressed` -  The color of the button when pressed.\r\n/// - `color_idle` - The color of the button when not pressed and not hovered (idling).\r\n/// - `color_hovered` - The color of the button when hovered on.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Button`.\r\npub struct Button {\r\n    child: BoxedWidget,\r\n    state: ButtonState,\r\n    on_pressed: MaybeSignal\u003cUpdate\u003e,\r\n    layout_style: MaybeSignal\u003cLayoutStyle\u003e,\r\n}\r\n\r\nimpl Button {\r\n    /// Create a new button with the given child widget.\r\n    #[inline(always)]\r\n    pub fn new(child: impl Widget + 'static) -\u003e Self {\r\n        Self {\r\n            child: Box::new(child),\r\n            state: ButtonState::Idle,\r\n            on_pressed: MaybeSignal::value(Update::empty()),\r\n            layout_style: LayoutStyle {\r\n                padding: layout::Rect::\u003cLengthPercentage\u003e {\r\n                    left: LengthPercentage::length(12.0),\r\n                    right: LengthPercentage::length(12.0),\r\n                    top: LengthPercentage::length(2.0),\r\n                    bottom: LengthPercentage::length(10.0),\r\n                },\r\n                ..Default::default()\r\n            }\r\n            .into(),\r\n        }\r\n    }\r\n\r\n    /// Sets the function to be called when the button is pressed.\r\n    #[inline(always)]\r\n    pub fn with_on_pressed(mut self, on_pressed: impl Into\u003cMaybeSignal\u003cUpdate\u003e\u003e) -\u003e Self {\r\n        self.on_pressed = on_pressed.into();\r\n        self\r\n    }\r\n}\r\n\r\nimpl WidgetChildExt for Button {\r\n    #[inline(always)]\r\n    fn set_child(\u0026mut self, child: impl Widget + 'static) {\r\n        self.child = Box::new(child);\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Button {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.layout_style = layout_style.into();\r\n    }\r\n}\r\n\r\nimpl Widget for Button {\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        context: AppContext,\r\n    ) {\r\n        let brush = if let Some(style) = theme.of(self.widget_id()) {\r\n            match self.state {\r\n                ButtonState::Idle =\u003e Brush::Solid(style.get_color(\"color_idle\").unwrap()),\r\n                ButtonState::Hovered =\u003e Brush::Solid(style.get_color(\"color_hovered\").unwrap()),\r\n                ButtonState::Pressed =\u003e Brush::Solid(style.get_color(\"color_pressed\").unwrap()),\r\n                ButtonState::Released =\u003e Brush::Solid(style.get_color(\"color_hovered\").unwrap()),\r\n            }\r\n        } else {\r\n            Brush::Solid(match self.state {\r\n                ButtonState::Idle =\u003e theme.defaults().interactive().inactive(),\r\n                ButtonState::Hovered =\u003e theme.defaults().interactive().hover(),\r\n                ButtonState::Pressed =\u003e theme.defaults().interactive().active(),\r\n                ButtonState::Released =\u003e theme.defaults().interactive().hover(),\r\n            })\r\n        };\r\n\r\n        scene.draw_rounded_rect(\r\n            \u0026brush,\r\n            None,\r\n            None,\r\n            \u0026RoundedRect::from_rect(\r\n                Rect::new(\r\n                    layout_node.layout.location.x as f64,\r\n                    layout_node.layout.location.y as f64,\r\n                    (layout_node.layout.location.x + layout_node.layout.size.width) as f64,\r\n                    (layout_node.layout.location.y + layout_node.layout.size.height) as f64,\r\n                ),\r\n                RoundedRectRadii::from_single_radius(10.0),\r\n            ),\r\n        );\r\n\r\n        {\r\n            theme.globals_mut().invert_text_color = true;\r\n\r\n            let mut child_scene = scene.dyn_clone();\r\n            child_scene.reset();\r\n\r\n            self.child.render(\r\n                child_scene.as_mut(),\r\n                theme,\r\n                \u0026layout_node.children[0],\r\n                info,\r\n                context,\r\n            );\r\n\r\n            scene.append(\r\n                child_scene.as_ref(),\r\n                Some(Affine::translate(Vec2::new(\r\n                    layout_node.layout.location.x as f64,\r\n                    layout_node.layout.location.y as f64,\r\n                ))),\r\n            );\r\n\r\n            theme.globals_mut().invert_text_color = false;\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        StyleNode {\r\n            style: self.layout_style.get().clone(),\r\n            children: vec![self.child.layout_style()],\r\n        }\r\n    }\r\n\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, _: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        let mut update = Update::empty();\r\n        let old_state = self.state;\r\n\r\n        // check for hovering\r\n        if let Some(cursor) = info.cursor_pos\r\n            \u0026\u0026 layout::intersects(cursor, \u0026layout.layout)\r\n        {\r\n            // fixes state going to hover if the button is pressed but not yet released\r\n            if self.state != ButtonState::Pressed {\r\n                self.state = ButtonState::Hovered;\r\n            }\r\n\r\n            // check for click\r\n            for (_, btn, el) in \u0026info.buttons {\r\n                if *btn == MouseButton::Left {\r\n                    match el {\r\n                        ElementState::Pressed =\u003e {\r\n                            self.state = ButtonState::Pressed;\r\n                        },\r\n\r\n                        // actually fire the event if the button is released\r\n                        ElementState::Released =\u003e {\r\n                            self.state = ButtonState::Released;\r\n                            update |= *self.on_pressed.get();\r\n                        },\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            // cursor is not in window, so button is idle\r\n            self.state = ButtonState::Idle;\r\n        }\r\n\r\n        // update on state change, due to re-coloring\r\n        if old_state != self.state {\r\n            update |= Update::DRAW;\r\n        }\r\n\r\n        update\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Button\")\r\n    }\r\n}\r\n\r\n/// The internal state of the button.\r\n#[derive(Copy, Clone, Eq, PartialEq, Debug)]\r\npub enum ButtonState {\r\n    /// The button is idling (inactive).\r\n    Idle,\r\n    /// The cursor is hovering over the button.\r\n    Hovered,\r\n    /// The cursor is hovering over the button and the left click button is pressed.\r\n    Pressed,\r\n    /// The cursor is hovering over the button and the left click button is released.\r\n    /// This is when the `on_pressed` function is called.\r\n    Released,\r\n}\r\n","traces":[{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":73},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","canvas.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout::{LayoutNode, LayoutStyle, StyleNode};\r\nuse maycoon_core::vgi::Scene;\r\nuse maycoon_core::widget::Widget;\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\n\r\n/// A canvas widget to directly draw to the screen.\r\n///\r\n/// This is a very simplified version of \"your own Widget\" and you should only use it for simple cases.\r\n///\r\n/// ### Theming\r\n/// The canvas cannot be themed, since it does not draw something on itself.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Canvas`.\r\npub struct Canvas {\r\n    painter: Box\u003cdyn FnMut(\u0026mut dyn Scene, \u0026AppInfo)\u003e,\r\n}\r\n\r\nimpl Canvas {\r\n    /// Create a new Canvas widget from a painter function.\r\n    #[inline(always)]\r\n    pub fn new(painter: impl FnMut(\u0026mut dyn Scene, \u0026AppInfo) + 'static) -\u003e Self {\r\n        Self {\r\n            painter: Box::new(painter),\r\n        }\r\n    }\r\n\r\n    /// Set a painter function and return itself.\r\n    #[inline(always)]\r\n    pub fn with_painter(mut self, painter: impl FnMut(\u0026mut dyn Scene, \u0026AppInfo) + 'static) -\u003e Self {\r\n        self.painter = Box::new(painter);\r\n        self\r\n    }\r\n}\r\n\r\nimpl Widget for Canvas {\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        _: \u0026mut dyn Theme,\r\n        _: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        _: AppContext,\r\n    ) {\r\n        let mut canvas = scene.dyn_clone();\r\n        canvas.reset();\r\n\r\n        (self.painter)(canvas.as_mut(), info);\r\n\r\n        scene.append(canvas.as_ref(), None);\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        StyleNode {\r\n            style: LayoutStyle::default(),\r\n            children: Vec::new(),\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn update(\u0026mut self, _: \u0026LayoutNode, _: AppContext, _: \u0026AppInfo) -\u003e Update {\r\n        Update::DRAW | Update::LAYOUT\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Canvas\")\r\n    }\r\n}\r\n","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":17},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","checkbox.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout;\r\nuse maycoon_core::layout::{Dimension, LayoutNode, LayoutStyle, LengthPercentageAuto, StyleNode};\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::kurbo::{Rect, RoundedRect, RoundedRectRadii, Stroke};\r\nuse maycoon_core::vgi::{Brush, Scene};\r\nuse maycoon_core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon_core::window::{ElementState, MouseButton};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse nalgebra::Vector2;\r\n\r\n/// A checkbox widget. Changes state when it's clicked.\r\n///\r\n/// See the [checkbox](https://github.com/maycoon-ui/maycoon/blob/master/examples/checkbox/src/main.rs) example for how to use it in practice.\r\n///\r\n/// ### Theming\r\n/// Styling the checkbox requires following properties:\r\n/// - `color_unchecked` -  The color of the checkbox, when it's not checked (inner value is false).\r\n/// - `color_checked` - The color of the checkbox, when it's checked (inner value is true).\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Checkbox`.\r\npub struct Checkbox {\r\n    layout_style: MaybeSignal\u003cLayoutStyle\u003e,\r\n    value: MaybeSignal\u003cbool\u003e,\r\n    on_change: MaybeSignal\u003cUpdate\u003e,\r\n}\r\n\r\nimpl Checkbox {\r\n    /// Create a new checkbox with the given value.\r\n    ///\r\n    /// The value should be a signal, so it's mutable.\r\n    #[inline(always)]\r\n    pub fn new(value: impl Into\u003cMaybeSignal\u003cbool\u003e\u003e) -\u003e Self {\r\n        Self {\r\n            layout_style: LayoutStyle {\r\n                size: Vector2::\u003cDimension\u003e::new(Dimension::length(20.0), Dimension::length(20.0)),\r\n                margin: layout::Rect::\u003cLengthPercentageAuto\u003e {\r\n                    left: LengthPercentageAuto::length(0.5),\r\n                    right: LengthPercentageAuto::length(0.5),\r\n                    top: LengthPercentageAuto::length(0.5),\r\n                    bottom: LengthPercentageAuto::length(0.5),\r\n                },\r\n                ..Default::default()\r\n            }\r\n            .into(),\r\n            value: value.into(),\r\n            on_change: Update::empty().into(),\r\n        }\r\n    }\r\n\r\n    /// Sets the value of the checkbox and returns self.\r\n    #[inline(always)]\r\n    pub fn with_value(mut self, value: impl Into\u003cMaybeSignal\u003cbool\u003e\u003e) -\u003e Self {\r\n        self.value = value.into();\r\n        self\r\n    }\r\n\r\n    /// Sets the update value to apply on changes and returns self.\r\n    #[inline(always)]\r\n    pub fn with_on_change(mut self, on_change: impl Into\u003cMaybeSignal\u003cUpdate\u003e\u003e) -\u003e Self {\r\n        self.on_change = on_change.into();\r\n        self\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Checkbox {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.layout_style = layout_style.into();\r\n    }\r\n}\r\n\r\nimpl Widget for Checkbox {\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        _: \u0026AppInfo,\r\n        _: AppContext,\r\n    ) {\r\n        let checked = *self.value.get();\r\n\r\n        let color = if let Some(style) = theme.of(self.widget_id()) {\r\n            if checked {\r\n                style.get_color(\"color_checked\").unwrap()\r\n            } else {\r\n                style.get_color(\"color_unchecked\").unwrap()\r\n            }\r\n        } else if checked {\r\n            theme.defaults().interactive().active()\r\n        } else {\r\n            theme.defaults().interactive().inactive()\r\n        };\r\n\r\n        scene.draw_rounded_rect(\r\n            \u0026Brush::Solid(color),\r\n            None,\r\n            Some(\u0026Stroke::new(3.0)),\r\n            \u0026RoundedRect::from_rect(\r\n                Rect::new(\r\n                    layout_node.layout.location.x as f64,\r\n                    layout_node.layout.location.y as f64,\r\n                    (layout_node.layout.location.x + layout_node.layout.size.width) as f64,\r\n                    (layout_node.layout.location.y + layout_node.layout.size.height) as f64,\r\n                ),\r\n                RoundedRectRadii::from_single_radius(5.0),\r\n            ),\r\n        );\r\n\r\n        if checked {\r\n            scene.draw_rounded_rect(\r\n                \u0026Brush::Solid(color),\r\n                None,\r\n                None,\r\n                \u0026RoundedRect::from_rect(\r\n                    Rect::new(\r\n                        layout_node.layout.location.x as f64 + 5.0,\r\n                        layout_node.layout.location.y as f64 + 5.0,\r\n                        (layout_node.layout.location.x + layout_node.layout.size.width) as f64\r\n                            - 5.0,\r\n                        (layout_node.layout.location.y + layout_node.layout.size.height) as f64\r\n                            - 5.0,\r\n                    ),\r\n                    RoundedRectRadii::from_single_radius(2.5),\r\n                ),\r\n            );\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        StyleNode {\r\n            style: self.layout_style.get().clone(),\r\n            children: Vec::new(),\r\n        }\r\n    }\r\n\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, _: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        let mut update = Update::empty();\r\n\r\n        if let Some(cursor) = info.cursor_pos\r\n            \u0026\u0026 layout::intersects(cursor, \u0026layout.layout)\r\n        {\r\n            for (_, btn, el) in \u0026info.buttons {\r\n                if btn == \u0026MouseButton::Left \u0026\u0026 *el == ElementState::Released {\r\n                    update |= *self.on_change.get();\r\n                    update |= Update::DRAW;\r\n\r\n                    if let Some(sig) = self.value.as_signal() {\r\n                        let checked = *sig.get();\r\n                        sig.set(!checked);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        update\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Checkbox\")\r\n    }\r\n}\r\n","traces":[{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":63},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","container.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout::{LayoutNode, LayoutStyle, StyleNode};\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::Scene;\r\nuse maycoon_core::widget::{BoxedWidget, Widget, WidgetChildrenExt, WidgetLayoutExt};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\n\r\n/// A container widget that can display and layout multiple child widgets.\r\n///\r\n/// The layout of the children (row, column, etc.) depends on the [LayoutStyle] of the container.\r\n///\r\n/// See the [counter](https://github.com/maycoon-ui/maycoon/blob/master/examples/counter/src/main.rs) example for how to use it in practice.\r\n///\r\n/// ### Theming\r\n/// The container widget doesn't actually draw anything but the child widgets, so theming is useless.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Container`.\r\n#[derive(Default)]\r\npub struct Container {\r\n    style: MaybeSignal\u003cLayoutStyle\u003e,\r\n    children: Vec\u003cBoxedWidget\u003e,\r\n}\r\n\r\nimpl Container {\r\n    /// Creates a new container with given children.\r\n    #[inline(always)]\r\n    pub fn new(children: Vec\u003cBoxedWidget\u003e) -\u003e Self {\r\n        Self {\r\n            style: LayoutStyle::default().into(),\r\n            children: children.into_iter().collect(),\r\n        }\r\n    }\r\n}\r\n\r\nimpl WidgetChildrenExt for Container {\r\n    #[inline(always)]\r\n    fn set_children(\u0026mut self, children: Vec\u003cBoxedWidget\u003e) {\r\n        self.children = children.into_iter().collect();\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn add_child(\u0026mut self, child: impl Widget + 'static) {\r\n        self.children.push(Box::new(child));\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Container {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.style = layout_style.into();\r\n    }\r\n}\r\n\r\nimpl Widget for Container {\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        context: AppContext,\r\n    ) {\r\n        for (i, child) in self.children.iter_mut().enumerate() {\r\n            child.render(\r\n                scene,\r\n                theme,\r\n                \u0026layout_node.children[i],\r\n                info,\r\n                context.clone(),\r\n            );\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        let style = self.style.get().clone();\r\n\r\n        let mut children = Vec::with_capacity(self.children.len());\r\n\r\n        for child in \u0026self.children {\r\n            children.push(child.layout_style());\r\n        }\r\n\r\n        StyleNode { style, children }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, context: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        let mut update = Update::empty();\r\n\r\n        for (i, child) in self.children.iter_mut().enumerate() {\r\n            update.insert(child.update(\u0026layout.children[i], context.clone(), info));\r\n        }\r\n\r\n        update\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Container\")\r\n    }\r\n}\r\n","traces":[{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":29},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","fetcher.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout::{LayoutNode, LayoutStyle, StyleNode};\r\nuse maycoon_core::tasks::fetcher::Fetcher;\r\nuse maycoon_core::vgi::Scene;\r\nuse maycoon_core::widget::Widget;\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse std::future::Future;\r\n\r\n/// A widget to build an inner widget from an asynchronous task.\r\n/// This is a [Widget] version of [Fetcher].\r\n///\r\n/// It is similar to the [FutureBuilder](https://api.flutter.dev/flutter/widgets/FutureBuilder-class.html) from Flutter.\r\n///\r\n/// ### Async + UI\r\n/// When working with a future, you usually need to block on it to produce a value.\r\n/// This would however block the main thread and freeze the whole application temporarily until the task is done.\r\n/// Blocking is less than ideal for any UI application,\r\n/// so the [Fetcher] and [WidgetFetcher] structures exist to run a task in the background,\r\n/// while still providing the user with a smooth interface experience.\r\n///\r\n/// The [WidgetFetcher] will spawn the given task in the background.\r\n/// While the task is still running/loading, the fetcher will still be able to produce a widget via a given factory function.\r\n/// This factory function takes `Option\u003cT\u003e` as an argument, where `T` is the output of the spawned task.\r\n/// If the task is not ready yet, the factory will be called with `None`, otherwise it will be called with `Some(T)`.\r\n///\r\n/// ### Spawning the task\r\n/// By default, the task is spawned inside the [TaskRunner](maycoon_core::tasks::runner::TaskRunner) in a non-blocking manner.\r\n/// If you want to spawn a blocking task (which is however, only supported on native platforms), use [WidgetFetcher::new_blocking]\r\n///\r\n/// **NOTE:** If the future is spawned on a thread pool or not,\r\n/// is up to the [TaskRunner](maycoon_core::tasks::runner::TaskRunner) implementation.\r\n/// Blocking tasks will always be spawned on a thread pool.\r\n///\r\n/// ### Note for the Web\r\n/// On the web, blocking a task is not possible and will freeze the browser,\r\n/// so only futures can be spawned.\r\n/// Furthermore, the futures will be executed on the local thread,\r\n/// since WebAssembly doesn't support threading out-of-the-box yet.\r\n///\r\n/// ### Workflow of a [WidgetFetcher].\r\n/// 1. Run the task in the background using the [TaskRunner](tasks::runner::TaskRunner).\r\n/// 2. Construct the widget with [None] passed into the factory function (while task is still loading).\r\n/// 3. Once the task is done, the UI is updated with the new result and an [Update] is triggered.\r\n///\r\n/// ### Theming\r\n/// The widget itself only draws the underlying widget, so theming is useless.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:WidgetFetcher`.\r\npub struct WidgetFetcher\u003cT: Send + 'static, W: Widget\u003e {\r\n    fetcher: Fetcher\u003cT, W\u003e,\r\n    update: Update,\r\n}\r\n\r\nimpl\u003cT: Send + 'static, W: Widget\u003e WidgetFetcher\u003cT, W\u003e {\r\n    /// Creates a new [WidgetFetcher] with parameters:\r\n    /// - `future`: The future to execute.\r\n    /// - `update`: The update to trigger when the data is updated (when loading is done).\r\n    /// - `render`: The function to render the widget. It takes a possible task result as the only parameter.\r\n    ///\r\n    /// Unlike [WidgetFetcher::new_blocking]. this will spawn a future in the background.\r\n    /// It's up to the task runner implementation, if the task is spawned on a thread pool or not.\r\n    #[inline(always)]\r\n    pub fn new\u003cFut\u003e(future: Fut, render: impl Fn(Option\u003cT\u003e) -\u003e W + 'static, update: Update) -\u003e Self\r\n    where\r\n        Fut: Future\u003cOutput = T\u003e + Send + 'static,\r\n    {\r\n        Self {\r\n            fetcher: Fetcher::spawn(future, render),\r\n            update,\r\n        }\r\n    }\r\n\r\n    /// Creates a new [WidgetFetcher] with parameters:\r\n    /// - `func`: The blocking task to execute.\r\n    /// - `update`: The update to trigger when the data is updated (when loading is done).\r\n    /// - `render`: The function to render the widget. It takes a possible task result as the only parameter.\r\n    ///\r\n    /// Unlike [WidgetFetcher::new], this takes a function which will be run on a separate thread pool.\r\n    /// This is only supported on native platforms.\r\n    #[inline(always)]\r\n    #[cfg(native)]\r\n    pub fn new_blocking\u003cF\u003e(\r\n        func: F,\r\n        render: impl Fn(Option\u003cT\u003e) -\u003e W + 'static,\r\n        update: Update,\r\n    ) -\u003e Self\r\n    where\r\n        F: Fn() -\u003e T + Send + 'static,\r\n    {\r\n        Self {\r\n            fetcher: Fetcher::spawn_blocking(func, render),\r\n            update,\r\n        }\r\n    }\r\n}\r\n\r\nimpl\u003cT: Send + 'static, W: Widget\u003e Widget for WidgetFetcher\u003cT, W\u003e {\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        context: AppContext,\r\n    ) {\r\n        if let Some(widget) = self.fetcher.value_mut() {\r\n            widget.render(scene, theme, layout_node, info, context.clone())\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        if let Some(widget) = self.fetcher.value_ref() {\r\n            widget.layout_style()\r\n        } else {\r\n            StyleNode {\r\n                style: LayoutStyle::default(),\r\n                children: Vec::new(),\r\n            }\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, context: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        let mut update = Update::empty();\r\n\r\n        // Make sure to update the widget if the task is about to be polled\r\n        if self.fetcher.is_ready() {\r\n            update.insert(self.update);\r\n        }\r\n\r\n        let widget = self.fetcher.fetch();\r\n\r\n        widget.update(layout, context, info) | update\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"WidgetFetcher\")\r\n    }\r\n}\r\n","traces":[{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":20},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","gesture_detector.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout;\r\nuse maycoon_core::layout::{LayoutNode, StyleNode};\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::Scene;\r\nuse maycoon_core::widget::{BoxedWidget, Widget};\r\nuse maycoon_core::window::{ElementState, MouseButton};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\n\r\n/// A widget to detect gestures like pressing or releasing the left mouse button.\r\n/// It can also contain a child widget.\r\n///\r\n/// The [GestureDetector] has different callbacks that are called on different events:\r\n/// - `on_press` is called when the left mouse button is pressed.\r\n/// - `on_release` is called when the left mouse button is released.\r\n/// - `on_hover` is called when the mouse cursor hovers over the widget.\r\n///\r\n/// ### Theming\r\n/// The [GestureDetector] should not be themed and does not draw anything on itself.\r\n/// It just contains the given child widget.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:GestureDetector`.\r\npub struct GestureDetector {\r\n    child: BoxedWidget,\r\n    on_press: MaybeSignal\u003cUpdate\u003e,\r\n    on_release: MaybeSignal\u003cUpdate\u003e,\r\n    on_hover: MaybeSignal\u003cUpdate\u003e,\r\n}\r\n\r\nimpl GestureDetector {\r\n    /// Creates a new [GestureDetector] with the given child widget.\r\n    #[inline(always)]\r\n    pub fn new(child: impl Widget + 'static) -\u003e Self {\r\n        Self {\r\n            child: Box::new(child),\r\n            on_press: MaybeSignal::value(Update::empty()),\r\n            on_release: MaybeSignal::value(Update::empty()),\r\n            on_hover: MaybeSignal::value(Update::empty()),\r\n        }\r\n    }\r\n\r\n    /// Sets the child widget of the [GestureDetector] and returns self.\r\n    #[inline(always)]\r\n    pub fn with_child(mut self, child: impl Widget + 'static) -\u003e Self {\r\n        self.child = Box::new(child);\r\n        self\r\n    }\r\n\r\n    /// Sets the `on_press` callback of the [GestureDetector] and returns self.\r\n    #[inline(always)]\r\n    pub fn with_on_press(mut self, on_press: impl Into\u003cMaybeSignal\u003cUpdate\u003e\u003e) -\u003e Self {\r\n        self.on_press = on_press.into();\r\n        self\r\n    }\r\n\r\n    /// Sets the `on_release` callback of the [GestureDetector] and returns self.\r\n    #[inline(always)]\r\n    pub fn with_on_release(mut self, on_release: impl Into\u003cMaybeSignal\u003cUpdate\u003e\u003e) -\u003e Self {\r\n        self.on_release = on_release.into();\r\n        self\r\n    }\r\n\r\n    /// Sets the `on_hover` callback of the [GestureDetector] and returns self.\r\n    #[inline(always)]\r\n    pub fn with_on_hover(mut self, on_hover: impl Into\u003cMaybeSignal\u003cUpdate\u003e\u003e) -\u003e Self {\r\n        self.on_hover = on_hover.into();\r\n        self\r\n    }\r\n\r\n    /// Call the `on_hover` callback of the [GestureDetector].\r\n    #[inline(always)]\r\n    pub fn on_hover(\u0026mut self) -\u003e Update {\r\n        *self.on_hover.get()\r\n    }\r\n\r\n    /// Call the `on_press` callback of the [GestureDetector].\r\n    #[inline(always)]\r\n    pub fn on_press(\u0026mut self) -\u003e Update {\r\n        *self.on_press.get()\r\n    }\r\n\r\n    /// Call the `on_release` callback of the [GestureDetector].\r\n    #[inline(always)]\r\n    pub fn on_release(\u0026mut self) -\u003e Update {\r\n        *self.on_release.get()\r\n    }\r\n}\r\n\r\nimpl Widget for GestureDetector {\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        context: AppContext,\r\n    ) {\r\n        self.child.render(scene, theme, layout_node, info, context)\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        self.child.layout_style()\r\n    }\r\n\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, context: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        let mut update = Update::empty();\r\n\r\n        if let Some(cursor) = info.cursor_pos\r\n            \u0026\u0026 layout::intersects(cursor, \u0026layout.layout)\r\n        {\r\n            update |= self.on_hover();\r\n\r\n            // check for click\r\n            for (_, btn, el) in \u0026info.buttons {\r\n                if *btn == MouseButton::Left {\r\n                    match el {\r\n                        ElementState::Pressed =\u003e {\r\n                            update |= self.on_press();\r\n                        },\r\n\r\n                        ElementState::Released =\u003e {\r\n                            update |= self.on_release();\r\n                        },\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        update |= self.child.update(layout, context, info);\r\n\r\n        update\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"GestureDetector\")\r\n    }\r\n}\r\n","traces":[{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":43},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","icon","mod.rs"],"content":"use maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout::{Dimension, LayoutNode, LayoutStyle, StyleNode};\r\nuse maycoon_core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse nalgebra::Vector2;\r\n\r\nuse crate::icon::svg::SvgIcon;\r\nuse maycoon_core::app::context::AppContext;\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::Scene;\r\nuse maycoon_core::vgi::kurbo::{Affine, Vec2};\r\n\r\n/// Contains the [SvgIcon] struct for representing a rendered SVG Icon.\r\npub mod svg;\r\n\r\n/// A simple icon widget to display SVG icons using [vello_svg] and [usvg].\r\n///\r\n/// ### Theming\r\n/// The widget itself only draws the underlying icon, so theming is useless.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Icon`.\r\npub struct Icon {\r\n    layout_style: MaybeSignal\u003cLayoutStyle\u003e,\r\n    icon: MaybeSignal\u003cSvgIcon\u003e,\r\n}\r\n\r\nimpl Icon {\r\n    /// Creates a new icon widget from the given svg icon.\r\n    #[inline(always)]\r\n    pub fn new(icon: impl Into\u003cMaybeSignal\u003cSvgIcon\u003e\u003e) -\u003e Self {\r\n        Self {\r\n            layout_style: LayoutStyle {\r\n                size: Vector2::new(Dimension::length(8.0), Dimension::length(8.0)),\r\n                ..Default::default()\r\n            }\r\n            .into(),\r\n            icon: icon.into(),\r\n        }\r\n    }\r\n}\r\n\r\nimpl Widget for Icon {\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        _: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        _: \u0026AppInfo,\r\n        _: AppContext,\r\n    ) {\r\n        let icon = self.icon.get();\r\n\r\n        // The size is divided, as otherwise the icon would be either too large (with 1.0) or too tiny (with 0.1 somehow getting converted to 0.0)\r\n        let affine = Affine::scale_non_uniform(\r\n            layout_node.layout.size.width as f64 / 100.0,\r\n            layout_node.layout.size.height as f64 / 100.0,\r\n        )\r\n        .then_translate(Vec2::new(\r\n            layout_node.layout.location.x as f64,\r\n            layout_node.layout.location.y as f64,\r\n        ));\r\n\r\n        scene.draw_svg(icon.tree(), Some(affine));\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        StyleNode {\r\n            style: self.layout_style.get().clone(),\r\n            children: Vec::new(),\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn update(\u0026mut self, _: \u0026LayoutNode, _: AppContext, _: \u0026AppInfo) -\u003e Update {\r\n        Update::empty()\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Icon\")\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Icon {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.layout_style = layout_style.into();\r\n    }\r\n}\r\n","traces":[{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":20},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","icon","svg.rs"],"content":"use maycoon_core::vgi::svg::{Error, Options, Tree};\r\n\r\n/// An SVG icon rendered.\r\npub struct SvgIcon(Tree);\r\n\r\nimpl SvgIcon {\r\n    /// Creates a new icon from the given SVG source.\r\n    ///\r\n    /// Returns [Err] if the SVG could not be parsed.\r\n    #[inline(always)]\r\n    pub fn new(source: impl AsRef\u003c[u8]\u003e) -\u003e Result\u003cSelf, Error\u003e {\r\n        Ok(Self(Tree::from_data(source.as_ref(), \u0026Options::default())?))\r\n    }\r\n\r\n    /// Creates a new icon from the given SVG source as string.\r\n    ///\r\n    /// Returns [Err] if the SVG could not be parsed.\r\n    #[inline(always)]\r\n    pub fn new_str(source: impl AsRef\u003cstr\u003e) -\u003e Result\u003cSelf, Error\u003e {\r\n        Ok(Self(Tree::from_str(source.as_ref(), \u0026Options::default())?))\r\n    }\r\n\r\n    /// Returns the underlying [Tree].\r\n    #[inline(always)]\r\n    pub const fn tree(\u0026self) -\u003e \u0026Tree {\r\n        \u0026self.0\r\n    }\r\n}\r\n","traces":[{"line":11,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":0}},{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":6},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","image.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout::{LayoutNode, LayoutStyle, StyleNode};\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::{ImageBrush, ImageData, Scene};\r\nuse maycoon_core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse nalgebra::Vector2;\r\n\r\n/// An image widget. Pretty self-explanatory.\r\n///\r\n/// See the [image](https://github.com/maycoon-ui/maycoon/blob/master/examples/image/src/main.rs) example for how to use it in practice.\r\n///\r\n/// ### Theming\r\n/// The widget itself only draws the underlying image, so theming is useless.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Image`.\r\npub struct Image {\r\n    image: MaybeSignal\u003cImageData\u003e,\r\n    style: MaybeSignal\u003cLayoutStyle\u003e,\r\n}\r\n\r\nimpl Image {\r\n    /// Create an image widget from the given [ImageData].\r\n    #[inline(always)]\r\n    pub fn new(image: impl Into\u003cMaybeSignal\u003cImageData\u003e\u003e) -\u003e Self {\r\n        Self {\r\n            image: image.into(),\r\n            style: LayoutStyle::default().into(),\r\n        }\r\n    }\r\n\r\n    /// Set the image.\r\n    #[inline(always)]\r\n    pub fn with_image(mut self, image: impl Into\u003cMaybeSignal\u003cImageData\u003e\u003e) -\u003e Self {\r\n        self.image = image.into();\r\n        self\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Image {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.style = layout_style.into();\r\n    }\r\n}\r\n\r\nimpl Widget for Image {\r\n    #[inline(always)]\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        _: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        _: \u0026AppInfo,\r\n        _: AppContext,\r\n    ) {\r\n        let image = self.image.get();\r\n        let brush = ImageBrush::new(image.clone());\r\n\r\n        scene.draw_image(\r\n            \u0026brush,\r\n            None,\r\n            Vector2::new(layout_node.layout.location.x, layout_node.layout.location.y),\r\n        );\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        StyleNode {\r\n            style: self.style.get().clone(),\r\n            children: Vec::new(),\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn update(\u0026mut self, _: \u0026LayoutNode, _: AppContext, _: \u0026AppInfo) -\u003e Update {\r\n        Update::empty()\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Image\")\r\n    }\r\n}\r\n","traces":[{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":22},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","lib.rs"],"content":"#![warn(missing_docs)]\r\n\r\n//! Widget library for Maycoon =\u003e See `maycoon` crate.\r\n//!\r\n//! Contains a collection of beautiful maycoon widgets.\r\n\r\n/// Contains the [text::Text] widget.\r\npub mod text;\r\n\r\n/// Contains the [button::Button] widget.\r\npub mod button;\r\n\r\n/// Contains the [container::Container] widget.\r\npub mod container;\r\n\r\n/// Contains the [image::Image] widget.\r\npub mod image;\r\n\r\n/// Contains the [checkbox::Checkbox] widget.\r\npub mod checkbox;\r\n\r\n/// Contains the [slider::Slider] widget.\r\npub mod slider;\r\n\r\n/// Contains the [switch::Switch] widget.\r\npub mod switch;\r\n\r\n/// Contains the [fetcher::WidgetFetcher] widget.\r\npub mod fetcher;\r\n\r\n/// Contains the [canvas::Canvas] widget.\r\n#[cfg(feature = \"canvas\")]\r\npub mod canvas;\r\n\r\n/// Contains the [gesture_detector::GestureDetector] widget.\r\npub mod gesture_detector;\r\n\r\n/// Contains the [icon::Icon] widget.\r\n#[cfg(feature = \"svg\")]\r\npub mod icon;\r\n\r\n/// Contains the [animator::Animator] widget and associated structures.\r\npub mod animator;\r\n","traces":[],"covered":0,"coverable":0},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","slider.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout;\r\nuse maycoon_core::layout::{Dimension, LayoutNode, LayoutStyle, LengthPercentageAuto, StyleNode};\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::kurbo::{Circle, Point, Rect, RoundedRect, RoundedRectRadii};\r\nuse maycoon_core::vgi::{Brush, Scene};\r\nuse maycoon_core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon_core::window::MouseButton;\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse nalgebra::Vector2;\r\n\r\n/// A slider widget to control a floating point value between `0.0` and `1.0`.\r\n///\r\n/// ### Theming\r\n/// You can style the slider using following properties:\r\n/// - `color` - The color of the slider bar.\r\n/// - `color_ball` - The color of the slider ball.\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Slider`.\r\npub struct Slider {\r\n    layout_style: MaybeSignal\u003cLayoutStyle\u003e,\r\n    value: MaybeSignal\u003cf32\u003e,\r\n    on_change: MaybeSignal\u003cUpdate\u003e,\r\n    dragging: bool,\r\n}\r\n\r\nimpl Slider {\r\n    /// Create a new Slider widget from a value (should be a signal) and an `on_change` callback.\r\n    #[inline(always)]\r\n    pub fn new(value: impl Into\u003cMaybeSignal\u003cf32\u003e\u003e) -\u003e Self {\r\n        Self {\r\n            layout_style: LayoutStyle {\r\n                size: Vector2::\u003cDimension\u003e::new(Dimension::length(100.0), Dimension::length(10.0)),\r\n                margin: layout::Rect::\u003cLengthPercentageAuto\u003e {\r\n                    left: LengthPercentageAuto::length(10.0),\r\n                    right: LengthPercentageAuto::length(0.0),\r\n                    top: LengthPercentageAuto::length(10.0),\r\n                    bottom: LengthPercentageAuto::length(10.0),\r\n                },\r\n                ..Default::default()\r\n            }\r\n            .into(),\r\n            value: value.into(),\r\n            on_change: MaybeSignal::value(Update::empty()),\r\n            dragging: false,\r\n        }\r\n    }\r\n\r\n    /// Sets the layout style of the slider and returns itself.\r\n    #[inline(always)]\r\n    pub fn with_value(mut self, value: impl Into\u003cMaybeSignal\u003cf32\u003e\u003e) -\u003e Self {\r\n        self.value = value.into();\r\n        self\r\n    }\r\n\r\n    /// Sets the function to be called when the slider is clicked/changed.\r\n    #[inline(always)]\r\n    pub fn with_on_change(mut self, on_change: impl Into\u003cMaybeSignal\u003cUpdate\u003e\u003e) -\u003e Self {\r\n        self.on_change = on_change.into();\r\n        self\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Slider {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.layout_style = layout_style.into();\r\n    }\r\n}\r\n\r\nimpl Widget for Slider {\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        _: \u0026AppInfo,\r\n        _: AppContext,\r\n    ) {\r\n        let value = *self.value.get();\r\n\r\n        let brush = if let Some(style) = theme.of(self.widget_id()) {\r\n            Brush::Solid(style.get_color(\"color\").unwrap())\r\n        } else {\r\n            Brush::Solid(theme.defaults().interactive().inactive())\r\n        };\r\n\r\n        let ball_brush = if let Some(style) = theme.of(self.widget_id()) {\r\n            Brush::Solid(style.get_color(\"color_ball\").unwrap())\r\n        } else {\r\n            Brush::Solid(theme.defaults().interactive().active())\r\n        };\r\n\r\n        let circle_radius = layout_node.layout.size.height as f64 / 1.15;\r\n\r\n        scene.draw_rounded_rect(\r\n            \u0026brush,\r\n            None,\r\n            None,\r\n            \u0026RoundedRect::from_rect(\r\n                Rect::new(\r\n                    layout_node.layout.location.x as f64,\r\n                    layout_node.layout.location.y as f64,\r\n                    (layout_node.layout.location.x + layout_node.layout.size.width) as f64,\r\n                    (layout_node.layout.location.y + layout_node.layout.size.height) as f64,\r\n                ),\r\n                RoundedRectRadii::from_single_radius(20.0),\r\n            ),\r\n        );\r\n\r\n        scene.draw_circle(\r\n            \u0026ball_brush,\r\n            None,\r\n            None,\r\n            \u0026Circle::new(\r\n                Point::new(\r\n                    (layout_node.layout.location.x + layout_node.layout.size.width * value) as f64,\r\n                    (layout_node.layout.location.y + layout_node.layout.size.height / 2.0) as f64,\r\n                ),\r\n                circle_radius,\r\n            ),\r\n        );\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        StyleNode {\r\n            style: self.layout_style.get().clone(),\r\n            children: Vec::new(),\r\n        }\r\n    }\r\n\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, _: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        let mut update = Update::empty();\r\n\r\n        if let Some(cursor) = info.cursor_pos\r\n            \u0026\u0026 layout::intersects(cursor, \u0026layout.layout)\r\n        {\r\n            for (_, btn, el_state) in \u0026info.buttons {\r\n                if btn == \u0026MouseButton::Left \u0026\u0026 el_state.is_pressed() {\r\n                    self.dragging = el_state.is_pressed();\r\n                }\r\n            }\r\n\r\n            if self.dragging {\r\n                let new_value = (cursor.x - layout.layout.location.x) / layout.layout.size.width;\r\n\r\n                if let Some(sig) = self.value.as_signal() {\r\n                    sig.set(new_value);\r\n                }\r\n\r\n                update.insert(*self.on_change.get());\r\n                update.insert(Update::DRAW);\r\n            }\r\n        } else {\r\n            self.dragging = false;\r\n        }\r\n\r\n        update\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Slider\")\r\n    }\r\n}\r\n","traces":[{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":61},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","switch.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout;\r\nuse maycoon_core::layout::{Dimension, LayoutNode, LayoutStyle, LengthPercentageAuto, StyleNode};\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::kurbo::{Circle, Point, Rect, RoundedRect, RoundedRectRadii, Stroke};\r\nuse maycoon_core::vgi::{Brush, Scene};\r\nuse maycoon_core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon_core::window::{ElementState, MouseButton};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse nalgebra::Vector2;\r\n\r\n/// A switch widget to toggle between two states.\r\n///\r\n/// Similar to a checkbox, but with slightly different visuals.\r\n///\r\n/// See the [switch](https://github.com/maycoon-ui/maycoon/blob/master/examples/switch/src/main.rs) example for how to use it in practice.\r\n///\r\n/// ### Theming\r\n/// Styling the checkbox requires following properties:\r\n/// - `color_unchecked` -  The color of the switch, when it's not checked (inner value is false).\r\n/// - `color_checked` - The color of the switch, when it's checked (inner value is true).\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Switch`.\r\npub struct Switch {\r\n    layout: MaybeSignal\u003cLayoutStyle\u003e,\r\n    value: MaybeSignal\u003cbool\u003e,\r\n    on_change: MaybeSignal\u003cUpdate\u003e,\r\n}\r\n\r\nimpl Switch {\r\n    /// Create a new switch with the given value.\r\n    ///\r\n    /// The value should be a signal, so it's mutable.\r\n    #[inline(always)]\r\n    pub fn new(value: impl Into\u003cMaybeSignal\u003cbool\u003e\u003e) -\u003e Self {\r\n        Self {\r\n            layout: LayoutStyle {\r\n                size: Vector2::new(Dimension::length(60.0), Dimension::length(30.0)),\r\n                margin: layout::Rect::\u003cLengthPercentageAuto\u003e {\r\n                    left: LengthPercentageAuto::length(2.5),\r\n                    right: LengthPercentageAuto::length(2.5),\r\n                    top: LengthPercentageAuto::length(2.5),\r\n                    bottom: LengthPercentageAuto::length(2.5),\r\n                },\r\n                ..Default::default()\r\n            }\r\n            .into(),\r\n            value: value.into(),\r\n            on_change: Update::empty().into(),\r\n        }\r\n    }\r\n\r\n    /// Sets the value of the checkbox and returns self.\r\n    #[inline(always)]\r\n    pub fn with_value(mut self, value: impl Into\u003cMaybeSignal\u003cbool\u003e\u003e) -\u003e Self {\r\n        self.value = value.into();\r\n        self\r\n    }\r\n\r\n    /// Sets the update value to apply on changes and returns self.\r\n    #[inline(always)]\r\n    pub fn with_on_change(mut self, update: impl Into\u003cMaybeSignal\u003cUpdate\u003e\u003e) -\u003e Self {\r\n        self.on_change = update.into();\r\n        self\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Switch {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.layout = layout_style.into();\r\n    }\r\n}\r\n\r\nimpl Widget for Switch {\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        _: \u0026AppInfo,\r\n        _: AppContext,\r\n    ) {\r\n        let checked = *self.value.get();\r\n\r\n        let color = if let Some(style) = theme.of(self.widget_id()) {\r\n            if checked {\r\n                style.get_color(\"color_checked\").unwrap()\r\n            } else {\r\n                style.get_color(\"color_unchecked\").unwrap()\r\n            }\r\n        } else if checked {\r\n            theme.defaults().interactive().active()\r\n        } else {\r\n            theme.defaults().interactive().inactive()\r\n        };\r\n\r\n        scene.draw_rounded_rect(\r\n            \u0026Brush::Solid(color),\r\n            None,\r\n            Some(\u0026Stroke::new(5.0)),\r\n            \u0026RoundedRect::from_rect(\r\n                Rect::new(\r\n                    layout_node.layout.location.x as f64,\r\n                    layout_node.layout.location.y as f64,\r\n                    (layout_node.layout.location.x + layout_node.layout.size.width) as f64,\r\n                    (layout_node.layout.location.y + layout_node.layout.size.height) as f64,\r\n                ),\r\n                RoundedRectRadii::from_single_radius(60.0),\r\n            ),\r\n        );\r\n\r\n        let offset = if checked { 15.0 } else { -15.0 };\r\n\r\n        scene.draw_circle(\r\n            \u0026Brush::Solid(color),\r\n            None,\r\n            None,\r\n            \u0026Circle::new(\r\n                Point::new(\r\n                    (layout_node.layout.location.x + (layout_node.layout.size.width / 2.0)) as f64\r\n                        + offset,\r\n                    (layout_node.layout.location.y + (layout_node.layout.size.height / 2.0)) as f64,\r\n                ),\r\n                10.0,\r\n            ),\r\n        );\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        StyleNode {\r\n            style: self.layout.get().clone(),\r\n            children: Vec::new(),\r\n        }\r\n    }\r\n\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, _: AppContext, info: \u0026AppInfo) -\u003e Update {\r\n        let mut update = Update::empty();\r\n\r\n        if let Some(cursor) = info.cursor_pos\r\n            \u0026\u0026 layout::intersects(cursor, \u0026layout.layout)\r\n        {\r\n            for (_, btn, el) in \u0026info.buttons {\r\n                if btn == \u0026MouseButton::Left \u0026\u0026 *el == ElementState::Released {\r\n                    update |= *self.on_change.get();\r\n                    update |= Update::DRAW;\r\n\r\n                    if let Some(sig) = self.value.as_signal() {\r\n                        let checked = *sig.get();\r\n                        sig.set(!checked);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        update\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Switch\")\r\n    }\r\n}\r\n","traces":[{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":60},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","maycoon-widgets","src","text.rs"],"content":"use maycoon_core::app::context::AppContext;\r\nuse maycoon_core::app::info::AppInfo;\r\nuse maycoon_core::app::update::Update;\r\nuse maycoon_core::layout;\r\nuse maycoon_core::layout::{Dimension, LayoutNode, LayoutStyle, StyleNode};\r\nuse maycoon_core::signal::MaybeSignal;\r\nuse maycoon_core::vgi::{Brush, Scene};\r\nuse maycoon_core::widget::{Widget, WidgetLayoutExt};\r\nuse maycoon_theme::id::WidgetId;\r\nuse maycoon_theme::theme::Theme;\r\nuse nalgebra::Vector2;\r\nuse std::ops::Deref;\r\n\r\n/// Displays the given text with optional font, size and hinting.\r\n///\r\n/// See the [hello-world](https://github.com/maycoon-ui/maycoon/blob/master/examples/hello-world/src/main.rs) example for how to use it in practice.\r\n///\r\n/// ### Theming\r\n/// You can style the text with the following properties:\r\n/// - `color` - The color of the text.\r\n/// - `color_invert` - The color to use when the `invert_color` property is set to `true` in the theme [Globals].\r\n///\r\n/// The [WidgetId] is equal to `maycoon-widgets:Text`.\r\n///\r\n/// [Globals]: maycoon_theme::globals::Globals\r\npub struct Text {\r\n    style: MaybeSignal\u003cLayoutStyle\u003e,\r\n    text: MaybeSignal\u003cString\u003e,\r\n    font: MaybeSignal\u003cOption\u003cString\u003e\u003e,\r\n    font_size: MaybeSignal\u003cf32\u003e,\r\n    line_gap: MaybeSignal\u003cf32\u003e,\r\n    wrap: MaybeSignal\u003cbool\u003e,\r\n    hinting: MaybeSignal\u003cbool\u003e,\r\n    max_width: f32,\r\n}\r\n\r\nimpl Text {\r\n    /// Create a new text widget with the given text.\r\n    #[inline(always)]\r\n    pub fn new(text: impl Into\u003cMaybeSignal\u003cString\u003e\u003e) -\u003e Self {\r\n        Self {\r\n            style: LayoutStyle::default().into(),\r\n            text: text.into(),\r\n            font: None.into(),\r\n            font_size: 30.0.into(),\r\n            line_gap: 7.5.into(),\r\n            wrap: true.into(),\r\n            hinting: true.into(),\r\n            max_width: 0.0,\r\n        }\r\n    }\r\n\r\n    /// Set whether to wrap the text.\r\n    #[inline(always)]\r\n    pub fn with_wrap(mut self, linebreaks: impl Into\u003cMaybeSignal\u003cbool\u003e\u003e) -\u003e Self {\r\n        self.wrap = linebreaks.into();\r\n        self\r\n    }\r\n\r\n    /// Set the hinting of the text.\r\n    ///\r\n    /// Hinting adjusts the display of an outline font so that it lines up with a rasterized grid.\r\n    /// At low screen resolutions and font size, hinting can produce clearer text.\r\n    #[inline(always)]\r\n    pub fn with_hinting(mut self, hinting: impl Into\u003cMaybeSignal\u003cbool\u003e\u003e) -\u003e Self {\r\n        self.hinting = hinting.into();\r\n        self\r\n    }\r\n\r\n    /// Set the font of the text.\r\n    #[inline(always)]\r\n    pub fn with_font(mut self, font: impl Into\u003cMaybeSignal\u003cOption\u003cString\u003e\u003e\u003e) -\u003e Self {\r\n        self.font = font.into();\r\n        self\r\n    }\r\n\r\n    /// Set the font size of the text.\r\n    #[inline(always)]\r\n    pub fn with_font_size(mut self, size: impl Into\u003cMaybeSignal\u003cf32\u003e\u003e) -\u003e Self {\r\n        self.font_size = size.into();\r\n        self\r\n    }\r\n\r\n    /// Set the line gap of the text.\r\n    ///\r\n    /// The line gap is the space between lines of text. Defaults to `7.5`.\r\n    #[inline(always)]\r\n    pub fn with_line_gap(mut self, gap: impl Into\u003cMaybeSignal\u003cf32\u003e\u003e) -\u003e Self {\r\n        self.line_gap = gap.into();\r\n        self\r\n    }\r\n}\r\n\r\nimpl WidgetLayoutExt for Text {\r\n    #[inline(always)]\r\n    fn set_layout_style(\u0026mut self, layout_style: impl Into\u003cMaybeSignal\u003cLayoutStyle\u003e\u003e) {\r\n        self.style = layout_style.into();\r\n    }\r\n}\r\n\r\nimpl Widget for Text {\r\n    fn render(\r\n        \u0026mut self,\r\n        scene: \u0026mut dyn Scene,\r\n        theme: \u0026mut dyn Theme,\r\n        layout_node: \u0026LayoutNode,\r\n        info: \u0026AppInfo,\r\n        _: AppContext,\r\n    ) {\r\n        let font_name = self.font.get();\r\n\r\n        let font = if font_name.is_some() {\r\n            info.font_context\r\n                .get(font_name.deref().clone().unwrap())\r\n                .expect(\"Font not found\")\r\n        } else {\r\n            info.font_context.default_font().clone()\r\n        };\r\n\r\n        let color = if let Some(style) = theme.of(Self::widget_id(self)) {\r\n            if theme.globals().invert_text_color {\r\n                style.get_color(\"color_invert\").unwrap()\r\n            } else {\r\n                style.get_color(\"color\").unwrap()\r\n            }\r\n        } else {\r\n            theme.defaults().text().foreground()\r\n        };\r\n\r\n        if *self.wrap.get() {\r\n            self.max_width = layout_node.layout.size.width;\r\n        } else {\r\n            self.max_width = f32::INFINITY;\r\n        }\r\n\r\n        scene.draw_text(\r\n            \u0026Brush::Solid(color),\r\n            None,\r\n            Vector2::new(layout_node.layout.location.x, layout_node.layout.location.y),\r\n            self.text.get().as_str(),\r\n            *self.hinting.get(),\r\n            \u0026font,\r\n            *self.font_size.get(),\r\n            *self.line_gap.get(),\r\n            self.max_width,\r\n        );\r\n    }\r\n\r\n    fn layout_style(\u0026self) -\u003e StyleNode {\r\n        let text = self.text.get();\r\n\r\n        let font_size = *self.font_size.get();\r\n\r\n        let style = self.style.get().deref().clone();\r\n\r\n        StyleNode {\r\n            style: LayoutStyle {\r\n                size: Vector2::new(\r\n                    Dimension::length(font_size * text.len() as f32),\r\n                    Dimension::length(font_size),\r\n                ),\r\n                ..style\r\n            },\r\n            children: Vec::new(),\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn update(\u0026mut self, layout: \u0026LayoutNode, _: AppContext, _: \u0026AppInfo) -\u003e Update {\r\n        // Re-layout if the maximum width of the text changes.\r\n        if *self.wrap.get() \u0026\u0026 !layout::equal(layout.layout.size.width, self.max_width) {\r\n            Update::LAYOUT\r\n        } else {\r\n            Update::empty()\r\n        }\r\n    }\r\n\r\n    #[inline(always)]\r\n    fn widget_id(\u0026self) -\u003e WidgetId {\r\n        WidgetId::new(\"maycoon-widgets\", \"Text\")\r\n    }\r\n}\r\n","traces":[{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":61},{"path":["C:","\\","Users","Mikail","Desktop","Coding","Projects","Maycoon Coverage","maycoon","src","lib.rs"],"content":"#![warn(missing_docs)]\r\n\r\n//! Create beautiful and lightning fast UI Applications with Rust.\r\n//!\r\n//! See [maycoon-ui.github.io/](https://maycoon-ui.github.io/) for more information.\r\n\r\npub use nalgebra as math;\r\npub use peniko as color;\r\n\r\npub use maycoon_core as core;\r\npub use maycoon_theme as theme;\r\npub use maycoon_widgets as widgets;\r\n\r\n#[cfg(feature = \"macros\")]\r\npub use maycoon_macros as macros;\r\n","traces":[],"covered":0,"coverable":0}]};
        var previousData = null;
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      },
    };
  });

  return [...folders, ...files.filter(file => file.path.length === 1)];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener('hashchange', () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.slice(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(
      ({current}) => {
        return {current: [...current, file.path[0]]};
      },
      () => this.updateHash(),
    );
  }

  back(file) {
    this.setState(
      ({current}) => {
        return {current: current.slice(0, current.length - 1)};
      },
      () => this.updateHash(),
    );
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e(
    'div',
    {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e(
      'table',
      {className: 'files-list'},
      e('thead', {className: 'files-list__head'}, e('tr', null, e('th', null, 'Path'), e('th', null, 'Coverage'))),
      e(
        'tbody',
        {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile})),
      ),
    ),
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? (file.covered / file.coverable) * 100 : -1;
  const coverageDelta =
    file.prevRun && (file.covered / file.coverable) * 100 - (file.prevRun.covered / file.prevRun.coverable) * 100;

  return e(
    'tr',
    {
      className:
        'files-list__file' +
        (coverage >= 0 && coverage < 50 ? ' files-list__file_low' : '') +
        (coverage >= 50 && coverage < 80 ? ' files-list__file_medium' : '') +
        (coverage >= 80 ? ' files-list__file_high' : '') +
        (file.is_folder ? ' files-list__file_folder' : ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e(
      'td',
      null,
      file.covered + ' / ' + file.coverable + (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e(
        'span',
        {title: 'Change from the previous run'},
        coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : '',
      ),
    ),
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'}, e(FileHeader, {file, onBack}), e(FileContent, {file}));
}

function FileHeader({file, onBack}) {
  const coverage = (file.covered / file.coverable) * 100;
  const coverageDelta = file.prevRun && coverage - (file.prevRun.covered / file.prevRun.coverable) * 100;

  return e(
    'div',
    {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e(
      'div',
      {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable + (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e(
        'span',
        {title: 'Change from the previous run'},
        coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : '',
      ),
      e('input', {id: 'theme-toggle', type: 'checkbox', hidden: true}),
      e('label', {for: 'theme-toggle', id: 'theme-toggle-label'}, ''),
    ),
  );
}

function FileContent({file}) {
  return e(
    'pre',
    {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e(
        'code',
        {
          className: 'code-line' + (covered ? ' code-line_covered' : '') + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        },
        line,
      );
    }),
  );
}

(function () {
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData &&
    previousData.files.forEach(file => {
      const path = file.path.slice(commonPath.length).join('/');
      prevFilesMap.set(path, file);
    });

  const files = data.files.map(file => {
    const path = file.path.slice(commonPath.length);
    const {covered = 0, coverable = 0} = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: {covered, coverable},
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    },
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));

  const toggle = document.getElementById('theme-toggle');
  const label = document.getElementById('theme-toggle-label');
  label.textContent = '';

  toggle.addEventListener('change', () => {
    if (toggle.checked) {
      document.documentElement.setAttribute('data-theme', 'dark');
      label.textContent = '';
    } else {
      document.documentElement.removeAttribute('data-theme');
      label.textContent = '';
    }
  });
})();
</script>
</body>
</html>